# file opened: cc.asm
   1  0000
   2  0000              			DEVICE ZXSPECTRUMNEXT
   3  0000                          OPT reset --zxnext --syntax=abfw
   4  0000                          slot 3
   5  0000
   6  0000                          DEFINE DISP_ADDRESS     $2000
   7  0000                          DEFINE SP_ADDRESS       $3D00
   8  0000                          OPT --zxnext=cspect
   9  0000                          DEFINE ORG_ADDRESS      $8000
  10  0000                          DEFINE TEST_CODE_PAGE   223         ; using the last page of 2MiB RAM (in emulator)
  11  0000                          DEFINE TILE_MAP_ADR     $4000           ; 80*32 = 2560 (10*256)
  12  0000                          DEFINE TILE_GFX_ADR     $6000;$5400           ; 128*32 = 4096
  13  0000                                                                  ; = 6656 $1A00 -> fits into ULA classic VRAM
  14  0000
  15  0000
  16  0000              	DEFINE CFG_FILENAME     dspedge.defaultCfgFileName
  17  0000                  STRUCT S_MARGINS        ; pixels of margin 0..31 (-1 = undefined margin)
  18  0000 ~            L           BYTE    -1      ; left
  19  0000 ~            R           BYTE    -1      ; right
  20  0000 ~            T           BYTE    -1      ; top
  21  0000 ~            B           BYTE    -1      ; bottom
  22  0000                  ENDS
  23  0000                  STRUCT S_UI_DEFINITIONS
  24  0000 ~            labelDot    WORD    0       ; address where to write display dot
  25  0000 ~            cellAdr     WORD    0       ; address of big table cell on screen at [1,0] char inside
  26  0000 ~            nextMode    BYTE    0
  27  0000 ~            keyword     WORD    0       ; address of keyword used in the CFG file
  28  0000                  ENDS
  29  0000                  STRUCT S_MODE_EDGES
  30  0000 ~                    ; current margins values (must be first four bytes of the structure)
  31  0000 ~            cur         S_MARGINS
  32  0000 ~                    ; original values (from file)
  33  0000 ~            orig        S_MARGINS
  34  0000 ~                    ; UI related config
  35  0000 ~            ui          S_UI_DEFINITIONS
  36  0000 ~                    ; internal flags and intermediate values
  37  0000 ~            modified    BYTE    0       ; if this mode was modified in some way
  38  0000 ~            leftT       BYTE    0       ; full tiles left
  39  0000 ~            rightT      BYTE    0       ; full tiles right
  40  0000 ~            midT        BYTE    0       ; amount of semi top/bottom tiles (w/o left/right corner tiles)
  41  0000 ~                    ; bit masks to redraw gfx tile with Green/Background color (columns/rows in bits)
  42  0000 ~                    ; preserve the order of offsets, they are processed in "++DE" way
  43  0000 ~            maskLeftG   BYTE    0
  44  0000 ~            maskLeftB   BYTE    0
  45  0000 ~            maskRightG  BYTE    0
  46  0000 ~            maskRightB  BYTE    0
  47  0000 ~            maskTopG    BYTE    0
  48  0000 ~            maskTopB    BYTE    0
  49  0000 ~            maskBottomG BYTE    0
  50  0000 ~            maskBottomB BYTE    0
  51  0000                  ENDS
  52  0000                  STRUCT S_STATE
  53  0000 ~            timingIsUnlocked    BYTE    0
  54  0000 ~            edge                BYTE    0   ; 0 left, 1 top, 2 right, 3 bottom (to align with chars)
  55  0000 ~            lastCtrlKey         BYTE    0   ; save/reload/quit/hz/timing when waiting for confirm
  56  0000 ~            debounceKey         BYTE    0
  57  0000 ~            modified            BYTE    0   ; set if any of modes (even inactive) is modified
  58  0000 ~            noFileFound         BYTE    0
  59  0000 ~            esxErrorNo          BYTE    1
  60  0000 ~            argsPtr             WORD    0
  61  0000                  ENDS
  62  0000                  STRUCT S_PRESERVE
  63  0000 ~                    ; WORDs used, first byte is register number, second byte is preserved value
  64  0000 ~            turbo_07            WORD    TURBO_CONTROL_NR_07
  65  0000 ~            spr_ctrl_15         WORD    SPRITE_CONTROL_NR_15
  66  0000 ~            transp_fallback_4A  WORD    TRANSPARENCY_FALLBACK_COL_NR_4A
  67  0000 ~            tile_transp_4C      WORD    TILEMAP_TRANSPARENCY_I_NR_4C
  68  0000 ~            ula_ctrl_68         WORD    ULA_CONTROL_NR_68
  69  0000 ~            display_ctrl_69     WORD    DISPLAY_CONTROL_NR_69
  70  0000 ~            tile_ctrl_6B        WORD    TILEMAP_CONTROL_NR_6B
  71  0000 ~            tile_def_attr_6C    WORD    TILEMAP_DEFAULT_ATTR_NR_6C
  72  0000 ~            tile_map_adr_6E     WORD    TILEMAP_BASE_ADR_NR_6E
  73  0000 ~            tile_gfx_adr_6F     WORD    TILEMAP_GFX_ADR_NR_6F
  74  0000 ~            tile_xofs_msb_2F    WORD    TILEMAP_XOFFSET_MSB_NR_2F
  75  0000 ~            tile_xofs_lsb_30    WORD    TILEMAP_XOFFSET_LSB_NR_30
  76  0000 ~            tile_yofs_31        WORD    TILEMAP_YOFFSET_NR_31
  77  0000 ~            pal_ctrl_43         WORD    PALETTE_CONTROL_NR_43
  78  0000 ~            pal_idx_40          WORD    PALETTE_INDEX_NR_40
  79  0000 ~            mmu2_52             WORD    MMU2_4000_NR_52
  80  0000 ~            mmu3_53             WORD    MMU3_6000_NR_53
  81  0000 ~                ; not preserving tilemode clip window coordinates, and tilemode palette
  82  0000 ~                ; (intentionally, not expecting anyone to need it, or not being able to fix it)
  83  0000 ~                ; (and subtle sub-states like half-written 9bit color to $44 -> will be lost too)
  84  0000                  ENDS
  85  0000              KEY_DEBOUNCE_WAIT   EQU     8
  86  0000              CHAR_DOT_RED        EQU     25
  87  0000              CHAR_DOT_YELLOW     EQU     26
  88  0000              CHAR_DOT_GREEN      EQU     27
  89  0000              CHAR_ARROW_L        EQU     28
  90  0000              CHAR_ARROW_T        EQU     29
  91  0000              CHAR_ARROW_R        EQU     30
  92  0000              CHAR_ARROW_B        EQU     31
  93  0000              ;; some further constants, mostly machine/API related
  94  0000
  95  0000                  INCLUDE "constants.i.asm"
# file opened: constants.i.asm
   1+ 0000
   2+ 0000              ; ----- Colour palette (ULA)
   3+ 0000              BLACK			equ 0
   4+ 0000              BLUE			equ 1
   5+ 0000              RED				equ 2
   6+ 0000              MAGENTA			equ 3
   7+ 0000              GREEN			equ 4
   8+ 0000              CYAN			equ 5
   9+ 0000              YELLOW			equ 6
  10+ 0000              WHITE			equ 7
  11+ 0000              P_BLACK			equ 0
  12+ 0000              P_BLUE			equ 1<<3
  13+ 0000              P_RED			equ 2<<3
  14+ 0000              P_MAGENTA		equ 3<<3
  15+ 0000              P_GREEN			equ 4<<3
  16+ 0000              P_CYAN			equ 5<<3
  17+ 0000              P_YELLOW		equ 6<<3
  18+ 0000              P_WHITE			equ 7<<3
  19+ 0000              ; ----- Attribs
  20+ 0000              A_FLASH			equ 128
  21+ 0000              A_BRIGHT		equ 64
  22+ 0000              ;----------------------------------------------
  23+ 0000              BIT_UP			equ 4	; 16
  24+ 0000              BIT_DOWN		equ 5	; 32
  25+ 0000              BIT_LEFT		equ 6	; 64
  26+ 0000              BIT_RIGHT		equ 7	; 128
  27+ 0000
  28+ 0000              DIR_NONE		equ %00000000
  29+ 0000              DIR_UP			equ %00010000
  30+ 0000              DIR_DOWN		equ %00100000
  31+ 0000              DIR_LEFT		equ %01000000
  32+ 0000              DIR_RIGHT		equ %10000000
  33+ 0000
  34+ 0000              DIR_UP_I		equ %11101111
  35+ 0000              DIR_DOWN_I		equ %11011111
  36+ 0000              DIR_LEFT_I		equ %10111111
  37+ 0000              DIR_RIGHT_I		equ %01111111
  38+ 0000
  39+ 0000              ;-----------------------------------------------------------------------------
  40+ 0000              ;-- I/O ports - ZX Spectrum classic (48, 128, Timex, Pentagon, ...) ports
  41+ 0000
  42+ 0000              ULA_P_FE                        equ $FE     ; BORDER + MIC + BEEP + read Keyboard
  43+ 0000              TIMEX_P_FF                      equ $FF     ; Timex video control port
  44+ 0000
  45+ 0000              ZX128_MEMORY_P_7FFD             equ $7FFD   ; ZX Spectrum 128 ports
  46+ 0000              ZX128_MEMORY_P_DFFD             equ $DFFD
  47+ 0000              ZX128P3_MEMORY_P_1FFD           equ $1FFD
  48+ 0000
  49+ 0000              AY_REG_P_FFFD                   equ $FFFD
  50+ 0000              AY_DATA_P_BFFD                  equ $BFFD
  51+ 0000
  52+ 0000              Z80_DMA_PORT_DATAGEAR           equ $6B     ; on ZXN the zxnDMA handles this
  53+ 0000              Z80_DMA_PORT_MB02               equ $0B     ; only in Zilog DMA mode zxnDMA handles this
  54+ 0000
  55+ 0000              DIVMMC_CONTROL_P_E3             equ $E3
  56+ 0000              SPI_CS_P_E7                     equ $E7
  57+ 0000              SPI_DATA_P_EB                   equ $EB
  58+ 0000
  59+ 0000              KEMPSTON_MOUSE_X_P_FBDF         equ $FBDF
  60+ 0000              KEMPSTON_MOUSE_Y_P_FFDF         equ $FFDF
  61+ 0000              KEMPSTON_MOUSE_B_P_FADF         equ $FADF   ; kempston mouse wheel+buttons
  62+ 0000
  63+ 0000              KEMPSTON_JOY1_P_1F              equ $1F
  64+ 0000              KEMPSTON_JOY2_P_37              equ $37
  65+ 0000
  66+ 0000              ;-----------------------------------------------------------------------------
  67+ 0000              ;-- I/O ports - ZX Spectrum NEXT specific ports
  68+ 0000
  69+ 0000              TBBLUE_REGISTER_SELECT_P_243B   equ $243B
  70+ 0000                  ; -- port $243B = 9275  Read+Write (detection bitmask: %0010_0100_0011_1011)
  71+ 0000                  ;   -- selects NextREG mapped at port TBBLUE_REGISTER_ACCESS_P_253B
  72+ 0000
  73+ 0000              TBBLUE_REGISTER_ACCESS_P_253B   equ $253B
  74+ 0000                  ; -- port $253B = 9531  Read?+Write? (detection bitmask: %0010_0101_0011_1011)
  75+ 0000                  ;   -- data for selected NextREG (read/write depends on the register selected)
  76+ 0000
  77+ 0000              I2C_SCL_P_103B                  equ $103B   ; i2c bus port (clock) (write only?)
  78+ 0000              I2C_SDA_P_113B                  equ $113B   ; i2c bus port (data) (read+write)
  79+ 0000              UART_TX_P_133B                  equ $133B   ; UART tx port (read+write)
  80+ 0000              UART_RX_P_143B                  equ $143B   ; UART rx port (read+write)
  81+ 0000
  82+ 0000              ZXN_DMA_P_6B                    equ $6B
  83+ 0000                  ; -- port $6B = 107 Read+Write (detection bitmask: %xxxx_xxxx_0110_1011)
  84+ 0000                  ;   - The zxnDMA is mostly compatible with Zilog DMA chip (Z8410) (at least
  85+ 0000                  ;     as far as old ZX apps are concerned), but has many modifications.
  86+ 0000                  ;   - core3.0 update - specific behaviour details can be selected (PERIPHERAL_2_NR_06)
  87+ 0000
  88+ 0000              LAYER2_ACCESS_P_123B            equ $123B
  89+ 0000                  ; -- port $123B = 4667 Read+Write (detection bitmask: %0001_0010_0011_1011)
  90+ 0000                  ;   -- bit 7-6 = write-Layer2-over-ROM bank selection (00, 01 or 10) (11 is 48kiB mode)
  91+ 0000                  ;   -- bit 3 = shadow banks "over ROM" (nextreg $13 banks instead of $12 banks)
  92+ 0000                  ;   -- bit 2 = read-Layer2-over-ROM (1 = read at $0000..$3FFF reads from Layer2)
  93+ 0000                  ;   -- bit 1 = Layer2 visibility (1 = visible, 0 = disabled) (always nextreg $12)
  94+ 0000                  ;   -- bit 0 = write-Layer2-over-ROM (1 = write at $0000..$3FFF writes into Layer2)
  95+ 0000              LAYER2_ACCESS_WRITE_OVER_ROM    equ $01     ; map Layer2 bank into ROM area (0000..3FFF) for WRITE-only (reads as ROM)
  96+ 0000              LAYER2_ACCESS_L2_ENABLED        equ $02     ; enable Layer2 (make banks form nextreg $12 visible)
  97+ 0000              LAYER2_ACCESS_READ_OVER_ROM     equ $04     ; map Layer2 bank into ROM area (0000..3FFF) for READ-only
  98+ 0000              LAYER2_ACCESS_SHADOW_OVER_ROM   equ $08     ; bank selected by bits 6-7 is from "shadow Layer 2" banks range (nextreg $13)
  99+ 0000              LAYER2_ACCESS_OVER_ROM_BANK_M   equ $C0     ; (mask of) value 0..3 selecting bank mapped for R/W (Nextreg $12 or $13)
 100+ 0000              LAYER2_ACCESS_OVER_ROM_BANK_0   equ $00     ; screen lines 0..63
 101+ 0000              LAYER2_ACCESS_OVER_ROM_BANK_1   equ $40     ; screen lines 64..127
 102+ 0000              LAYER2_ACCESS_OVER_ROM_BANK_2   equ $80     ; screen lines 128..191
 103+ 0000              LAYER2_ACCESS_OVER_ROM_48K      equ $C0     ; maps all 0..191 lines into $0000..$BFFF region
 104+ 0000
 105+ 0000              SPRITE_STATUS_SLOT_SELECT_P_303B    equ $303B
 106+ 0000                  ; -- port $303B = 12347  Read+Write (detection bitmask: %0011_0000_0011_1011)
 107+ 0000                  ;   -- write:
 108+ 0000                  ;     - sets both "sprite slot" (0..63) and "pattern slot" (0..63 +128)
 109+ 0000                  ;     - once the sprite/pattern slots are set, they act independently and
 110+ 0000                  ;     each port ($xx57 and $xx5B) will auto-increment its own slot index
 111+ 0000                  ;     (to resync one can write to this port again).
 112+ 0000                  ;     - the +128 flag will make the pattern upload start at byte 128 of pattern
 113+ 0000                  ;     slot (second half of slot)
 114+ 0000                  ;     - The sprite-slot (sprite-attributes) may be optionally interlinked with
 115+ 0000                  ;     NextReg $34 (feature controlled by NextReg $34)
 116+ 0000                  ;     - auto-increments of slot position from value 63 are officially
 117+ 0000                  ;     "undefined behaviour", wrap to 0 is not guaranteed. (only setting slots
 118+ 0000                  ;     explicitly back to valid 0..63 will make your code future-proof)
 119+ 0000                  ;   -- read (will also reset both collision and max-sprites flags):
 120+ 0000                  ;     - bit 1 = maximum sprites per line hit (set when sprite renderer ran
 121+ 0000                  ;               out of time when preparing next scanline)
 122+ 0000                  ;     - bit 0 = collision flag (set when any sprites draw non-transparent
 123+ 0000                  ;               pixel at the same location)
 124+ 0000                  ;     Both flags contain values for current scanline already at the beginning
 125+ 0000                  ;     of scanline (sprite engine renders one line ahead into buffer and updates
 126+ 0000                  ;     flags progressively as it renders the sprites)
 127+ 0000              SPRITE_STATUS_MAXIMUM_SPRITES   equ $02
 128+ 0000              SPRITE_STATUS_COLLISION         equ $01
 129+ 0000              SPRITE_SLOT_SELECT_PATTERN_HALF equ 128     ; add it to 0..63 index to make pattern upload start at second half of pattern
 130+ 0000
 131+ 0000              SPRITE_ATTRIBUTE_P_57           equ $57
 132+ 0000                  ; -- port $xx57 = 87 write-only (detection bitmask: %xxxx_xxxx_0101_0111)
 133+ 0000                  ;  - writing 4 or 5 bytes long structures to control particular sprite
 134+ 0000                  ;  - after 4/5 bytes block the sprite slot index is auto-incremented
 135+ 0000                  ;  - for detailed documentation check official docs or wiki (too long)
 136+ 0000
 137+ 0000              SPRITE_PATTERN_P_5B             equ $5B
 138+ 0000                  ; -- port $xx5B = 91 write-only (detection bitmask: %xxxx_xxxx_0101_1011)
 139+ 0000                  ;  - each pattern slot is 256 bytes long = one 16x16 pattern of 8-bit pixels
 140+ 0000                  ;    or two 16x16 patterns of 4-bit pixels.
 141+ 0000                  ;  - Patterns are uploaded in "English" order (left to right, top to bottom),
 142+ 0000                  ;    one byte encodes single pixel in 8 bit mode and two pixels in 4 bit
 143+ 0000                  ;    mode (bits 7-4 are "left" pixel, 3-0 are "right" pixel)
 144+ 0000                  ;  - pixels are offset (index) into active sprite palette
 145+ 0000
 146+ 0000              TURBO_SOUND_CONTROL_P_FFFD      equ $FFFD   ; write with bit 7 = 1 (port shared with AY)
 147+ 0000
 148+ 0000              ;-----------------------------------------------------------------------------
 149+ 0000              ;-- NEXT HW Registers (NextReg)
 150+ 0000              MACHINE_ID_NR_00                equ $00
 151+ 0000              NEXT_VERSION_NR_01              equ $01
 152+ 0000              NEXT_RESET_NR_02                equ $02
 153+ 0000              MACHINE_TYPE_NR_03              equ $03
 154+ 0000              ROM_MAPPING_NR_04               equ $04     ;In config mode, allows RAM to be mapped to ROM area.
 155+ 0000              PERIPHERAL_1_NR_05              equ $05     ;Sets joystick mode, video frequency and Scandoubler.
 156+ 0000              PERIPHERAL_2_NR_06              equ $06     ;Enables Acceleration, DivMMC, Multiface, Mouse and AY audio
 157+ 0000              TURBO_CONTROL_NR_07             equ $07
 158+ 0000              PERIPHERAL_3_NR_08              equ $08     ;ABC/ACB Stereo, Internal Speaker, SpecDrum, Timex Video Modes, Turbo Sound Next, RAM contention and [un]lock 128k paging.
 159+ 0000              PERIPHERAL_4_NR_09              equ $09     ;Sets scanlines, AY mono output, Sprite-id lockstep, disables Kempston and divMMC ports.
 160+ 0000              NEXT_VERSION_MINOR_NR_0E        equ $0E
 161+ 0000              ANTI_BRICK_NR_10                equ $10
 162+ 0000              VIDEO_TIMING_NR_11              equ $11
 163+ 0000              LAYER2_RAM_BANK_NR_12           equ $12     ;bank number where visible Layer 2 video memory begins.
 164+ 0000              LAYER2_RAM_SHADOW_BANK_NR_13    equ $13     ;bank number for Layer2 "shadow" write-over-rom
 165+ 0000              GLOBAL_TRANSPARENCY_NR_14       equ $14     ;Sets the color treated as transparent for ULA/Layer2/LoRes
 166+ 0000              SPRITE_CONTROL_NR_15            equ $15     ;LoRes mode, Sprites configuration, layers priority
 167+ 0000                  ; bit 7: enable LoRes mode
 168+ 0000                  ; bit 6: sprite rendering (1=sprite 0 on top of other, 0=sprite 0 at bottom)
 169+ 0000                  ; bit 5: If 1, the clipping works even in "over border" mode
 170+ 0000                  ; 4-2: layers priority: 000=SLU, 001=LSU, 010=SUL, 011=LUS, 100=USL, 101=ULS, 110=S,mix(U+L), 111=S,mix(U+L-5)
 171+ 0000                  ; bit 1: enable sprites over border, bit 0: show sprites
 172+ 0000              LAYER2_XOFFSET_NR_16            equ $16
 173+ 0000              LAYER2_YOFFSET_NR_17            equ $17
 174+ 0000              CLIP_LAYER2_NR_18               equ $18
 175+ 0000              CLIP_SPRITE_NR_19               equ $19
 176+ 0000              CLIP_ULA_LORES_NR_1A            equ $1A
 177+ 0000              CLIP_TILEMAP_NR_1B              equ $1B
 178+ 0000              CLIP_WINDOW_CONTROL_NR_1C       equ $1C     ;set to 15 to reset all clip-window indices to 0
 179+ 0000              RASTER_LINE_MSB_NR_1E           equ $1E
 180+ 0000              RASTER_LINE_LSB_NR_1F           equ $1F
 181+ 0000              RASTER_INTERUPT_CONTROL_NR_22   equ $22     ;Controls the timing of raster interrupts and the ULA frame interrupt.
 182+ 0000              RASTER_INTERUPT_VALUE_NR_23     equ $23
 183+ 0000              ULA_XOFFSET_NR_26               equ $26     ;since core 3.0
 184+ 0000              ULA_YOFFSET_NR_27               equ $27     ;since core 3.0
 185+ 0000              HIGH_ADRESS_KEYMAP_NR_28        equ $28
 186+ 0000              LOW_ADRESS_KEYMAP_NR_29         equ $29
 187+ 0000              HIGH_DATA_TO_KEYMAP_NR_2A       equ $2A
 188+ 0000              LOW_DATA_TO_KEYMAP_NR_2B        equ $2B
 189+ 0000              DAC_B_MIRROR_NR_2C              equ $2C
 190+ 0000              DAC_AD_MIRROR_NR_2D             equ $2D     ;another alias for $2D
 191+ 0000              SOUNDDRIVE_DF_MIRROR_NR_2D      equ $2D     ;Nextreg port-mirror of port 0xDF
 192+ 0000              DAC_C_MIRROR_NR_2E              equ $2E
 193+ 0000              TILEMAP_XOFFSET_MSB_NR_2F       equ $2F
 194+ 0000              TILEMAP_XOFFSET_LSB_NR_30       equ $30
 195+ 0000              TILEMAP_YOFFSET_NR_31           equ $31
 196+ 0000              LORES_XOFFSET_NR_32             equ $32
 197+ 0000              LORES_YOFFSET_NR_33             equ $33
 198+ 0000              SPRITE_ATTR_SLOT_SEL_NR_34      equ $34     ;Sprite-attribute slot index for $35-$39/$75-$79 port $57 mirrors
 199+ 0000              SPRITE_ATTR0_NR_35              equ $35     ;port $57 mirror in nextreg space (accessible to copper)
 200+ 0000              SPRITE_ATTR1_NR_36              equ $36
 201+ 0000              SPRITE_ATTR2_NR_37              equ $37
 202+ 0000              SPRITE_ATTR3_NR_38              equ $38
 203+ 0000              SPRITE_ATTR4_NR_39              equ $39
 204+ 0000              PALETTE_INDEX_NR_40             equ $40     ;Chooses a ULANext palette number to configure.
 205+ 0000              PALETTE_VALUE_NR_41             equ $41     ;Used to upload 8-bit colors to the ULANext palette.
 206+ 0000              PALETTE_FORMAT_NR_42            equ $42     ;ink-mask for ULANext modes
 207+ 0000              PALETTE_CONTROL_NR_43           equ $43     ;Enables or disables ULANext interpretation of attribute values and toggles active palette.
 208+ 0000              PALETTE_VALUE_9BIT_NR_44        equ $44     ;Holds the additional blue color bit for RGB333 color selection.
 209+ 0000              TRANSPARENCY_FALLBACK_COL_NR_4A equ $4A     ;8-bit colour to be drawn when all layers are transparent
 210+ 0000              SPRITE_TRANSPARENCY_I_NR_4B     equ $4B     ;index of transparent colour in sprite palette (only bottom 4 bits for 4-bit patterns)
 211+ 0000              TILEMAP_TRANSPARENCY_I_NR_4C    equ $4C     ;index of transparent colour in tilemap graphics (only bottom 4 bits)
 212+ 0000              MMU0_0000_NR_50                 equ $50     ;Set a Spectrum RAM page at position 0x0000 to 0x1FFF
 213+ 0000              MMU1_2000_NR_51                 equ $51     ;Set a Spectrum RAM page at position 0x2000 to 0x3FFF
 214+ 0000              MMU2_4000_NR_52                 equ $52     ;Set a Spectrum RAM page at position 0x4000 to 0x5FFF
 215+ 0000              MMU3_6000_NR_53                 equ $53     ;Set a Spectrum RAM page at position 0x6000 to 0x7FFF
 216+ 0000              MMU4_8000_NR_54                 equ $54     ;Set a Spectrum RAM page at position 0x8000 to 0x9FFF
 217+ 0000              MMU5_A000_NR_55                 equ $55     ;Set a Spectrum RAM page at position 0xA000 to 0xBFFF
 218+ 0000              MMU6_C000_NR_56                 equ $56     ;Set a Spectrum RAM page at position 0xC000 to 0xDFFF
 219+ 0000              MMU7_E000_NR_57                 equ $57     ;Set a Spectrum RAM page at position 0xE000 to 0xFFFF
 220+ 0000              COPPER_DATA_NR_60               equ $60
 221+ 0000              COPPER_CONTROL_LO_NR_61         equ $61
 222+ 0000              COPPER_CONTROL_HI_NR_62         equ $62
 223+ 0000              COPPER_DATA_16B_NR_63           equ $63     ; same as $60, but waits for full 16b before write
 224+ 0000              ULA_CONTROL_NR_68               equ $68
 225+ 0000              DISPLAY_CONTROL_NR_69           equ $69
 226+ 0000              LORES_CONTROL_NR_6A             equ $6A
 227+ 0000              TILEMAP_CONTROL_NR_6B           equ $6B
 228+ 0000              TILEMAP_DEFAULT_ATTR_NR_6C      equ $6C
 229+ 0000              TILEMAP_BASE_ADR_NR_6E          equ $6E     ;Tilemap base address of map
 230+ 0000              TILEMAP_GFX_ADR_NR_6F           equ $6F     ;Tilemap definitions (graphics of tiles)
 231+ 0000              LAYER2_CONTROL_NR_70            equ $70
 232+ 0000              SPRITE_ATTR0_INC_NR_75          equ $75     ;port $57 mirror in nextreg space (accessible to copper) (slot index++)
 233+ 0000              SPRITE_ATTR1_INC_NR_76          equ $76
 234+ 0000              SPRITE_ATTR2_INC_NR_77          equ $77
 235+ 0000              SPRITE_ATTR3_INC_NR_78          equ $78
 236+ 0000              SPRITE_ATTR4_INC_NR_79          equ $79
 237+ 0000              USER_STORAGE_0_NR_7F            equ $7F
 238+ 0000              EXPANSION_BUS_CONTROL_NR_80     equ $80
 239+ 0000              INTERNAL_PORT_DECODING_0_NR_82  equ $82     ;bits 0-7
 240+ 0000              INTERNAL_PORT_DECODING_1_NR_83  equ $83     ;bits 8-15
 241+ 0000              INTERNAL_PORT_DECODING_2_NR_84  equ $84     ;bits 16-23
 242+ 0000              INTERNAL_PORT_DECODING_3_NR_85  equ $85     ;bits 24-31
 243+ 0000              EXPANSION_BUS_DECODING_0_NR_86  equ $86     ;bits 0-7 mask
 244+ 0000              EXPANSION_BUS_DECODING_1_NR_87  equ $87     ;bits 8-15 mask
 245+ 0000              EXPANSION_BUS_DECODING_2_NR_88  equ $88     ;bits 16-23 mask
 246+ 0000              EXPANSION_BUS_DECODING_3_NR_89  equ $89     ;bits 24-31 mask
 247+ 0000              EXPANSION_BUS_PROPAGATE_NR_8A   equ $8A     ;Monitoring internal I/O or adding external keyboard
 248+ 0000              PI_GPIO_OUT_ENABLE_0_NR_90      equ $90     ;pins 0-7
 249+ 0000              PI_GPIO_OUT_ENABLE_1_NR_91      equ $91     ;pins 8-15
 250+ 0000              PI_GPIO_OUT_ENABLE_2_NR_92      equ $92     ;pins 16-23
 251+ 0000              PI_GPIO_OUT_ENABLE_3_NR_93      equ $93     ;pins 24-27
 252+ 0000              PI_GPIO_0_NR_98                 equ $98     ;pins 0-7
 253+ 0000              PI_GPIO_1_NR_99                 equ $99     ;pins 8-15
 254+ 0000              PI_GPIO_2_NR_9A                 equ $9A     ;pins 16-23
 255+ 0000              PI_GPIO_3_NR_9B                 equ $9B     ;pins 24-27
 256+ 0000              PI_PERIPHERALS_ENABLE_NR_A0     equ $A0
 257+ 0000              PI_I2S_AUDIO_CONTROL_NR_A2      equ $A2
 258+ 0000              PI_I2S_CLOCK_DIVIDE_NR_A3       equ $A3
 259+ 0000              DEBUG_LED_CONTROL_NR_FF         equ $FF     ;Turns debug LEDs on and off on TBBlue implementations that have them.
 260+ 0000
 261+ 0000              ;-----------------------------------------------------------------------------
 262+ 0000              ;-- common memory addresses
 263+ 0000              MEM_ROM_CHARS_3C00              equ $3C00   ; actual chars start at $3D00 with space
 264+ 0000              MEM_ZX_SCREEN_4000              equ $4000
 265+ 0000              MEM_ZX_ATTRIB_5800              equ $5800
 266+ 0000              MEM_LORES0_4000                 equ $4000
 267+ 0000              MEM_LORES1_6000                 equ $6000
 268+ 0000              MEM_TIMEX_SCR0_4000             equ $4000
 269+ 0000              MEM_TIMEX_SCR1_6000             equ $6000
 270+ 0000
 271+ 0000              ;-----------------------------------------------------------------------------
 272+ 0000              ;-- Copper commands
 273+ 0000              COPPER_NOOP                     equ %00000000
 274+ 0000              COPPER_WAIT_H                   equ %1'000000'0
 275+ 0000              COPPER_HALT_B                   equ $FF   ; 2x $FF = wait for (511,63) = infinite wait
 276+ 0000
 277+ 0000              ;-----------------------------------------------------------------------------
 278+ 0000              ; DMA (Register 6)
 279+ 0000              DMA_RESET					equ $C3
 280+ 0000              DMA_RESET_PORT_A_TIMING		equ $C7
 281+ 0000              DMA_RESET_PORT_B_TIMING		equ $CB
 282+ 0000              DMA_LOAD					equ $CF
 283+ 0000              DMA_CONTINUE				equ $D3
 284+ 0000              DMA_DISABLE_INTERUPTS		equ $AF
 285+ 0000              DMA_ENABLE_INTERUPTS		equ $AB
 286+ 0000              DMA_RESET_DISABLE_INTERUPTS	equ $A3
 287+ 0000              DMA_ENABLE_AFTER_RETI		equ $B7
 288+ 0000              DMA_READ_STATUS_BYTE		equ $BF
 289+ 0000              DMA_REINIT_STATUS_BYTE		equ $8B
 290+ 0000              DMA_START_READ_SEQUENCE		equ $A7
 291+ 0000              DMA_FORCE_READY				equ $B3
 292+ 0000              DMA_DISABLE					equ $83
 293+ 0000              DMA_ENABLE					equ $87
 294+ 0000              DMA_READ_MASK_FOLLOWS		equ $BB
 295+ 0000
 296+ 0000              ; About UART<->ESP baund rate from AA:
 297+ 0000              ;
 298+ 0000              ; It's very easy to compute the prescalar.
 299+ 0000              ; 1. Read nextreg 0x11 to find out the video timing the system is using 0-7
 300+ 0000              ; 2. Take the associated actual system clock from this table:define(__CLK_28_0', 28000000)
 301+ 0000              ; define(CLK_28_1', 28571429)
 302+ 0000              ; define(`CLK_28_2', 29464286)
 303+ 0000              ; define(__CLK_28_3', 30000000)
 304+ 0000              ; define(CLK_28_4', 31000000)
 305+ 0000              ; define(`CLK_28_5', 32000000)
 306+ 0000              ; define(__CLK_28_6', 33000000)
 307+ 0000              ; define(__CLK_28_7', 27000000)
 308+ 0000              ; 3. Divide the clock by the baud rate you want to find the 14-bit prescalar value.
 309+ 0000              ; That's it.
 310+ 0000
# file closed: constants.i.asm
  96  0000              ;-----------------------------------------------------------------------------
  97  0000              ;-- ESX DOS functions
  98  0000              M_DOSVERSION                    equ $88
  99  0000              M_GETSETDRV                     equ $89     ; get current drive (or use A='*'/'$' for current/system drive!)
 100  0000              M_GETHANDLE                     equ $8D     ; get file handle of current dot command
 101  0000              M_GETERR                        equ $93
 102  0000              F_OPEN                          equ $9A
 103  0000              F_CLOSE                         equ $9B
 104  0000              F_READ                          equ $9D
 105  0000              F_WRITE                         equ $9E
 106  0000              F_SEEK                          equ $9F
 107  0000              F_FGETPOS                       equ $A0
 108  0000              F_UNLINK                        equ $AD
 109  0000              F_RENAME                        equ $B0
 110  0000              FA_READ                         equ $01
 111  0000              ;; helper macros
 112  0000              ESXDOS      MACRO service?
 112  0000 ~              push hl
 112  0000 ~              pop ix
 112  0000 ~              rst $08
 112  0000 ~              db service?
 112  0000                ENDM    ; copies HL into IX
 113  0000              NEXTREG2A   MACRO nextreg?
 113  0000 ~              ld a,nextreg?
 113  0000 ~              call readNextReg2A
 113  0000                ENDM
 114  0000              CSP_BREAK   MACRO
 114  0000 ~              IFDEF TESTING
 114  0000 ~              break
 114  0000 ~              ENDIF
 114  0000                ENDM
 115  0000                  ;; reserved space for values (but not initialized, i.e. not part of the binary)
 116  0000                  ; actually in DISPLAYEDGE tool these re-use the same memory area where font was stored
 117  0000                  ; (turned out the DS/BLOCK does overwrite device memory always, so I'm reserving space
 118  0000                  ; here ahead of the real machine code is produced, the real code will later overwrite
 119  0000                  ; the memory as desired)
 120  0000                          ORG tilemapFont_char24
 121  9F4B              ;EsxErrorBuffer:     DS      34
 122  9F4B              ;ReadMarginsArray:   DS      dspedge.S_MARGINS * dspedge.MODE_COUNT
 123  9F4B                  ; parsing/writing buffers has to be 256B-aligned
 124  9F4B               ;   ALIGN   256
 125  9F4B              ; ParsingBuffer:      DS      256
 126  9F4B              ; WritingBuffer:      DS      256
 127  9F4B              ; WritingBuffer2:     DS      256
 128  9F4B              ; BackupFilename:     DS      256
 129  9F4B              ;lastReserved:   ASSERT  lastReserved < $3D00 && last < $3D00
 130  9F4B                          org $8000
 131  8000
 132  8000
 133  8000              CHARS         equ  15616-256
 134  8000              mystak        equ  24575         ;ar bi trary value picked to be be low
 135  8000                                              ;BFE0h and above 4000h
 136  8000              staksto       equ  24575         ;some where to put BA SIC's stack
 137  8000                                              ;pointer
 138  8000
 139  8000                                              ;last value out put to 7FFDh
 140  8000              port1         equ  #7FFD         ;ad dress of ROM/RAM switch ing port
 141  8000                                              ;in I/O map
 142  8000              catbuff       equ  #A000         ;some where for DOS to put its catalog
 143  8000              dos_catalog   equ  #011E         ;the DOS routine to call
 144  8000 00 00 00...  filename 	  ds   15
 145  800F              typ 		  equ $-4
 146  800F              pocetpolozek	equ 200
 147  800F 00           virtmem		defb 0
 148  8010              maxlen		equ 261
 149  8010              maxline equ 37
 150  8010 00 00        save_allfiles	defw 0
 151  8012 00           OKNO 	defb 0
 152  8013
 153  8013 42 41        KURZL	defw $4002+160*2		;adresa kurzoru levého okna
 154  8015 92 41        KURZR	defw $4002+160*2+80		;adresa kurzoru pravého okna
 155  8017
 156  8017 00           POSKURZL	defb 0				;pozice kurzoru v levém okně
 157  8018 00           POSKURZR	defb 0				;pozice kurzoru v pravém okně
 158  8019
 159  8019 00 00        ALLPOSL		defw 0				;celková pozice na souboru
 160  801B 00 00        ALLPOSR		defw 0
 161  801D
 162  801D 01 00        STARTWINL	defw 1				;pocatecni soubor na zacatku okna
 163  801F 01 00        STARTWINR	defw 1
 164  8021
 165  8021
 166  8021 25 80        pathl		defw PATHLEFT
 167  8023 2D 81        pathr       defw PATHRIGHT
 168  8025 43 3A FF     PATHLEFT	defb "C:",255
 169  8028 00 00 00...  			ds 261
 170  812D 43 3A FF     PATHRIGHT   defb "C:",255
 171  8130 00 00 00...  			ds 261
 172  8235 20 20 20 20  bottom		defb "                                                                                ",0
 172  8239 20 20 20 20
 172  823D 20 20 20 20
 172  8241 20 20 20 20
 172  8245 20 20 20 20
 172  8249 20 20 20 20
 172  824D 20 20 20 20
 172  8251 20 20 20 20
 172  8255 20 20 20 20
 172  8259 20 20 20 20
 172  825D 20 20 20 20
 172  8261 20 20 20 20
 172  8265 20 20 20 20
 172  8269 20 20 20 20
 172  826D 20 20 20 20
 172  8271 20 20 20 20
 172  8275 20 20 20 20
 172  8279 20 20 20 20
 172  827D 20 20 20 20
 172  8281 20 20 20 20
 172  8285 00
 173  8286              start
 174  8286 3E 03        		ld a,3
 175  8288 32 12 80     		ld (OKNO),a
 176  828B 3E 01        		ld a,1
 177  828D D3 FE        		out (254),a
 178  828F ED 91 53 0B          nextreg MMU3_6000_NR_53,5*2+1
 179  8293 21 00 60             ld      hl,$6000
 180  8296 11 01 60             ld      de,$6000+1
 181  8299 01 FF 01             ld      bc,16*32-1
 182  829C 36 00                ld      (hl),0
 183  829E ED B0                ldir
 184  82A0 21 00 60     		ld hl,$6000
 185  82A3 11 01 60     		ld de,$6001
 186  82A6 01 00 02     		ld bc,32*16
 187  82A9 75           		ld (hl),l
 188  82AA ED B0        		ldir
 189  82AC 11 00 64     		ld		de,$6000 + 32*32
 190  82AF
 191  82AF                 ; convert ROM font to 4bpp tiles by code
 192  82AF 21 00 3D             ld      hl,MEM_ROM_CHARS_3C00 + 32*8
 193  82B2 06 60                ld      b,128-' '
 194  82B4              .RomCharsLoop
 195  82B4 CD 4E 94             call    ConvertRomCharTo4bpp
 196  82B7 10 FB                djnz    .RomCharsLoop
 197  82B9
 198  82B9 21 4B 9F     		ld hl,specialchar
 199  82BC 11 00 62     		ld de,$6000+32*16
 200  82BF 01 00 01     		ld bc,specialchar2-specialchar
 201  82C2
 202  82C2 ED B0        		ldir
 203  82C4
 204  82C4 ED 91 07 03          nextreg TURBO_CONTROL_NR_07,3               ; 28Mhz mode
 205  82C8 ED 91 15 10          nextreg SPRITE_CONTROL_NR_15,%000'100'00    ; layer priority: USL
 206  82CC ED 91 4A 00          nextreg TRANSPARENCY_FALLBACK_COL_NR_4A,0   ; black transparency fallback color
 207  82D0 ED 91 4C 0F          nextreg TILEMAP_TRANSPARENCY_I_NR_4C,$0F
 208  82D4 ED 91 68 80          nextreg ULA_CONTROL_NR_68,$80               ; disable ULA layer
 209  82D8 ED 91 69 00          nextreg DISPLAY_CONTROL_NR_69,0             ; layer2 off, bank 5, timex=0
 210  82DC ED 91 6B C3          nextreg TILEMAP_CONTROL_NR_6B,%1100'0011    ; 80x32x2, 4bpp, pal0, 512tile-mode, force tile-over-ULA
 211  82E0 ED 91 6C 00          nextreg TILEMAP_DEFAULT_ATTR_NR_6C,$00      ; no pal offset, no mirror/rot, 0 bit8
 212  82E4 ED 91 6E 40          nextreg TILEMAP_BASE_ADR_NR_6E,high $4000
 213  82E8 ED 91 6F 60          nextreg TILEMAP_GFX_ADR_NR_6F,high $6000
 214  82EC ED 91 1C 08          nextreg CLIP_WINDOW_CONTROL_NR_1C,%0000'1000
 215  82F0 ED 91 1B 00          nextreg CLIP_TILEMAP_NR_1B,0
 216  82F4 ED 91 1B 9F          nextreg CLIP_TILEMAP_NR_1B,159
 217  82F8 ED 91 1B 00          nextreg CLIP_TILEMAP_NR_1B,0
 218  82FC ED 91 1B FF          nextreg CLIP_TILEMAP_NR_1B,255
 219  8300 ED 91 2F 00          nextreg TILEMAP_XOFFSET_MSB_NR_2F,0
 220  8304 ED 91 30 00          nextreg TILEMAP_XOFFSET_LSB_NR_30,0
 221  8308 ED 91 31 00          nextreg TILEMAP_YOFFSET_NR_31,0
 222  830C
 223  830C
 224  830C              		; set tilemap palette
 225  830C ED 91 43 30          nextreg PALETTE_CONTROL_NR_43,%0'011'0000   ; tilemap pal0
 226  8310 ED 91 40 00          nextreg PALETTE_INDEX_NR_40,0
 227  8314
 228  8314 21 8B 9C             ld      hl,tilemapPalette
 229  8317 06 C0                ld      b,tilemapPalette_SZ
 230  8319              .setPalLoop:
 231  8319 7E                   ld      a,(hl)
 232  831A 23                   inc     hl
 233  831B ED 92 44             nextreg PALETTE_VALUE_9BIT_NR_44,a
 234  831E 10 F9                djnz    .setPalLoop
 235  8320 21 00 40     		ld hl,$4000
 236  8323 11 01 40     		ld de,$4001
 237  8326 01 00 14     		ld bc,80*32*2
 238  8329 36 00        		ld (hl),0
 239  832B ED B0        		ldir
 240  832D 21 0A 8F     		ld hl,nadpis
 241  8330 11 00 40     		ld de,#4000
 242  8333 01 50 00     		ld bc,80
 243  8336              menu0
 244  8336 7E           		ld a,(hl)
 245  8337 12           		ld (de),a
 246  8338 13           		inc de
 247  8339 3E 50        		ld a,80
 248  833B 12           		ld (de),a
 249  833C 13           		inc de
 250  833D 23           		inc hl
 251  833E 0B           		dec bc
 252  833F 79           		ld a,c
 253  8340 B0           		or b
 254  8341 20 F3        		jr nz,menu0
 255  8343 CD 5B 97     		call kresli		;NAKRESLI HLAVNI OBRAZOVKU
 256  8346
 257  8346              STOP
 258  8346 CD E2 98     		call reload_dir
 259  8349
 260  8349 21 02 40     		ld hl,$4000+2
 261  834C 22 D0 94     		ld (adrs+1),hl
 262  834F
 263  834F CD 80 91     		call getroot
 264  8352
 265  8352 CD 75 94     		call showwin
 266  8355
 267  8355 3A 12 80     		ld a,(OKNO)
 268  8358 EE 10        		xor 16
 269  835A 32 12 80     		ld (OKNO),a
 270  835D
 271  835D CD E2 98     		call reload_dir
 272  8360
 273  8360 21 52 40     		ld hl,$4000+2+80
 274  8363 22 D0 94     		ld (adrs+1),hl
 275  8366 CD FF 91     		call getroot_reload
 276  8369 CD 75 94     		call showwin
 277  836C 3A 12 80     		ld a,(OKNO)
 278  836F EE 10        		xor 16
 279  8371 32 12 80     		ld (OKNO),a
 280  8374              III
 281  8374 3E 20        		ld a,32
 282  8376 CD 16 94     		call writecur
 283  8379 3E 10        		ld a,16
 284  837B 11 35 82     		ld de,bottom
 285  837E 21 1F 00     		ld hl,0*256+31
 286  8381 CD 21 98     		call print
 287  8384
 288  8384              loop0
 289  8384 21 37 48     		ld   hl,$4000+160*13+23
 290  8387 22 B5 84     		ld (PROGS+1),hl
 291  838A
 292  838A CD 1F 8D     		call gettime
 293  838D ED 91 56 14  		nextreg $56,20
 294  8391
 295  8391
 296  8391
 297  8391 21 1F 01     		ld hl,1*256+31
 298  8394 3E 10        		ld a,16
 299  8396 11 03 84     		ld de,seltxt
 300  8399 CD 21 98     		call print
 301  839C
 302  839C 21 1F 29     		ld hl,41*256+31
 303  839F 3E 10        		ld a,16
 304  83A1 11 03 84     		ld de,seltxt
 305  83A4 CD 21 98     		call print
 306  83A7
 307  83A7
 308  83A7 2A FF 83     		ld hl,(numsel)
 309  83AA CD B4 91     		call NUM
 310  83AD 21 1F 0B     		ld hl,11*256+31
 311  83B0 3E 10        		ld a,16
 312  83B2 11 AB 91     		ld de,NUMBUF
 313  83B5 CD 21 98     		call print
 314  83B8
 315  83B8 2A 01 84     		ld hl,(numsel+2)
 316  83BB CD B4 91     		call NUM
 317  83BE 21 1F 33     		ld hl,51*256+31
 318  83C1 3E 10        		ld a,16
 319  83C3 11 AB 91     		ld de,NUMBUF
 320  83C6 CD 21 98     		call print
 321  83C9              ;*******************************
 322  83C9
 323  83C9              		; ld a,(POSKURZL)
 324  83C9              		; ld l,a
 325  83C9              		; ld h,0
 326  83C9              		; call NUM
 327  83C9              		; ld hl,1*256+31
 328  83C9              		; ld a,16
 329  83C9              		; ld de,NUMBUF
 330  83C9              		; call print
 331  83C9
 332  83C9              		; ld hl,(STARTWINL)
 333  83C9              		; call NUM
 334  83C9              		; ld hl,9*256+31
 335  83C9              		; ld a,16
 336  83C9              		; ld de,NUMBUF
 337  83C9              		; call print
 338  83C9
 339  83C9              		; ld a,(POSKURZL)
 340  83C9              		; ld l,a
 341  83C9              		; ld h,0
 342  83C9              		; ex de,hl
 343  83C9              		; ld hl,(STARTWINL)
 344  83C9              		; add hl,de
 345  83C9              		; inc hl
 346  83C9              		; call find83
 347  83C9              		; xor a
 348  83C9              		; ld (TMP83+11),a
 349  83C9              		; ld hl,20*256+31
 350  83C9              		; ld a,16
 351  83C9              		; ld de,TMP83
 352  83C9
 353  83C9              		; call print
 354  83C9
 355  83C9              		; ld a,(POSKURZR)
 356  83C9              		; ld l,a
 357  83C9              		; ld h,0
 358  83C9              		; call NUM
 359  83C9              		; ld hl,41*256+31
 360  83C9              		; ld a,16
 361  83C9              		; ld de,NUMBUF
 362  83C9              		; call print
 363  83C9
 364  83C9              		; ld hl,(STARTWINR)
 365  83C9              		; call NUM
 366  83C9              		; ld hl,49*256+31
 367  83C9              		; ld a,16
 368  83C9              		; ld de,NUMBUF
 369  83C9              		; call print
 370  83C9
 371  83C9              		; ld a,(POSKURZR)
 372  83C9              		; ld l,a
 373  83C9              		; ld h,0
 374  83C9              		; ex de,hl
 375  83C9              		; ld hl,(STARTWINR)
 376  83C9              		; add hl,de
 377  83C9              		; inc hl
 378  83C9              		; call find83
 379  83C9              		; xor a
 380  83C9              		; ld (TMP83+11),a
 381  83C9              		; ld hl,60*256+31
 382  83C9              		; ld a,16
 383  83C9              		; ld de,TMP83
 384  83C9
 385  83C9              		; call print
 386  83C9
 387  83C9              ;*******************************
 388  83C9
 389  83C9
 390  83C9
 391  83C9 CD 8F 95     		call INKEY
 392  83CC
 393  83CC 32 13 94     		ld (klavesa),a
 394  83CF
 395  83CF FE 7F        		cp ''
 396  83D1 CC 8A 96     		call z,info
 397  83D4 FE 0A        		cp 10
 398  83D6 CA 98 92     		jp z,down
 399  83D9 FE 0B        		cp 11
 400  83DB CA 76 93     		jp z,up
 401  83DE FE 04        		cp 4		;true video
 402  83E0
 403  83E0 CA 47 92     		jp z,changewin
 404  83E3 FE 0D        		cp 13
 405  83E5 CA 99 90     		jp z,enter
 406  83E8 FE 38        		cp "8"
 407  83EA CA 93 86     		jp z,delete
 408  83ED FE 30        		cp "0"
 409  83EF CA 48 8D     		jp z,menu
 410  83F2 FE 35        		cp "5"
 411  83F4 CA 77 88     		jp z,copy
 412  83F7 FE 20        		cp 32
 413  83F9 CA 0E 84     		jp z,select
 414  83FC
 415  83FC C3 84 83     		jp loop0
 416  83FF
 417  83FF 00 00 00 00  numsel	defw 0,0
 418  8403 53 65 6C 65  seltxt defb "Selected: ",0
 418  8407 63 74 65 64
 418  840B 3A 20 00
 419  840E              select
 420  840E 21 17 80     		ld hl,POSKURZL
 421  8411 CD 3D 94     		call ROZHOD
 422  8414 7E           		ld a,(hl)
 423  8415 6F           		ld l,a
 424  8416 26 00        		ld h,0
 425  8418
 426  8418 E5           		push hl
 427  8419 21 1D 80     		ld hl,STARTWINL
 428  841C CD 45 94     		call ROZHOD2
 429  841F 7E           		ld a,(hl)
 430  8420 23           		inc hl
 431  8421 66           		ld h,(hl)
 432  8422 6F           		ld l,a
 433  8423
 434  8423 EB           		ex de,hl
 435  8424 E1           		pop hl
 436  8425 19           		add hl,de
 437  8426 23           		inc hl				;v HL máme číslo souboru
 438  8427 CD 36 9B     		call BUFF83
 439  842A CD 65 95     		call find83
 440  842D CD 36 9B     		call BUFF83
 441  8430 2A 80 95     		ld hl,(foundfile)
 442  8433              SEL
 443  8433 CB 7E        		bit 7,(hl)
 444  8435 28 15        		jr z,select_file
 445  8437 CB BE        		res 7,(hl)
 446  8439
 447  8439 21 FF 83     		ld hl,numsel
 448  843C CD 45 94     		call ROZHOD2
 449  843F E5           		push hl
 450  8440 7E           		ld a,(hl)
 451  8441 23           		inc hl
 452  8442 66           		ld h,(hl)
 453  8443 6F           		ld l,a
 454  8444 D1           		pop de
 455  8445 2B           		dec hl
 456  8446 EB           		ex de,hl
 457  8447 73           		ld (hl),e
 458  8448 23           		inc hl
 459  8449 72           		ld (hl),d
 460  844A
 461  844A 18 13        		jr deselect_file
 462  844C              select_file
 463  844C CB FE        		set 7,(hl)			;označ soubor
 464  844E 21 FF 83     		ld hl,numsel
 465  8451 CD 45 94     		call ROZHOD2
 466  8454 E5           		push hl
 467  8455 7E           		ld a,(hl)
 468  8456 23           		inc hl
 469  8457 66           		ld h,(hl)
 470  8458 6F           		ld l,a
 471  8459 D1           		pop de
 472  845A 23           		inc hl
 473  845B EB           		ex de,hl
 474  845C 73           		ld (hl),e
 475  845D 23           		inc hl
 476  845E 72           		ld (hl),d
 477  845F
 478  845F              deselect_file
 479  845F
 480  845F              selcont
 481  845F 21 43 92     		ld hl,adrl
 482  8462 CD 45 94     		call ROZHOD2
 483  8465 7E           		ld a,(hl)
 484  8466 23           		inc hl
 485  8467 66           		ld h,(hl)
 486  8468 6F           		ld l,a
 487  8469 22 D0 94     		ld (adrs+1),hl
 488  846C
 489  846C CD 80 91     		call getroot
 490  846F
 491  846F CD 75 94     		call showwin
 492  8472
 493  8472 C3 98 92     		jp down
 494  8475
 495  8475
 496  8475              					; CPPX1    ld   de,0
 497  8475              							 ; or   a
 498  8475              							 ; sbc  hl,de
 499  8475              							 ; jr   c,CPPNE1
 500  8475              					; CPPX3    ld   b,1
 501  8475              							 ; ld   (PROGPROM),hl
 502  8475              							 ; call PROGRES
 503  8475              					; CPPNE1
 504  8475
 505  8475 00 00        PROGPROM	defw 0
 506  8477 00 00        PROGPROM2	defw 0
 507  8479
 508  8479              ;Výpočet důležitý pro progress
 509  8479              ;Počet v registru DE
 510  8479              ;		Výstup HL na CPPX1
 511  8479              ;			   A na CPPX3
 512  8479              ;			   PROGRES vynulovat
 513  8479 62           PROVYP   ld   h,d
 514  847A 6B                    ld   l,e
 515  847B 7A                    ld   a,d
 516  847C B7                    or   a
 517  847D 20 05                 jr   nz,PROV3
 518  847F 7B                    ld   a,e
 519  8480 FE 09                 cp   9
 520  8482 38 1B                 jr   c,PROV4
 521  8484 AF           PROV3    xor  a
 522  8485 CB 3C                 srl  h
 523  8487 CB 1D                 rr   l
 524  8489 1F                    rra
 525  848A CB 3C                 srl  h
 526  848C CB 1D                 rr   l
 527  848E 1F                    rra
 528  848F CB 3C                 srl  h
 529  8491 CB 1D                 rr   l
 530  8493 1F                    rra
 531  8494 CB 3C                 srl  h
 532  8496 CB 1D                 rr   l
 533  8498 1F                    rra
 534  8499 B7                    or   a
 535  849A
 536  849A 3E 01                 ld   a,1
 537  849C
 538  849C C8           		 ret  z
 539  849D 23                    inc  hl
 540  849E C9                    ret
 541  849F
 542  849F 21 A9 84     PROV4    ld   hl,TABPRO
 543  84A2 1B                    dec  de
 544  84A3 19                    add  hl,de
 545  84A4 7E                    ld   a,(hl)
 546  84A5 21 01 00              ld   hl,1
 547  84A8
 548  84A8 C9                    ret
 549  84A9 10 08 05 04  TABPRO   db 16,8,5,4,3,2,2,2
 549  84AD 03 02 02 02
 550  84B1
 551  84B1 06 01        PRGRS1   ld   b,1
 552  84B3 E5           PROGRES  push hl
 553  84B4 21 39 48     PROGS    ld   hl,$4000+160*13+25
 554  84B7 3E 24                 ld   a,36		;barva teploměru
 555  84B9 77           PROGRSM1 ld   (hl),a
 556  84BA 23                    inc  hl
 557  84BB 23           		 inc  hl
 558  84BC 10 FB                 djnz PROGRSM1
 559  84BE 22 B5 84              ld   (PROGS+1),hl
 560  84C1 E1                    pop  hl
 561  84C2 C9                    ret
 562  84C3
 563  84C3 E5           PROGRES2 push hl
 564  84C4 21 D9 48     PROGS2   ld   hl,$4000+160*14+25
 565  84C7 3E 24                 ld   a,36		;barva teploměru
 566  84C9 77           PROGRSM12 ld   (hl),a
 567  84CA 23                    inc  hl
 568  84CB 23           		 inc  hl
 569  84CC 10 FB                 djnz PROGRSM12
 570  84CE 22 C5 84              ld   (PROGS2+1),hl
 571  84D1 E1                    pop  hl
 572  84D2 C9                    ret
 573  84D3
 574  84D3              clearpr
 575  84D3 21 D9 48     		ld   hl,$4000+160*14+25
 576  84D6 3E 10        		ld a,16
 577  84D8 06 28        		ld b,40
 578  84DA              clearpr2
 579  84DA 77           		ld (hl),a
 580  84DB 23           		inc hl
 581  84DC 23           		inc hl
 582  84DD 10 FB        		djnz clearpr2
 583  84DF C9           		ret
 584  84E0
 585  84E0              moredelete
 586  84E0
 587  84E0
 588  84E0 CD 70 92     		call savescr
 589  84E3
 590  84E3 21 0A 0A     		ld hl,10 * 256 + 10
 591  84E6 01 05 3C     		ld bc,60 * 256 + 5
 592  84E9 3E 10        		ld a,16
 593  84EB CD 41 98     		call window
 594  84EE
 595  84EE 21 0B 0B     		ld hl,11*256+11
 596  84F1 3E 10        		ld a,16
 597  84F3 11 C8 89     		ld de,moredeletetxt
 598  84F6 CD 21 98     		call print
 599  84F9
 600  84F9
 601  84F9
 602  84F9
 603  84F9 21 FF 83     		ld hl,numsel
 604  84FC CD 45 94     		call ROZHOD2
 605  84FF
 606  84FF 7E           		ld a,(hl)
 607  8500 23           		inc hl
 608  8501 66           		ld h,(hl)
 609  8502 6F           		ld l,a
 610  8503 E5           		push hl
 611  8504
 612  8504 EB           		ex de,hl
 613  8505
 614  8505 CD 79 84     		call PROVYP
 615  8508 87           		add a,a
 616  8509 22 47 8B     		ld   (CPPX1+1),hl
 617  850C 32 4F 8B             ld   (CPPX3+1),a
 618  850F 21 00 00             ld   hl,0
 619  8512 22 75 84             ld   (PROGPROM),hl
 620  8515
 621  8515 21 AB 91     		ld hl,NUMBUF
 622  8518 11 AC 91     		ld de,NUMBUF+1
 623  851B 01 05 00     		ld bc,5
 624  851E 3E 20        		ld a,32
 625  8520 77           		ld (hl),a
 626  8521 ED B0        		ldir
 627  8523 21 AB 91     		ld hl,NUMBUF
 628  8526 AF           		xor a
 629  8527 32 AE 91     		ld (NUMBUF+3),a
 630  852A 22 F6 91     		ld (numadr+1),hl
 631  852D E1           		pop hl
 632  852E CD D6 91     		call DECIMAL3
 633  8531 21 0B 12     		ld hl,18*256+11
 634  8534 3E 10        		ld a,16
 635  8536 11 AB 91     		ld de,NUMBUF
 636  8539 CD 21 98     		call print
 637  853C
 638  853C
 639  853C 21 0E 3C     		ld hl,60*256+14
 640  853F 3E 30        		ld a,48
 641  8541 11 1B 88     		ld de,yestxt
 642  8544 CD 21 98     		call print
 643  8547
 644  8547
 645  8547
 646  8547
 647  8547 21 0F 3C     		ld hl,60*256+15
 648  854A 3E 10        		ld a,16
 649  854C 11 27 88     		ld de,notxt
 650  854F CD 21 98     		call print
 651  8552              mdeletewait
 652  8552 CD 8F 95     		call INKEY
 653  8555 FE 01        		cp 1
 654  8557 CA A8 89     		jp z,copyend
 655  855A FE 0D        		cp 13
 656  855C 28 02        		jr z,mdeletecont
 657  855E 18 F2        		jr mdeletewait
 658  8560
 659  8560              mdeletecont
 660  8560
 661  8560 21 FF 83     		ld hl,numsel
 662  8563 CD 45 94     		call ROZHOD2
 663  8566
 664  8566 7E           		ld a,(hl)
 665  8567 23           		inc hl
 666  8568 56           		ld d,(hl)
 667  8569 5F           		ld e,a
 668  856A
 669  856A CD 79 84     		call PROVYP
 670  856D 87           		add a,a
 671  856E 22 B1 85     		ld   (DPPX1+1),hl
 672  8571 32 B9 85             ld   (DPPX3+1),a
 673  8574 21 00 00             ld   hl,0
 674  8577 22 75 84             ld   (PROGPROM),hl
 675  857A
 676  857A 21 00 00     		ld hl,0
 677  857D
 678  857D              deletenext
 679  857D E5           		push hl
 680  857E CD 65 95     		call find83
 681  8581 CD 36 9B     		call BUFF83
 682  8584 2A 80 95     		ld hl,(foundfile)
 683  8587 CB 7E        		bit 7,(hl)
 684  8589 CA C0 85     		jp z,nemazat
 685  858C CB BE        		res 7,(hl)
 686  858E
 687  858E 06 0B        		ld b,11
 688  8590 21 82 95     		ld hl,TMP83
 689  8593              ACCCAC							;vynuluj všechny stavové bity v názvu (7.)
 690  8593 CB BE        		res 7,(hl)
 691  8595 23           		inc hl
 692  8596 10 FB        		djnz ACCCAC
 693  8598 3E FF        		ld a,$ff
 694  859A 32 8D 95     		ld (TMP83+11),a
 695  859D
 696  859D CD E2 99     		call dospage
 697  85A0
 698  85A0 21 82 95     		ld hl,TMP83
 699  85A3 CD 24 01     		call $0124
 700  85A6
 701  85A6 CD F2 99     		call basicpage
 702  85A9              ;------------------------
 703  85A9
 704  85A9 2A 75 84     		ld   hl,(PROGPROM)
 705  85AC 23                   inc  hl
 706  85AD 22 75 84             ld   (PROGPROM),hl
 707  85B0 11 00 00     DPPX1    ld   de,0
 708  85B3 B7                    or   a
 709  85B4 ED 52                 sbc  hl,de
 710  85B6 38 08                 jr   c,DPPNE1
 711  85B8 06 01        DPPX3    ld   b,1
 712  85BA 22 75 84              ld   (PROGPROM),hl
 713  85BD CD B3 84              call PROGRES
 714  85C0              DPPNE1
 715  85C0
 716  85C0              nemazat
 717  85C0
 718  85C0 21 5B 9B     		ld hl,ALLFILES
 719  85C3 CD 45 94     		call ROZHOD2
 720  85C6 7E           		ld a,(hl)
 721  85C7 23           		inc hl
 722  85C8 56           		ld d,(hl)
 723  85C9 5F           		ld e,a
 724  85CA E1           		pop hl
 725  85CB B7           		or a
 726  85CC ED 52        		sbc hl,de
 727  85CE 19           		add hl,de
 728  85CF CA D6 85     		jp z,mmorekonec
 729  85D2 23           		inc hl
 730  85D3 C3 7D 85     		jp deletenext
 731  85D6
 732  85D6              mmorekonec
 733  85D6
 734  85D6 21 00 00     		ld hl,0
 735  85D9 21 5B 9B     		ld hl,ALLFILES
 736  85DC CD 45 94     		call ROZHOD2
 737  85DF AF           		xor a
 738  85E0 77           		ld (hl),a
 739  85E1 23           		inc hl
 740  85E2 77           		ld (hl),a
 741  85E3 21 17 80     		ld hl,POSKURZL
 742  85E6 CD 3D 94     		call ROZHOD
 743  85E9 AF           		xor a
 744  85EA 77           		ld (hl),a
 745  85EB CD 84 92     		call loadscr
 746  85EE
 747  85EE 21 3F 92     		ld hl,pozicel
 748  85F1 CD 45 94     		call ROZHOD2
 749  85F4 7E           		ld a,(hl)
 750  85F5 23           		inc hl
 751  85F6 66           		ld h,(hl)
 752  85F7 6F           		ld l,a
 753  85F8
 754  85F8 01 1B 26     		ld bc,38 * 256 + 27
 755  85FB 3E 00        		ld a,0
 756  85FD CD 41 98     		call window
 757  8600
 758  8600
 759  8600 CD E2 98     		call reload_dir
 760  8603
 761  8603 21 43 92     		ld hl,adrl
 762  8606 CD 45 94     		call ROZHOD2
 763  8609 7E           		ld a,(hl)
 764  860A 23           		inc hl
 765  860B 66           		ld h,(hl)
 766  860C 6F           		ld l,a
 767  860D 22 D0 94     		ld (adrs+1),hl
 768  8610 CD FF 91     		call getroot_reload
 769  8613 CD 75 94     		call showwin
 770  8616 3E 20        		ld a,32
 771  8618 CD 16 94     		call writecur
 772  861B
 773  861B
 774  861B              ;---------------------------
 775  861B 3A 12 80     		ld a,(OKNO)
 776  861E EE 10        		xor 16
 777  8620 32 12 80     		ld (OKNO),a
 778  8623
 779  8623 CD E2 99     		call dospage
 780  8626 21 21 80     		ld hl,pathl
 781  8629 CD 45 94     		call ROZHOD2
 782  862C 7E           		ld a,(hl)
 783  862D 23           		inc hl
 784  862E 66           		ld h,(hl)
 785  862F 6F           		ld l,a
 786  8630
 787  8630 AF           		xor a
 788  8631 CD B1 01     		call $01b1
 789  8634 CD F2 99     		call basicpage
 790  8637
 791  8637 21 00 00     		ld hl,0
 792  863A 21 5B 9B     		ld hl,ALLFILES
 793  863D CD 45 94     		call ROZHOD2
 794  8640 AF           		xor a
 795  8641 77           		ld (hl),a
 796  8642 23           		inc hl
 797  8643 77           		ld (hl),a
 798  8644 21 17 80     		ld hl,POSKURZL
 799  8647 CD 3D 94     		call ROZHOD
 800  864A AF           		xor a
 801  864B 77           		ld (hl),a
 802  864C
 803  864C
 804  864C 21 3F 92     		ld hl,pozicel
 805  864F CD 45 94     		call ROZHOD2
 806  8652 7E           		ld a,(hl)
 807  8653 23           		inc hl
 808  8654 66           		ld h,(hl)
 809  8655 6F           		ld l,a
 810  8656
 811  8656 01 1B 26     		ld bc,38 * 256 + 27
 812  8659 3E 00        		ld a,0
 813  865B CD 41 98     		call window
 814  865E
 815  865E
 816  865E CD E2 98     		call reload_dir
 817  8661
 818  8661 21 43 92     		ld hl,adrl
 819  8664 CD 45 94     		call ROZHOD2
 820  8667 7E           		ld a,(hl)
 821  8668 23           		inc hl
 822  8669 66           		ld h,(hl)
 823  866A 6F           		ld l,a
 824  866B 22 D0 94     		ld (adrs+1),hl
 825  866E CD FF 91     		call getroot_reload
 826  8671 CD 75 94     		call showwin
 827  8674 3A 12 80     		ld a,(OKNO)
 828  8677 EE 10        		xor 16
 829  8679 32 12 80     		ld (OKNO),a
 830  867C
 831  867C CD E2 99     		call dospage
 832  867F 21 21 80     		ld hl,pathl
 833  8682 CD 45 94     		call ROZHOD2
 834  8685 7E           		ld a,(hl)
 835  8686 23           		inc hl
 836  8687 66           		ld h,(hl)
 837  8688 6F           		ld l,a
 838  8689
 839  8689 AF           		xor a
 840  868A CD B1 01     		call $01b1
 841  868D CD F2 99     		call basicpage
 842  8690 C3 84 83     		jp loop0
 843  8693
 844  8693
 845  8693
 846  8693              delete
 847  8693 21 FF 83     		ld hl,numsel
 848  8696 CD 45 94     		call ROZHOD2
 849  8699 7E           		ld a,(hl)
 850  869A 23           		inc hl
 851  869B 66           		ld h,(hl)
 852  869C 6F           		ld l,a
 853  869D B4           		or h
 854  869E C2 E0 84     		jp nz,moredelete
 855  86A1
 856  86A1 CD 70 92     		call savescr
 857  86A4 21 0A 0A     		ld hl,10 * 256 + 10
 858  86A7 01 05 3C     		ld bc,60 * 256 + 5
 859  86AA 3E 10        		ld a,16
 860  86AC CD 41 98     		call window
 861  86AF
 862  86AF 21 0B 0B     		ld hl,11*256+11
 863  86B2 3E 10        		ld a,16
 864  86B4 11 0D 88     		ld de,onedeletetxt
 865  86B7 CD 21 98     		call print
 866  86BA
 867  86BA 21 17 80     		ld hl,POSKURZL
 868  86BD CD 3D 94     		call ROZHOD
 869  86C0 7E           		ld a,(hl)
 870  86C1 6F           		ld l,a
 871  86C2 26 00        		ld h,0
 872  86C4
 873  86C4 E5           		push hl
 874  86C5 21 1D 80     		ld hl,STARTWINL
 875  86C8 CD 45 94     		call ROZHOD2
 876  86CB 7E           		ld a,(hl)
 877  86CC 23           		inc hl
 878  86CD 66           		ld h,(hl)
 879  86CE 6F           		ld l,a
 880  86CF
 881  86CF EB           		ex de,hl
 882  86D0 E1           		pop hl
 883  86D1 19           		add hl,de
 884  86D2 E5           		push hl
 885  86D3 23           		inc hl
 886  86D4 CD 65 95     		call find83
 887  86D7 E1           		pop hl
 888  86D8 CD C1 9A     		call FINDLFN
 889  86DB
 890  86DB
 891  86DB
 892  86DB
 893  86DB 21 61 9B     		ld hl,LFNNAME
 894  86DE 11 49 88     		ld de,bfname
 895  86E1 01 2D 00     		ld bc,45
 896  86E4 ED B0        		ldir
 897  86E6
 898  86E6 21 0B 18     		ld hl,24*256+11
 899  86E9 3E 10        		ld a,16
 900  86EB 11 49 88     		ld de,bfname
 901  86EE CD 21 98     		call print
 902  86F1
 903  86F1 21 0E 3C     		ld hl,60*256+14
 904  86F4 3E 30        		ld a,48
 905  86F6 11 1B 88     		ld de,yestxt
 906  86F9 CD 21 98     		call print
 907  86FC
 908  86FC
 909  86FC
 910  86FC
 911  86FC 21 0F 3C     		ld hl,60*256+15
 912  86FF 3E 10        		ld a,16
 913  8701 11 27 88     		ld de,notxt
 914  8704 CD 21 98     		call print
 915  8707              deletewait
 916  8707 CD 8F 95     		call INKEY
 917  870A FE 01        		cp 1
 918  870C CA A8 89     		jp z,copyend
 919  870F FE 0D        		cp 13
 920  8711 28 02        		jr z,deletecont
 921  8713 18 F2        		jr deletewait
 922  8715
 923  8715              deletecont
 924  8715
 925  8715 06 0B        		ld b,11
 926  8717 21 82 95     		ld hl,TMP83
 927  871A              CCCAC							;vynuluj všechny stavové bity v názvu (7.)
 928  871A CB BE        		res 7,(hl)
 929  871C 23           		inc hl
 930  871D 10 FB        		djnz CCCAC
 931  871F 3E FF        		ld a,$ff
 932  8721 32 8D 95     		ld (TMP83+11),a
 933  8724
 934  8724 CD E2 99     		call dospage
 935  8727
 936  8727 21 82 95     		ld hl,TMP83
 937  872A CD 24 01     		call $0124
 938  872D
 939  872D CD F2 99     		call basicpage
 940  8730              ;------------------------
 941  8730              KON
 942  8730
 943  8730 21 00 00     		ld hl,0
 944  8733 21 5B 9B     		ld hl,ALLFILES
 945  8736 CD 45 94     		call ROZHOD2
 946  8739 AF           		xor a
 947  873A 77           		ld (hl),a
 948  873B 23           		inc hl
 949  873C 77           		ld (hl),a
 950  873D 21 17 80     		ld hl,POSKURZL
 951  8740 CD 3D 94     		call ROZHOD
 952  8743 AF           		xor a
 953  8744 77           		ld (hl),a
 954  8745
 955  8745 CD E2 99     		call dospage
 956  8748 21 21 80     		ld hl,pathl
 957  874B CD 45 94     		call ROZHOD2
 958  874E 7E           		ld a,(hl)
 959  874F 23           		inc hl
 960  8750 66           		ld h,(hl)
 961  8751 6F           		ld l,a
 962  8752
 963  8752 AF           		xor a
 964  8753 CD B1 01     		call $01b1
 965  8756 CD F2 99     		call basicpage
 966  8759
 967  8759 CD E2 98     		call reload_dir
 968  875C CD 84 92     		call loadscr
 969  875F
 970  875F 21 3F 92     		ld hl,pozicel
 971  8762 CD 45 94     		call ROZHOD2
 972  8765 7E           		ld a,(hl)
 973  8766 23           		inc hl
 974  8767 66           		ld h,(hl)
 975  8768 6F           		ld l,a
 976  8769
 977  8769 01 1B 26     		ld bc,38 * 256 + 27
 978  876C 3E 00        		ld a,0
 979  876E CD 41 98     		call window
 980  8771
 981  8771
 982  8771 21 43 92     		ld hl,adrl
 983  8774 CD 45 94     		call ROZHOD2
 984  8777 7E           		ld a,(hl)
 985  8778 23           		inc hl
 986  8779 66           		ld h,(hl)
 987  877A 6F           		ld l,a
 988  877B 22 D0 94     		ld (adrs+1),hl
 989  877E CD FF 91     		call getroot_reload
 990  8781 CD 75 94     		call showwin
 991  8784 3E 20        		ld a,32
 992  8786 CD 16 94     		call writecur
 993  8789              ;---------------------------
 994  8789 3A 12 80     		ld a,(OKNO)
 995  878C EE 10        		xor 16
 996  878E 32 12 80     		ld (OKNO),a
 997  8791
 998  8791 CD E2 99     		call dospage
 999  8794 21 21 80     		ld hl,pathl
1000  8797 CD 45 94     		call ROZHOD2
1001  879A 7E           		ld a,(hl)
1002  879B 23           		inc hl
1003  879C 66           		ld h,(hl)
1004  879D 6F           		ld l,a
1005  879E
1006  879E AF           		xor a
1007  879F CD B1 01     		call $01b1
1008  87A2 CD F2 99     		call basicpage
1009  87A5
1010  87A5 21 00 00     		ld hl,0
1011  87A8 21 5B 9B     		ld hl,ALLFILES
1012  87AB CD 45 94     		call ROZHOD2
1013  87AE AF           		xor a
1014  87AF 77           		ld (hl),a
1015  87B0 23           		inc hl
1016  87B1 77           		ld (hl),a
1017  87B2 21 17 80     		ld hl,POSKURZL
1018  87B5 CD 3D 94     		call ROZHOD
1019  87B8 AF           		xor a
1020  87B9 77           		ld (hl),a
1021  87BA              		;call loadscr
1022  87BA
1023  87BA 21 3F 92     		ld hl,pozicel
1024  87BD CD 45 94     		call ROZHOD2
1025  87C0 7E           		ld a,(hl)
1026  87C1 23           		inc hl
1027  87C2 66           		ld h,(hl)
1028  87C3 6F           		ld l,a
1029  87C4
1030  87C4 01 1B 26     		ld bc,38 * 256 + 27
1031  87C7 3E 00        		ld a,0
1032  87C9 CD 41 98     		call window
1033  87CC
1034  87CC
1035  87CC CD E2 98     		call reload_dir
1036  87CF
1037  87CF 21 43 92     		ld hl,adrl
1038  87D2 CD 45 94     		call ROZHOD2
1039  87D5 7E           		ld a,(hl)
1040  87D6 23           		inc hl
1041  87D7 66           		ld h,(hl)
1042  87D8 6F           		ld l,a
1043  87D9 22 D0 94     		ld (adrs+1),hl
1044  87DC CD FF 91     		call getroot_reload
1045  87DF CD 75 94     		call showwin
1046  87E2 3A 12 80     	ld a,(OKNO)
1047  87E5 EE 10        		xor 16
1048  87E7 32 12 80     		ld (OKNO),a
1049  87EA
1050  87EA CD E2 99     		call dospage
1051  87ED 21 21 80     		ld hl,pathl
1052  87F0 CD 45 94     		call ROZHOD2
1053  87F3 7E           		ld a,(hl)
1054  87F4 23           		inc hl
1055  87F5 66           		ld h,(hl)
1056  87F6 6F           		ld l,a
1057  87F7
1058  87F7 AF           		xor a
1059  87F8 CD B1 01     		call $01b1
1060  87FB CD F2 99     		call basicpage
1061  87FE
1062  87FE C3 84 83     		jp loop0
1063  8801
1064  8801
1065  8801
1066  8801              blocklenght	equ 1024*6
1067  8801
1068  8801 43 6F 70 79  onecopytxt 	defb "Copy file: ",0
1068  8805 20 66 69 6C
1068  8809 65 3A 20 00
1069  880D 44 65 6C 65  onedeletetxt 	defb "Delete file: ",0
1069  8811 74 65 20 66
1069  8815 69 6C 65 3A
1069  8819 20 00
1070  881B 45 4E 54 45  yestxt		defb "ENTER = yes",0
1070  881F 52 20 3D 20
1070  8823 79 65 73 00
1071  8827 42 52 45 41  notxt 		defb "BREAK = no",0
1071  882B 4B 20 3D 20
1071  882F 6E 6F 00
1072  8832 20 20 20 20  spaces 		defb "          ",0
1072  8836 20 20 20 20
1072  883A 20 20 00
1073  883D 50 6C 61 73  pleasewait	defb "Plase wait ",0
1073  8841 65 20 77 61
1073  8845 69 74 20 00
1074  8849 00 00 00...  bfname		defs 45
1075  8876 00           			defb 0
1076  8877              copy
1077  8877 21 FF 83     		ld hl,numsel
1078  887A CD 45 94     		call ROZHOD2
1079  887D 7E           		ld a,(hl)
1080  887E 23           		inc hl
1081  887F 66           		ld h,(hl)
1082  8880 6F           		ld l,a
1083  8881 B4           		or h
1084  8882 C2 F9 89     		jp nz,morecopy
1085  8885
1086  8885
1087  8885
1088  8885 CD 70 92     		call savescr
1089  8888 21 0A 0A     		ld hl,10 * 256 + 10
1090  888B 01 05 3C     		ld bc,60 * 256 + 5
1091  888E 3E 10        		ld a,16
1092  8890 CD 41 98     		call window
1093  8893
1094  8893 21 0B 0B     		ld hl,11*256+11
1095  8896 3E 10        		ld a,16
1096  8898 11 01 88     		ld de,onecopytxt
1097  889B CD 21 98     		call print
1098  889E
1099  889E 21 17 80     		ld hl,POSKURZL
1100  88A1 CD 3D 94     		call ROZHOD
1101  88A4 7E           		ld a,(hl)
1102  88A5 6F           		ld l,a
1103  88A6 26 00        		ld h,0
1104  88A8
1105  88A8 E5           		push hl
1106  88A9 21 1D 80     		ld hl,STARTWINL
1107  88AC CD 45 94     		call ROZHOD2
1108  88AF 7E           		ld a,(hl)
1109  88B0 23           		inc hl
1110  88B1 66           		ld h,(hl)
1111  88B2 6F           		ld l,a
1112  88B3
1113  88B3 EB           		ex de,hl
1114  88B4 E1           		pop hl
1115  88B5 19           		add hl,de
1116  88B6 E5           		push hl
1117  88B7 23           		inc hl
1118  88B8 CD 65 95     		call find83
1119  88BB E1           		pop hl
1120  88BC CD C1 9A     		call FINDLFN
1121  88BF
1122  88BF
1123  88BF
1124  88BF
1125  88BF 21 61 9B     		ld hl,LFNNAME
1126  88C2 11 49 88     		ld de,bfname
1127  88C5 01 2D 00     		ld bc,45
1128  88C8 ED B0        		ldir
1129  88CA
1130  88CA 21 0B 16     		ld hl,22*256+11
1131  88CD 3E 10        		ld a,16
1132  88CF 11 49 88     		ld de,bfname
1133  88D2 CD 21 98     		call print
1134  88D5
1135  88D5 21 0E 3C     		ld hl,60*256+14
1136  88D8 3E 30        		ld a,48
1137  88DA 11 1B 88     		ld de,yestxt
1138  88DD CD 21 98     		call print
1139  88E0
1140  88E0
1141  88E0
1142  88E0
1143  88E0 21 0F 3C     		ld hl,60*256+15
1144  88E3 3E 10        		ld a,16
1145  88E5 11 27 88     		ld de,notxt
1146  88E8 CD 21 98     		call print
1147  88EB              copywait
1148  88EB CD 8F 95     		call INKEY
1149  88EE FE 01        		cp 1
1150  88F0 CA A8 89     		jp z,copyend
1151  88F3 FE 0D        		cp 13
1152  88F5 28 02        		jr z,copycont
1153  88F7 18 F2        		jr copywait
1154  88F9
1155  88F9              copycont
1156  88F9
1157  88F9 21 16 49     		ld   hl,$4000+160*14+23 + 1 + 62
1158  88FC 36 7C        		ld (hl),"|"
1159  88FE
1160  88FE 21 0E 3C     		ld hl,60*256+14
1161  8901 3E 10        		ld a,16
1162  8903 11 3D 88     		ld de,pleasewait
1163  8906 CD 21 98     		call print
1164  8909
1165  8909
1166  8909 21 0F 3C     		ld hl,60*256+15
1167  890C 3E 10        		ld a,16
1168  890E 11 32 88     		ld de,spaces
1169  8911 CD 21 98     		call print
1170  8914 21 17 80     		ld hl,POSKURZL
1171  8917 CD 3D 94     		call ROZHOD
1172  891A 7E           		ld a,(hl)
1173  891B 6F           		ld l,a
1174  891C 26 00        		ld h,0
1175  891E
1176  891E E5           		push hl
1177  891F 21 1D 80     		ld hl,STARTWINL
1178  8922 CD 45 94     		call ROZHOD2
1179  8925 7E           		ld a,(hl)
1180  8926 23           		inc hl
1181  8927 66           		ld h,(hl)
1182  8928 6F           		ld l,a
1183  8929
1184  8929 EB           		ex de,hl
1185  892A E1           		pop hl
1186  892B 19           		add hl,de
1187  892C
1188  892C CD 92 8C     		call openfile
1189  892F CD F6 8B     		call createfile
1190  8932 CD 46 8C     		call readfile
1191  8935 06 00        		ld b,0
1192  8937 CD 3A 8C     		call closefile
1193  893A 06 02        		ld b,2
1194  893C CD 3A 8C     		call closefile
1195  893F
1196  893F
1197  893F 3A 12 80     		ld a,(OKNO)
1198  8942 EE 10        		xor 16
1199  8944 32 12 80     		ld (OKNO),a
1200  8947
1201  8947 21 00 00     		ld hl,0
1202  894A 21 5B 9B     		ld hl,ALLFILES
1203  894D CD 45 94     		call ROZHOD2
1204  8950 AF           		xor a
1205  8951 77           		ld (hl),a
1206  8952 23           		inc hl
1207  8953 77           		ld (hl),a
1208  8954 21 17 80     		ld hl,POSKURZL
1209  8957 CD 3D 94     		call ROZHOD
1210  895A AF           		xor a
1211  895B 77           		ld (hl),a
1212  895C
1213  895C CD E2 99     		call dospage
1214  895F 21 21 80     		ld hl,pathl
1215  8962 CD 45 94     		call ROZHOD2
1216  8965 7E           		ld a,(hl)
1217  8966 23           		inc hl
1218  8967 66           		ld h,(hl)
1219  8968 6F           		ld l,a
1220  8969
1221  8969 AF           		xor a
1222  896A CD B1 01     		call $01b1
1223  896D CD F2 99     		call basicpage
1224  8970
1225  8970 CD E2 98     		call reload_dir
1226  8973 CD 84 92     		call loadscr
1227  8976 21 43 92     		ld hl,adrl
1228  8979 CD 45 94     		call ROZHOD2
1229  897C 7E           		ld a,(hl)
1230  897D 23           		inc hl
1231  897E 66           		ld h,(hl)
1232  897F 6F           		ld l,a
1233  8980 22 D0 94     		ld (adrs+1),hl
1234  8983 CD FF 91     		call getroot_reload
1235  8986 CD 75 94     		call showwin
1236  8989
1237  8989 3A 12 80     		ld a,(OKNO)
1238  898C EE 10        		xor 16
1239  898E 32 12 80     		ld (OKNO),a
1240  8991
1241  8991 CD E2 99     		call dospage
1242  8994 21 21 80     		ld hl,pathl
1243  8997 CD 45 94     		call ROZHOD2
1244  899A 7E           		ld a,(hl)
1245  899B 23           		inc hl
1246  899C 66           		ld h,(hl)
1247  899D 6F           		ld l,a
1248  899E AF           		xor a
1249  899F CD B1 01     		call $01b1
1250  89A2 CD F2 99     		call basicpage
1251  89A5
1252  89A5 C3 84 83     		jp loop0
1253  89A8
1254  89A8              copyend
1255  89A8 21 FF 83     			ld hl,numsel
1256  89AB CD 45 94     			call ROZHOD2
1257  89AE AF           			xor a
1258  89AF 77           			ld (hl),a
1259  89B0 23           			inc hl
1260  89B1 77           			ld (hl),a
1261  89B2
1262  89B2 CD 84 92     		call loadscr
1263  89B5 C3 84 83     		jp loop0
1264  89B8
1265  89B8 43 6F 70 79  morecopytxt	defb "Copy     files?",0
1265  89BC 20 20 20 20
1265  89C0 20 66 69 6C
1265  89C4 65 73 3F 00
1266  89C8 44 65 6C 65  moredeletetxt	defb "Delete     files?",0
1266  89CC 74 65 20 20
1266  89D0 20 20 20 66
1266  89D4 69 6C 65 73
1266  89D8 3F 00
1267  89DA
1268  89DA 43 6F 70 79  nowcopy	defb "Copy     file from     files",0
1268  89DE 20 20 20 20
1268  89E2 20 66 69 6C
1268  89E6 65 20 66 72
1268  89EA 6F 6D 20 20
1268  89EE 20 20 20 66
1268  89F2 69 6C 65 73
1268  89F6 00
1269  89F7 00 00        actcount defw 0
1270  89F9              morecopy
1271  89F9 21 00 00     		ld hl,0
1272  89FC 22 F7 89     		ld (actcount),hl
1273  89FF CD 70 92     		call savescr
1274  8A02
1275  8A02 21 0A 0A     		ld hl,10 * 256 + 10
1276  8A05 01 05 3C     		ld bc,60 * 256 + 5
1277  8A08 3E 10        		ld a,16
1278  8A0A CD 41 98     		call window
1279  8A0D
1280  8A0D 21 0B 0B     		ld hl,11*256+11
1281  8A10 3E 10        		ld a,16
1282  8A12 11 B8 89     		ld de,morecopytxt
1283  8A15 CD 21 98     		call print
1284  8A18
1285  8A18
1286  8A18 21 FF 83     		ld hl,numsel
1287  8A1B CD 45 94     		call ROZHOD2
1288  8A1E
1289  8A1E 7E           		ld a,(hl)
1290  8A1F 23           		inc hl
1291  8A20 66           		ld h,(hl)
1292  8A21 6F           		ld l,a
1293  8A22 E5           		push hl
1294  8A23
1295  8A23 EB           		ex de,hl
1296  8A24
1297  8A24 CD 79 84     		call PROVYP
1298  8A27 87           		add a,a
1299  8A28 22 47 8B     		ld   (CPPX1+1),hl
1300  8A2B 32 4F 8B             ld   (CPPX3+1),a
1301  8A2E 21 00 00             ld   hl,0
1302  8A31 22 75 84             ld   (PROGPROM),hl
1303  8A34
1304  8A34 21 AB 91     		ld hl,NUMBUF
1305  8A37 11 AC 91     		ld de,NUMBUF+1
1306  8A3A 01 05 00     		ld bc,5
1307  8A3D 3E 20        		ld a,32
1308  8A3F 77           		ld (hl),a
1309  8A40 ED B0        		ldir
1310  8A42 21 AB 91     		ld hl,NUMBUF
1311  8A45 AF           		xor a
1312  8A46 32 AE 91     		ld (NUMBUF+3),a
1313  8A49 22 F6 91     		ld (numadr+1),hl
1314  8A4C E1           		pop hl
1315  8A4D CD D6 91     		call DECIMAL3
1316  8A50 21 0B 10     		ld hl,16*256+11
1317  8A53 3E 10        		ld a,16
1318  8A55 11 AB 91     		ld de,NUMBUF
1319  8A58 CD 21 98     		call print
1320  8A5B
1321  8A5B
1322  8A5B              ;*****seem
1323  8A5B 21 0E 3C     		ld hl,60*256+14
1324  8A5E 3E 30        		ld a,48
1325  8A60 11 1B 88     		ld de,yestxt
1326  8A63 CD 21 98     		call print
1327  8A66
1328  8A66
1329  8A66 21 0F 3C     		ld hl,60*256+15
1330  8A69 3E 10        		ld a,16
1331  8A6B 11 27 88     		ld de,notxt
1332  8A6E CD 21 98     		call print
1333  8A71              acopywait
1334  8A71 CD 8F 95     		call INKEY
1335  8A74 FE 01        		cp 1
1336  8A76 CA A8 89     		jp z,copyend
1337  8A79 FE 0D        		cp 13
1338  8A7B 28 02        		jr z,acopycont
1339  8A7D 18 F2        		jr acopywait
1340  8A7F
1341  8A7F              acopycont
1342  8A7F
1343  8A7F 21 0E 3C     		ld hl,60*256+14
1344  8A82 3E 10        		ld a,16
1345  8A84 11 3D 88     		ld de,pleasewait
1346  8A87 CD 21 98     		call print
1347  8A8A
1348  8A8A
1349  8A8A 21 0F 3C     		ld hl,60*256+15
1350  8A8D 3E 10        		ld a,16
1351  8A8F 11 32 88     		ld de,spaces
1352  8A92 CD 21 98     		call print
1353  8A95
1354  8A95 21 76 48     		ld   hl,$4000+160*13+23 + 1 + 62
1355  8A98 36 7C        		ld (hl),"|"
1356  8A9A 21 16 49     		ld   hl,$4000+160*14+23 + 1 + 62
1357  8A9D 36 7C        		ld (hl),"|"
1358  8A9F
1359  8A9F 21 00 00     		ld hl,0
1360  8AA2
1361  8AA2
1362  8AA2
1363  8AA2
1364  8AA2 E5           moredalsi push hl
1365  8AA3
1366  8AA3 CD 65 95     		call find83
1367  8AA6 CD 36 9B     		call BUFF83
1368  8AA9 2A 80 95     		ld hl,(foundfile)
1369  8AAC CB 7E        		bit 7,(hl)
1370  8AAE CA 56 8B     		jp z,nekopirovat
1371  8AB1 E5           		push hl
1372  8AB2
1373  8AB2 21 0B 0B     		ld hl,11*256+11
1374  8AB5 3E 10        		ld a,16
1375  8AB7 11 DA 89     		ld de,nowcopy
1376  8ABA CD 21 98     		call print
1377  8ABD
1378  8ABD 2A F7 89     		ld hl,(actcount)
1379  8AC0 23           		inc hl
1380  8AC1 22 F7 89     		ld 	(actcount),hl
1381  8AC4 E5           		push hl
1382  8AC5 21 AB 91     		ld hl,NUMBUF
1383  8AC8 11 AC 91     		ld de,NUMBUF+1
1384  8ACB 01 05 00     		ld bc,5
1385  8ACE 3E 20        		ld a,32
1386  8AD0 77           		ld (hl),a
1387  8AD1 ED B0        		ldir
1388  8AD3 21 AB 91     		ld hl,NUMBUF
1389  8AD6 AF           		xor a
1390  8AD7 32 AE 91     		ld (NUMBUF+3),a
1391  8ADA 22 F6 91     		ld (numadr+1),hl
1392  8ADD E1           		pop hl
1393  8ADE CD D6 91     		call DECIMAL3
1394  8AE1 21 0B 10     		ld hl,16*256+11
1395  8AE4 3E 10        		ld a,16
1396  8AE6 11 AB 91     		ld de,NUMBUF
1397  8AE9 CD 21 98     		call print
1398  8AEC
1399  8AEC
1400  8AEC
1401  8AEC 21 FF 83     		ld hl,numsel
1402  8AEF CD 45 94     		call ROZHOD2
1403  8AF2
1404  8AF2 7E           		ld a,(hl)
1405  8AF3 23           		inc hl
1406  8AF4 66           		ld h,(hl)
1407  8AF5 6F           		ld l,a
1408  8AF6 E5           		push hl
1409  8AF7 21 AB 91     		ld hl,NUMBUF
1410  8AFA 11 AC 91     		ld de,NUMBUF+1
1411  8AFD 01 05 00     		ld bc,5
1412  8B00 3E 20        		ld a,32
1413  8B02 77           		ld (hl),a
1414  8B03 ED B0        		ldir
1415  8B05 21 AB 91     		ld hl,NUMBUF
1416  8B08 AF           		xor a
1417  8B09 32 AE 91     		ld (NUMBUF+3),a
1418  8B0C 22 F6 91     		ld (numadr+1),hl
1419  8B0F E1           		pop hl
1420  8B10 CD D6 91     		call DECIMAL3
1421  8B13 21 0B 1E     		ld hl,30*256+11
1422  8B16 3E 10        		ld a,16
1423  8B18 11 AB 91     		ld de,NUMBUF
1424  8B1B CD 21 98     		call print
1425  8B1E
1426  8B1E E1           		pop hl
1427  8B1F CB BE        		res 7,(hl)			;zrus oznaceni
1428  8B21 11 07 00     		ld de,7
1429  8B24 19           		add hl,de
1430  8B25 CB 7E        		bit 7,(hl)
1431  8B27 20 16        		jr nz,NODIR		;preskoč adresar
1432  8B29 E1           		pop hl
1433  8B2A E5           		push hl
1434  8B2B 2B           		dec hl
1435  8B2C CD 92 8C     		call openfile
1436  8B2F CD F6 8B     		call createfile
1437  8B32 CD 46 8C     		call readfile
1438  8B35 06 00        		ld b,0
1439  8B37 CD 3A 8C     		call closefile
1440  8B3A 06 02        		ld b,2
1441  8B3C CD 3A 8C     		call closefile
1442  8B3F 2A 75 84     NODIR   ld   hl,(PROGPROM)
1443  8B42 23                   inc  hl
1444  8B43 22 75 84             ld   (PROGPROM),hl
1445  8B46 11 00 00     CPPX1    ld   de,0
1446  8B49 B7                    or   a
1447  8B4A ED 52                 sbc  hl,de
1448  8B4C 38 08                 jr   c,CPPNE1
1449  8B4E 06 01        CPPX3    ld   b,1
1450  8B50 22 75 84              ld   (PROGPROM),hl
1451  8B53 CD B3 84              call PROGRES
1452  8B56              CPPNE1
1453  8B56
1454  8B56              nekopirovat
1455  8B56 21 5B 9B     		ld hl,ALLFILES
1456  8B59 CD 45 94     		call ROZHOD2
1457  8B5C 7E           		ld a,(hl)
1458  8B5D 23           		inc hl
1459  8B5E 56           		ld d,(hl)
1460  8B5F 5F           		ld e,a
1461  8B60 E1           		pop hl
1462  8B61 B7           		or a
1463  8B62 ED 52        		sbc hl,de
1464  8B64 19           		add hl,de
1465  8B65 28 04        		jr z,morekonec
1466  8B67 23           		inc hl
1467  8B68 C3 A2 8A     		jp moredalsi
1468  8B6B              morekonec
1469  8B6B 3A 12 80     		ld a,(OKNO)
1470  8B6E EE 10        		xor 16
1471  8B70 32 12 80     		ld (OKNO),a
1472  8B73
1473  8B73 21 00 00     		ld hl,0
1474  8B76 21 5B 9B     		ld hl,ALLFILES
1475  8B79 CD 45 94     		call ROZHOD2
1476  8B7C AF           		xor a
1477  8B7D 77           		ld (hl),a
1478  8B7E 23           		inc hl
1479  8B7F 77           		ld (hl),a
1480  8B80 21 17 80     		ld hl,POSKURZL
1481  8B83 CD 3D 94     		call ROZHOD
1482  8B86 AF           		xor a
1483  8B87 77           		ld (hl),a
1484  8B88
1485  8B88 CD E2 99     		call dospage
1486  8B8B 21 21 80     		ld hl,pathl
1487  8B8E CD 45 94     		call ROZHOD2
1488  8B91 7E           		ld a,(hl)
1489  8B92 23           		inc hl
1490  8B93 66           		ld h,(hl)
1491  8B94 6F           		ld l,a
1492  8B95
1493  8B95 AF           		xor a
1494  8B96 CD B1 01     		call $01b1
1495  8B99 CD F2 99     		call basicpage
1496  8B9C
1497  8B9C CD E2 98     		call reload_dir
1498  8B9F CD 84 92     		call loadscr
1499  8BA2 21 43 92     		ld hl,adrl
1500  8BA5 CD 45 94     		call ROZHOD2
1501  8BA8 7E           		ld a,(hl)
1502  8BA9 23           		inc hl
1503  8BAA 66           		ld h,(hl)
1504  8BAB 6F           		ld l,a
1505  8BAC 22 D0 94     		ld (adrs+1),hl
1506  8BAF CD FF 91     		call getroot_reload
1507  8BB2 CD 75 94     		call showwin
1508  8BB5
1509  8BB5 3A 12 80     		ld a,(OKNO)
1510  8BB8 EE 10        		xor 16
1511  8BBA 32 12 80     		ld (OKNO),a
1512  8BBD
1513  8BBD
1514  8BBD 21 43 92     		ld hl,adrl
1515  8BC0 CD 45 94     		call ROZHOD2
1516  8BC3 7E           		ld a,(hl)
1517  8BC4 23           		inc hl
1518  8BC5 66           		ld h,(hl)
1519  8BC6 6F           		ld l,a
1520  8BC7 22 D0 94     		ld (adrs+1),hl
1521  8BCA CD FF 91     		call getroot_reload
1522  8BCD CD 75 94     		call showwin
1523  8BD0 3E 20        		ld a,32
1524  8BD2 CD 16 94     		call writecur
1525  8BD5
1526  8BD5 CD E2 99     		call dospage
1527  8BD8 21 21 80     		ld hl,pathl
1528  8BDB CD 45 94     		call ROZHOD2
1529  8BDE 7E           		ld a,(hl)
1530  8BDF 23           		inc hl
1531  8BE0 66           		ld h,(hl)
1532  8BE1 6F           		ld l,a
1533  8BE2 AF           		xor a
1534  8BE3 CD B1 01     		call $01b1
1535  8BE6 CD F2 99     		call basicpage
1536  8BE9
1537  8BE9
1538  8BE9
1539  8BE9 21 FF 83     		ld hl,numsel
1540  8BEC CD 45 94     		call ROZHOD2
1541  8BEF AF           		xor a
1542  8BF0 77           		ld (hl),a
1543  8BF1 23           		inc hl
1544  8BF2 77           		ld (hl),a
1545  8BF3
1546  8BF3
1547  8BF3
1548  8BF3
1549  8BF3
1550  8BF3
1551  8BF3 C3 84 83     		jp loop0
1552  8BF6
1553  8BF6              createfile
1554  8BF6
1555  8BF6 3A 12 80     		ld a,(OKNO)
1556  8BF9 EE 10        		xor 16
1557  8BFB 32 12 80     		ld (OKNO),a
1558  8BFE
1559  8BFE
1560  8BFE CD E2 99     		call dospage
1561  8C01
1562  8C01 21 21 80     		ld hl,pathl
1563  8C04 CD 45 94     		call ROZHOD2
1564  8C07 7E           		ld a,(hl)
1565  8C08 23           		inc hl
1566  8C09 66           		ld h,(hl)
1567  8C0A 6F           		ld l,a
1568  8C0B
1569  8C0B AF           		xor a
1570  8C0C CD B1 01     		call $01b1
1571  8C0F
1572  8C0F 06 02        		ld b,2 				;soubor číslo 1
1573  8C11 0E 02        		ld c,2				;exclusive WRITE
1574  8C13 16 02        		ld d,2
1575  8C15 1E 04        		ld e,4
1576  8C17 21 61 9B     		ld hl,LFNNAME
1577  8C1A
1578  8C1A CD 06 01     		call 0106h			;create file
1579  8C1D
1580  8C1D
1581  8C1D
1582  8C1D 3A 12 80     		ld a,(OKNO)
1583  8C20 EE 10        		xor 16
1584  8C22 32 12 80     		ld (OKNO),a
1585  8C25 CD E2 99     		call dospage
1586  8C28
1587  8C28 21 21 80     		ld hl,pathl
1588  8C2B CD 45 94     		call ROZHOD2
1589  8C2E 7E           		ld a,(hl)
1590  8C2F 23           		inc hl
1591  8C30 66           		ld h,(hl)
1592  8C31 6F           		ld l,a
1593  8C32
1594  8C32 AF           		xor a
1595  8C33 CD B1 01     		call $01b1
1596  8C36 CD F2 99     		call basicpage
1597  8C39 C9           		ret
1598  8C3A
1599  8C3A              closefile
1600  8C3A C5           		push bc
1601  8C3B CD E2 99     		call dospage
1602  8C3E C1           		pop bc
1603  8C3F CD 09 01     		call 0109h
1604  8C42 CD F2 99     		call basicpage
1605  8C45 C9           		ret
1606  8C46
1607  8C46              readfile
1608  8C46              READ
1609  8C46 CD E2 99     		call dospage
1610  8C49 CD 47 9B     		call NOBUFF83
1611  8C4C              read0
1612  8C4C
1613  8C4C
1614  8C4C 2A 77 84     		 ld   hl,(PROGPROM2)
1615  8C4F 23                    inc  hl
1616  8C50 22 77 84              ld   (PROGPROM2),hl
1617  8C53 11 00 00     CPPX2    ld   de,0
1618  8C56 B7                    or   a
1619  8C57 ED 52                 sbc  hl,de
1620  8C59 38 08                 jr   c,CPPNE2
1621  8C5B 06 01        CPPX4    ld   b,1
1622  8C5D 22 77 84              ld   (PROGPROM2),hl
1623  8C60 CD C3 84              call PROGRES2
1624  8C63              CPPNE2
1625  8C63
1626  8C63
1627  8C63 06 00        		ld b,0
1628  8C65 0E 03        		ld c,3
1629  8C67 11 00 18     		ld de,blocklenght				;počet bytu
1630  8C6A 21 4B 9F     		ld hl,FILEBUFF
1631  8C6D CD 12 01     		call 0112h
1632  8C70 30 0F        		jr nc, konec
1633  8C72
1634  8C72 0E 03        		ld c,3
1635  8C74 06 02        		ld b,2
1636  8C76 11 00 18     		ld de,blocklenght
1637  8C79 21 4B 9F     		ld hl,FILEBUFF
1638  8C7C CD 15 01     		call 115h
1639  8C7F
1640  8C7F
1641  8C7F 18 CB        		jr read0
1642  8C81              konec
1643  8C81
1644  8C81 0E 03        		ld c,3
1645  8C83 06 02        		ld b,2
1646  8C85 11 00 18     		ld de,blocklenght
1647  8C88 21 4B 9F     		ld hl,FILEBUFF
1648  8C8B CD 15 01     		call 115h
1649  8C8E
1650  8C8E CD F2 99     		call basicpage
1651  8C91 C9           		ret
1652  8C92
1653  8C92
1654  8C92
1655  8C92              openfile
1656  8C92
1657  8C92 E5           		push hl
1658  8C93
1659  8C93 23           		inc hl
1660  8C94
1661  8C94 CD 36 9B     		call BUFF83
1662  8C97 CD 65 95     		call find83
1663  8C9A E1           		pop hl
1664  8C9B E5           		push hl
1665  8C9C CD C1 9A     		call FINDLFN
1666  8C9F
1667  8C9F 21 61 9B     		ld hl,LFNNAME
1668  8CA2 11 49 88     		ld de,bfname
1669  8CA5 01 2D 00     		ld bc,45
1670  8CA8 ED B0        		ldir
1671  8CAA
1672  8CAA 21 0F 0B     		ld hl,11*256+15
1673  8CAD 3E 10        		ld a,16
1674  8CAF 11 49 88     		ld de,bfname
1675  8CB2 CD 21 98     		call print
1676  8CB5
1677  8CB5
1678  8CB5 CD 36 9B     		call BUFF83
1679  8CB8 2A 8D 95     		ld hl,(TMP83+11)
1680  8CBB              ZDE
1681  8CBB 0E 06        		ld c,6
1682  8CBD CD B2 9A     		call deleno
1683  8CC0
1684  8CC0 23           		inc hl
1685  8CC1              of0
1686  8CC1 EB           		ex de,hl
1687  8CC2 CD 79 84     		call PROVYP
1688  8CC5 87           		add a,a
1689  8CC6 22 54 8C     		ld   (CPPX2+1),hl
1690  8CC9 32 5C 8C             ld   (CPPX4+1),a
1691  8CCC 21 00 00             ld   hl,0
1692  8CCF 22 77 84             ld   (PROGPROM2),hl
1693  8CD2 21 D7 48     		ld   hl,$4000+160*14+23
1694  8CD5 22 C5 84     		ld (PROGS2+1),hl
1695  8CD8 CD D3 84     		call clearpr
1696  8CDB
1697  8CDB
1698  8CDB E1           		pop hl
1699  8CDC              LF
1700  8CDC CD C1 9A     		call FINDLFN
1701  8CDF              						;na adrese TMP83 je adresa
1702  8CDF 21 60 9C     		ld hl,LFNNAME+255
1703  8CE2 36 FF        		ld (hl),255
1704  8CE4 06 0B        		ld b,11
1705  8CE6 21 82 95     		ld hl,TMP83
1706  8CE9              CCCA							;vynuluj všechny stavové bity v názvu (7.)
1707  8CE9 CB BE        		res 7,(hl)
1708  8CEB 23           		inc hl
1709  8CEC 10 FB        		djnz CCCA
1710  8CEE 21 8C 95     		ld hl,TMP83+10		;najdi poslední znak názvu souboru/adresare
1711  8CF1 7E           achng2	ld a,(hl)
1712  8CF2 FE 20        		cp 32
1713  8CF4 20 03        		jr nz,azap
1714  8CF6 2B           		dec hl
1715  8CF7 18 F8        		jr achng2
1716  8CF9 3E FF        azap		ld a,255
1717  8CFB 23           		inc hl
1718  8CFC 77           		ld (hl),a
1719  8CFD
1720  8CFD 21 5F 9C     		ld hl,LFNNAME+254		;najdi poslední znak LFN souboru/adresare
1721  8D00 7E           achnga2	ld a,(hl)
1722  8D01 FE 20        		cp 32
1723  8D03 20 03        		jr nz,azapa
1724  8D05 2B           		dec hl
1725  8D06 18 F8        		jr achnga2
1726  8D08 3E FF        azapa	ld a,255
1727  8D0A 23           		inc hl
1728  8D0B 77           		ld (hl),a
1729  8D0C
1730  8D0C
1731  8D0C
1732  8D0C CD E2 99     		call dospage
1733  8D0F 06 00        		ld b,0 				;soubor číslo 0
1734  8D11 0E 01        		ld c,1				;exclusive READ
1735  8D13 1E 02        		ld e,2
1736  8D15 21 82 95     		ld hl,TMP83
1737  8D18
1738  8D18
1739  8D18 CD 06 01     		call 0106h			;open file
1740  8D1B
1741  8D1B CD F2 99     		call basicpage
1742  8D1E C9           		ret
1743  8D1F
1744  8D1F
1745  8D1F              gettime
1746  8D1F CD E2 99     		call dospage
1747  8D22
1748  8D22 CD CC 01     		call $01cc		;načti čas a datum  DE = time, BC DATE
1749  8D25 ED 53 46 8D  		ld (dostime),de
1750  8D29 30 15        		jr nc,timeend
1751  8D2B
1752  8D2B 7A           		ld a,d
1753  8D2C E6 1F        		and 00011111b
1754  8D2E 32 44 8D     		ld (hodiny),a
1755  8D31 7A           		ld a,d
1756  8D32
1757  8D32 1F           		rra
1758  8D33 1F           		rra
1759  8D34 1F           		rra
1760  8D35 1F           		rra
1761  8D36 1F           		rra
1762  8D37 47           		ld b,a
1763  8D38 7B           		ld a,e
1764  8D39 17           		rla
1765  8D3A 17           		rla
1766  8D3B 17           		rla
1767  8D3C B0           		or b
1768  8D3D 32 45 8D     		ld (minuty),a
1769  8D40              timeend
1770  8D40 CD F2 99     		call basicpage
1771  8D43 C9           		ret
1772  8D44
1773  8D44 00           hodiny	defb 0
1774  8D45 00           minuty	defb 0
1775  8D46 00 00        dostime	defw 0
1776  8D48              menu
1777  8D48 21 AD 8E     		ld hl,text
1778  8D4B 11 00 40     		ld de,#4000
1779  8D4E 01 50 00     		ld bc,80
1780  8D51              menu000
1781  8D51 7E           		ld a,(hl)
1782  8D52 12           		ld (de),a
1783  8D53 13           		inc de
1784  8D54 3E 10        		ld a,16
1785  8D56 12           		ld (de),a
1786  8D57 13           		inc de
1787  8D58 23           		inc hl
1788  8D59 0B           		dec bc
1789  8D5A 79           		ld a,c
1790  8D5B B0           		or b
1791  8D5C 20 F3        		jr nz,menu000
1792  8D5E
1793  8D5E CD 70 92     		call savescr
1794  8D61
1795  8D61 CD 16 8E     		call show_menu
1796  8D64              menu01
1797  8D64
1798  8D64 CD 8F 95     		call INKEY
1799  8D67
1800  8D67 FE 01        		cp 1
1801  8D69 CA 7F 8D     		jp z,menu_exit
1802  8D6C
1803  8D6C FE 0A        		cp 10
1804  8D6E 28 68        		jr z,menudown
1805  8D70 FE 0B        		cp 11
1806  8D72 CA F8 8D     		jp z,menuup
1807  8D75 FE 09        		cp 9
1808  8D77 28 22        		jr z,menu_right
1809  8D79 FE 08        		cp 8
1810  8D7B 28 3D        		jr z,menu_left
1811  8D7D 18 E5        		jr menu01
1812  8D7F
1813  8D7F              menu_exit
1814  8D7F CD 84 92     		call loadscr
1815  8D82
1816  8D82 21 0A 8F     		ld hl,nadpis
1817  8D85 11 00 40     		ld de,#4000
1818  8D88 01 50 00     		ld bc,80
1819  8D8B              menu001
1820  8D8B 7E           		ld a,(hl)
1821  8D8C 12           		ld (de),a
1822  8D8D 13           		inc de
1823  8D8E 3E 50        		ld a,80
1824  8D90 12           		ld (de),a
1825  8D91 13           		inc de
1826  8D92 23           		inc hl
1827  8D93 0B           		dec bc
1828  8D94 79           		ld a,c
1829  8D95 B0           		or b
1830  8D96 20 F3        		jr nz,menu001
1831  8D98
1832  8D98 C3 84 83     		jp loop0
1833  8D9B
1834  8D9B              menu_right
1835  8D9B 3A 6C 8F     		ld a,(nummenu)
1836  8D9E FE 04        		cp 4
1837  8DA0 CA 64 8D     		jp z,menu01
1838  8DA3
1839  8DA3 3C           		inc a
1840  8DA4 32 6C 8F     		ld (nummenu),a
1841  8DA7 CD 84 92     		call loadscr
1842  8DAA 3E 01        		ld a,1
1843  8DAC 32 9A 8E     		ld (curmeny+1),a
1844  8DAF
1845  8DAF CD 16 8E     		call show_menu
1846  8DB2 3E 40        		ld a,64
1847  8DB4 CD 93 8E     		call writecurmenu
1848  8DB7 C3 64 8D     		jp menu01
1849  8DBA
1850  8DBA              menu_left
1851  8DBA 3A 6C 8F     		ld a,(nummenu)
1852  8DBD B7           		or a
1853  8DBE CA 64 8D     		jp z,menu01
1854  8DC1
1855  8DC1 3D           		dec a
1856  8DC2 32 6C 8F     		ld (nummenu),a
1857  8DC5 CD 84 92     		call loadscr
1858  8DC8 3E 01        		ld a,1
1859  8DCA 32 9A 8E     		ld (curmeny+1),a
1860  8DCD
1861  8DCD CD 16 8E     		call show_menu
1862  8DD0 3E 40        		ld a,64
1863  8DD2 CD 93 8E     		call writecurmenu
1864  8DD5 C3 64 8D     		jp menu01
1865  8DD8
1866  8DD8
1867  8DD8              menudown
1868  8DD8 21 9A 8E     		ld hl,curmeny+1
1869  8DDB 7E           		ld a,(hl)
1870  8DDC 21 76 8E     		ld hl,pocet_radku+1
1871  8DDF BE           		cp (hl)
1872  8DE0 CA 64 8D     		jp z,menu01
1873  8DE3
1874  8DE3
1875  8DE3 3E 30        		ld a,48
1876  8DE5 CD 93 8E     		call writecurmenu
1877  8DE8 21 9A 8E     		ld hl,curmeny+1
1878  8DEB 7E           		ld a,(hl)
1879  8DEC
1880  8DEC 3C           		inc a
1881  8DED 32 9A 8E     		ld (curmeny+1),a
1882  8DF0 3E 40        		ld a,64
1883  8DF2 CD 93 8E     		call writecurmenu
1884  8DF5 C3 64 8D     		jp menu01
1885  8DF8
1886  8DF8 21 9A 8E     menuup 	ld hl,curmeny+1
1887  8DFB 7E           		ld a,(hl)
1888  8DFC FE 01        		cp 1
1889  8DFE CA 64 8D     		jp z,menu01
1890  8E01
1891  8E01
1892  8E01 3E 30        		ld a,48
1893  8E03 CD 93 8E     		call writecurmenu
1894  8E06 21 9A 8E     		ld hl,curmeny+1
1895  8E09 7E           		ld a,(hl)
1896  8E0A
1897  8E0A 3D           		dec a
1898  8E0B 32 9A 8E     		ld (curmeny+1),a
1899  8E0E 3E 40        		ld a,64
1900  8E10 CD 93 8E     		call writecurmenu
1901  8E13 C3 64 8D     		jp menu01
1902  8E16
1903  8E16
1904  8E16              show_menu
1905  8E16              SAS
1906  8E16 3A 6C 8F     		ld a,(nummenu)				;zjisteni delky menu
1907  8E19 5F           		ld e,a
1908  8E1A 16 00        		ld d,0
1909  8E1C 21 77 8F     		ld hl,menulenght
1910  8E1F 19           		add hl,de
1911  8E20 7E           		ld a,(hl)
1912  8E21 32 76 8E     		ld (pocet_radku+1),a
1913  8E24
1914  8E24 21 67 8F     		ld hl,menupos				;zjisteni X souradnice
1915  8E27 19           		add hl,de
1916  8E28 7E           		ld a,(hl)
1917  8E29 B7           		or a
1918  8E2A 28 02        		jr z,sm1
1919  8E2C 3D           		dec a
1920  8E2D 3D           		dec a
1921  8E2E 32 46 8E     sm1		ld (menux+1),a
1922  8E31
1923  8E31 43           		ld b,e
1924  8E32 AF           		xor a
1925  8E33 C6 02        sm0		add a,2
1926  8E35 10 FC        		djnz sm0
1927  8E37
1928  8E37 5F           		ld e,a
1929  8E38 16 00        		ld d,0
1930  8E3A 21 6D 8F     		ld hl,menuitems
1931  8E3D 19           		add hl,de
1932  8E3E 7E           		ld a,(hl)
1933  8E3F 23           		inc hl
1934  8E40 66           		ld h,(hl)
1935  8E41 6F           		ld l,a
1936  8E42 22 67 8E     		ld (adresa_polozky+1),hl		;uloz definované menu
1937  8E45
1938  8E45 21 02 40     menux		ld hl,$4000+2
1939  8E48 22 97 8E     			ld (curmen+1),hl
1940  8E4B 23           			inc hl
1941  8E4C 3E 30        			ld a,48
1942  8E4E 77           			ld (hl),a
1943  8E4F
1944  8E4F 23           			inc hl
1944  8E50 23             inc hl
1945  8E51 77           			ld (hl),a
1946  8E52
1947  8E52 23           			inc hl
1947  8E53 23             inc hl
1948  8E54 77           			ld (hl),a
1949  8E55
1950  8E55 23           			inc hl
1950  8E56 23             inc hl
1951  8E57 77           			ld (hl),a
1952  8E58
1953  8E58 23           			inc hl
1953  8E59 23             inc hl
1954  8E5A 77           			ld (hl),a
1955  8E5B
1956  8E5B 23           			inc hl
1956  8E5C 23             inc hl
1957  8E5D 77           			ld (hl),a
1958  8E5E
1959  8E5E 23           			inc hl
1959  8E5F 23             inc hl
1960  8E60 77           			ld (hl),a
1961  8E61
1962  8E61
1963  8E61
1964  8E61 67           			ld h,a
1965  8E62 2E 01        			ld l,1
1966  8E64
1967  8E64 3E 10        		ld a,16
1968  8E66
1969  8E66 11 00 00     adresa_polozky	ld de,0
1970  8E69
1971  8E69
1972  8E69 3E 01        		ld a,1
1973  8E6B 32 78 8E     		ld (ymenu+1),a
1974  8E6E 3A 46 8E     		ld a,(menux+1)
1975  8E71 1F           		rra				;vydel dvema - atributy
1976  8E72 32 7A 8E     		ld (xmenu +1),a
1977  8E75 06 00        pocet_radku ld b,0
1978  8E77 2E 01        ymenu	ld l,1
1979  8E79 26 00        xmenu	ld h,0
1980  8E7B 3E 30        		ld a,48
1981  8E7D CD 21 98     		call print
1982  8E80 1A           		ld a,(de)
1983  8E81 FE FF        		cp 255
1984  8E83 C8           		ret z
1985  8E84 13           		inc de
1986  8E85 13           		inc de
1987  8E86 13           		inc de
1988  8E87 21 78 8E     		ld hl,ymenu+1
1989  8E8A 34           		inc (hl)
1990  8E8B 10 EA        		djnz ymenu
1991  8E8D
1992  8E8D 3E 40        		ld a,64
1993  8E8F CD 93 8E     		call writecurmenu
1994  8E92
1995  8E92 C9           		ret
1996  8E93              SASS
1997  8E93              writecurmenu
1998  8E93 32 A3 8E     			ld (curmencolor+1),a
1999  8E96
2000  8E96 21 00 00     curmen		ld hl,0
2001  8E99 06 01        curmeny		ld b,1
2002  8E9B 11 A0 00     			ld de,160
2003  8E9E              curmen1
2004  8E9E 19           			add hl,de
2005  8E9F 10 FD        			djnz curmen1
2006  8EA1
2007  8EA1 23           			inc hl
2008  8EA2 3E 10        curmencolor	ld a,16
2009  8EA4 77           			ld (hl),a
2010  8EA5 06 10        			ld b,16
2011  8EA7 23           curmen0		inc hl
2011  8EA8 23             inc hl
2012  8EA9 77           			ld (hl),a
2013  8EAA 10 FB        			djnz curmen0
2014  8EAC C9           			ret
2015  8EAD
2016  8EAD
2017  8EAD
2018  8EAD 20 4C 45 46  text 		defb " LEFT  | FILE  | UTILS | RIGHT | QUIT                                                       ",0
2018  8EB1 54 20 20 7C
2018  8EB5 20 46 49 4C
2018  8EB9 45 20 20 7C
2018  8EBD 20 55 54 49
2018  8EC1 4C 53 20 7C
2018  8EC5 20 52 49 47
2018  8EC9 48 54 20 7C
2018  8ECD 20 51 55 49
2018  8ED1 54 20 20 20
2018  8ED5 20 20 20 20
2018  8ED9 20 20 20 20
2018  8EDD 20 20 20 20
2018  8EE1 20 20 20 20
2018  8EE5 20 20 20 20
2018  8EE9 20 20 20 20
2018  8EED 20 20 20 20
2018  8EF1 20 20 20 20
2018  8EF5 20 20 20 20
2018  8EF9 20 20 20 20
2018  8EFD 20 20 20 20
2018  8F01 20 20 20 20
2018  8F05 20 20 20 20
2018  8F09 00
2019  8F0A 20 43 61 6C  nadpis 		defb " Calm Commander 0.1                                                                         ",0
2019  8F0E 6D 20 43 6F
2019  8F12 6D 6D 61 6E
2019  8F16 64 65 72 20
2019  8F1A 30 2E 31 20
2019  8F1E 20 20 20 20
2019  8F22 20 20 20 20
2019  8F26 20 20 20 20
2019  8F2A 20 20 20 20
2019  8F2E 20 20 20 20
2019  8F32 20 20 20 20
2019  8F36 20 20 20 20
2019  8F3A 20 20 20 20
2019  8F3E 20 20 20 20
2019  8F42 20 20 20 20
2019  8F46 20 20 20 20
2019  8F4A 20 20 20 20
2019  8F4E 20 20 20 20
2019  8F52 20 20 20 20
2019  8F56 20 20 20 20
2019  8F5A 20 20 20 20
2019  8F5E 20 20 20 20
2019  8F62 20 20 20 20
2019  8F66 00
2020  8F67 00 12 22 32  menupos		defb 0, 18, 34, 50,66
2020  8F6B 42
2021  8F6C
2022  8F6C 00           nummenu		defb 0				;jakou položku zobrazit v menu
2023  8F6D 7D 8F BA 8F  menuitems	defw menuleft, menufile, menuutil, menuright, menuquit
2023  8F71 48 90 1F 90
2023  8F75 85 90
2024  8F77 03 05 02 02  menulenght	defb 3, 5, 2, 2, 1	;počet položek v daném menu
2024  8F7B 01
2025  8F7C 00           menucur 	defb 0
2026  8F7D 20 52 45 4C  menuleft	defb " RELOAD DIR      ",0
2026  8F81 4F 41 44 20
2026  8F85 44 49 52 20
2026  8F89 20 20 20 20
2026  8F8D 20 00
2027  8F8F 00 00        			defw 0
2028  8F91 20 43 48 41  			defb " CHANGE DISC     ",0
2028  8F95 4E 47 45 20
2028  8F99 44 49 53 43
2028  8F9D 20 20 20 20
2028  8FA1 20 00
2029  8FA3 00 00        			defw 0
2030  8FA5 20 4D 45 4E  			defb " MENU ITEM       ",0
2030  8FA9 55 20 49 54
2030  8FAD 45 4D 20 20
2030  8FB1 20 20 20 20
2030  8FB5 20 00
2031  8FB7 00 00        			defw 0
2032  8FB9 FF           			defb 255
2033  8FBA 20 43 4F 50  menufile    defb " COPY            ",0
2033  8FBE 59 20 20 20
2033  8FC2 20 20 20 20
2033  8FC6 20 20 20 20
2033  8FCA 20 00
2034  8FCC 00 00        			defw 0
2035  8FCE 20 4D 4F 56  			defb " MOVE            ",0
2035  8FD2 45 20 20 20
2035  8FD6 20 20 20 20
2035  8FDA 20 20 20 20
2035  8FDE 20 00
2036  8FE0 00 00        			defw 0
2037  8FE2 20 4D 45 4E  			defb " MENU ITEM       ",0
2037  8FE6 55 20 49 54
2037  8FEA 45 4D 20 20
2037  8FEE 20 20 20 20
2037  8FF2 20 00
2038  8FF4 00 00        			defw 0
2039  8FF6 20 4D 45 4E  			defb " MENU ITEM 1     ",0
2039  8FFA 55 20 49 54
2039  8FFE 45 4D 20 31
2039  9002 20 20 20 20
2039  9006 20 00
2040  9008 00 00        			defw 0
2041  900A 20 4D 45 4E  			defb " MENU ITEM 2     ",0
2041  900E 55 20 49 54
2041  9012 45 4D 20 32
2041  9016 20 20 20 20
2041  901A 20 00
2042  901C 00 00        			defw 0
2043  901E FF           			defb 255
2044  901F
2045  901F 20 52 45 4C  menuright	defb " RELOAD DIR      ",0
2045  9023 4F 41 44 20
2045  9027 44 49 52 20
2045  902B 20 20 20 20
2045  902F 20 00
2046  9031 00 00        			defw 0
2047  9033 20 4D 45 4E  			defb " MENU ITEM       ",0
2047  9037 55 20 49 54
2047  903B 45 4D 20 20
2047  903F 20 20 20 20
2047  9043 20 00
2048  9045 00 00        			defw 0
2049  9047 FF           			defb 255
2050  9048 20 53 4F 52  menuutil 	defb " SORT DIRECTORY  ",0
2050  904C 54 20 44 49
2050  9050 52 45 43 54
2050  9054 4F 52 59 20
2050  9058 20 00
2051  905A 00 00        			defw 0
2052  905C 20 4D 45 4E  			defb " MENU ITEM 1     ",0
2052  9060 55 20 49 54
2052  9064 45 4D 20 31
2052  9068 20 20 20 20
2052  906C 20 00
2053  906E 00 00        			defw 0
2054  9070 20 4D 45 4E  			defb " MENU ITEM 2     ",0
2054  9074 55 20 49 54
2054  9078 45 4D 20 32
2054  907C 20 20 20 20
2054  9080 20 00
2055  9082 00 00        			defw 0
2056  9084 FF           			defb 255
2057  9085 20 51 55 49  menuquit	defb " QUIT CCommander ",0
2057  9089 54 20 43 43
2057  908D 6F 6D 6D 61
2057  9091 6E 64 65 72
2057  9095 20 00
2058  9097 00 00        			defw 0
2059  9099
2060  9099              enter
2061  9099 21 17 80     		ld hl,POSKURZL
2062  909C CD 3D 94     		call ROZHOD
2063  909F 7E           		ld a,(hl)
2064  90A0 6F           		ld l,a
2065  90A1 26 00        		ld h,0
2066  90A3
2067  90A3 E5           		push hl
2068  90A4 21 1D 80     		ld hl,STARTWINL
2069  90A7 CD 45 94     		call ROZHOD2
2070  90AA 7E           		ld a,(hl)
2071  90AB 23           		inc hl
2072  90AC 66           		ld h,(hl)
2073  90AD 6F           		ld l,a
2074  90AE
2075  90AE EB           		ex de,hl
2076  90AF E1           		pop hl
2077  90B0 19           		add hl,de
2078  90B1 23           		inc hl
2079  90B2 CD 36 9B     e2		call BUFF83
2080  90B5 CD 65 95     		call find83
2081  90B8 DD 21 82 95  		ld ix,TMP83
2082  90BC DD CB 07 7E  		bit 7,(ix+7)
2083  90C0 20 03        		jr nz,enter_directory
2084  90C2
2085  90C2 C3 84 83     		jp loop0
2086  90C5
2087  90C5              enter_directory
2088  90C5
2089  90C5
2090  90C5 06 0B        		ld b,11
2091  90C7 21 82 95     		ld hl,TMP83
2092  90CA              CCC							;vynuluj všechny stavové bity v názvu (7.)
2093  90CA CB BE        		res 7,(hl)
2094  90CC 23           		inc hl
2095  90CD 10 FB        		djnz CCC
2096  90CF 21 8C 95     		ld hl,TMP83+10		;najdi poslední znak názvu souboru/adresare
2097  90D2 7E           chng2	ld a,(hl)
2098  90D3 FE 20        		cp 32
2099  90D5 20 03        		jr nz,zap
2100  90D7 2B           		dec hl
2101  90D8 18 F8        		jr chng2
2102  90DA 3E FF        zap		ld a,255
2103  90DC 23           		inc hl
2104  90DD 77           		ld (hl),a
2105  90DE CD E2 99     		call dospage
2106  90E1 AF           		xor a 			;change path
2107  90E2 21 82 95     		ld hl,TMP83
2108  90E5              AAAA
2109  90E5 CD B1 01     		call $01b1		;změň adresář
2110  90E8
2111  90E8 CD F2 99     		call basicpage
2112  90EB 21 00 00     		ld hl,0
2113  90EE 21 5B 9B     		ld hl,ALLFILES
2114  90F1 CD 45 94     		call ROZHOD2
2115  90F4 AF           		xor a
2116  90F5 77           		ld (hl),a
2117  90F6 23           		inc hl
2118  90F7 77           		ld (hl),a
2119  90F8 21 17 80     		ld hl,POSKURZL
2120  90FB CD 3D 94     		call ROZHOD
2121  90FE AF           		xor a
2122  90FF 77           		ld (hl),a
2123  9100 CD E2 98     		call reload_dir
2124  9103
2125  9103 21 3F 92     		ld hl,pozicel
2126  9106 CD 45 94     		call ROZHOD2
2127  9109 7E           		ld a,(hl)
2128  910A 23           		inc hl
2129  910B 66           		ld h,(hl)
2130  910C 6F           		ld l,a
2131  910D
2132  910D 01 1B 26     		ld bc,38 * 256 + 27
2133  9110 3E 00        		ld a,0
2134  9112 CD 41 98     		call window
2135  9115
2136  9115 21 21 80     		ld hl,pathl
2137  9118 CD 45 94     		call ROZHOD2
2138  911B 7E           		ld a,(hl)
2139  911C 23           		inc hl
2140  911D 66           		ld h,(hl)
2141  911E 6F           		ld l,a
2142  911F 11 03 00     		ld de,3
2143  9122 19           		add hl,de
2144  9123 7E           		ld a,(hl)
2145  9124 FE FF        		cp 255
2146  9126 28 07        		jr z,root
2147  9128 3E 01        		ld a,1
2148  912A 32 41 91     		ld (star+1),a
2149  912D 18 04        		jr rcont
2150  912F AF           root	xor a
2151  9130 32 41 91     		ld (star+1),a
2152  9133 21 43 92     rcont	ld hl,adrl
2153  9136 CD 45 94     		call ROZHOD2
2154  9139 7E           		ld a,(hl)
2155  913A 23           		inc hl
2156  913B 66           		ld h,(hl)
2157  913C 6F           		ld l,a
2158  913D
2159  913D
2160  913D 22 D0 94     		ld (adrs+1),hl
2161  9140 21 01 00     star	ld hl,1
2162  9143 CD 75 94     		call showwin
2163  9146 3E 20        		ld a,32
2164  9148 CD 16 94     		call writecur
2165  914B
2166  914B 21 21 80     		ld hl,pathl
2167  914E CD 45 94     		call ROZHOD2
2168  9151 7E           		ld a,(hl)
2169  9152 23           		inc hl
2170  9153 66           		ld h,(hl)
2171  9154 6F           		ld l,a
2172  9155 11 03 00     		ld de,3
2173  9158 19           		add hl,de
2174  9159 7E           		ld a,(hl)
2175  915A FE FF        		cp 255
2176  915C 28 05        		jr z,snula
2177  915E 21 01 00     		ld hl,1
2178  9161 18 03        		jr scont
2179  9163 21 00 00     snula	ld hl,0
2180  9166              scont
2181  9166
2182  9166 21 19 80     		ld hl,ALLPOSL
2183  9169 CD 45 94     		call ROZHOD2
2184  916C 36 00        		ld (hl),0
2185  916E 21 1D 80     		ld hl,STARTWINL
2186  9171 CD 45 94     		call ROZHOD2
2187  9174 E5           		push hl
2188  9175 CD FF 91     		call getroot_reload
2189  9178 D1           		pop de
2190  9179 EB           		ex de,hl
2191  917A
2192  917A 73           		ld (hl),e
2193  917B 23           		inc hl
2194  917C 72           		ld (hl),d
2195  917D C3 84 83     		jp loop0
2196  9180
2197  9180
2198  9180              getroot
2199  9180 21 21 80     		ld hl,pathl
2200  9183 CD 45 94     		call ROZHOD2
2201  9186 7E           		ld a,(hl)
2202  9187 23           		inc hl
2203  9188 66           		ld h,(hl)
2204  9189 6F           		ld l,a
2205  918A 11 03 00     		ld de,3
2206  918D 19           		add hl,de
2207  918E 7E           		ld a,(hl)
2208  918F FE FF        		cp 255
2209  9191 28 0C        		jr z,mroot
2210  9193
2211  9193 21 1D 80     		ld hl,STARTWINL
2212  9196 CD 45 94     		call ROZHOD2
2213  9199 7E           		ld a,(hl)
2214  919A 23           		inc hl
2215  919B 66           		ld h,(hl)
2216  919C 6F           		ld l,a
2217  919D 18 0B        		jr mmm0
2218  919F              mroot
2219  919F 21 1D 80     		ld hl,STARTWINL
2220  91A2 CD 45 94     		call ROZHOD2
2221  91A5 7E           		ld a,(hl)
2222  91A6 23           		inc hl
2223  91A7 66           		ld h,(hl)
2224  91A8 6F           		ld l,a
2225  91A9 2B           		dec hl
2226  91AA              mmm0
2227  91AA C9           		ret
2228  91AB
2229  91AB 20 20 20 20  NUMBUF	defb "        ",0
2229  91AF 20 20 20 20
2229  91B3 00
2230  91B4              NUM
2231  91B4 E5           		push hl
2232  91B5 21 AB 91     		ld hl,NUMBUF
2233  91B8 11 AC 91     		ld de,NUMBUF+1
2234  91BB 01 05 00     		ld bc,5
2235  91BE 3E 20        		ld a,32
2236  91C0 77           		ld (hl),a
2237  91C1 ED B0        		ldir
2238  91C3 21 AB 91     		ld hl,NUMBUF
2239  91C6 22 F6 91     		ld (numadr+1),hl
2240  91C9 E1           		pop hl
2241  91CA 11 10 27     DECIMAL5 ld de,10000 ;řád desetitisíců
2242  91CD CD E5 91     		 call DIGIT ;počet desetitisíců
2243  91D0 11 E8 03     DECIMAL4 ld de,1000 ;řád tisíců
2244  91D3 CD E5 91     		 call DIGIT ;a jeho počet
2245  91D6 11 64 00     DECIMAL3 ld de,100 ;řád stovek
2246  91D9 CD E5 91     		 call DIGIT ;počet
2247  91DC 11 0A 00     DECIMAL2 ld de,10 ;desítky
2248  91DF CD E5 91     		 call DIGIT ;počet
2249  91E2 11 01 00     DECIMAL1 ld de,1 ;jednotky
2250  91E5 3E 2F        DIGIT 	 ld a,"0"-1 ;do A kód znaku 0 bez jedné
2251  91E7 3C           DIGIT2 	 inc a ;přičti jedničku
2252  91E8 B7           		 or a ;vynuluj CARRY Flag
2253  91E9 ED 52        		 sbc hl,de ;pokusně odečti řád
2254  91EB 30 FA        		 jr nc,DIGIT2 ;pokud není výsledek záporný opakuj
2255  91ED 19           		 add hl,de ;přičti řád zpátky
2256  91EE FE 3A        		 cp "9"+1 ;testuj znaky 0 až 9
2257  91F0 38 02        		 jr c,DIGIT3 ;odskoč pokud platí
2258  91F2 C6 07        		 add a,"A"-"9"-1 ;oprava na A až F pro hexa čísla
2259  91F4 E5           DIGIT3   push 	hl
2260  91F5 21 00 00     numadr	 ld hl,0
2261  91F8 77           		 ld (hl),a
2262  91F9 23           		 inc hl
2263  91FA 22 F6 91     		 ld (numadr+1),hl
2264  91FD E1           		 pop hl
2265  91FE C9           		 ret
2266  91FF
2267  91FF
2268  91FF
2269  91FF
2270  91FF              getroot_reload
2271  91FF 21 21 80     		ld hl,pathl
2272  9202 CD 45 94     		call ROZHOD2
2273  9205 7E           		ld a,(hl)
2274  9206 23           		inc hl
2275  9207 66           		ld h,(hl)
2276  9208 6F           		ld l,a
2277  9209 11 03 00     		ld de,3
2278  920C 19           		add hl,de
2279  920D 7E           		ld a,(hl)
2280  920E FE FF        		cp 255
2281  9210 28 05        		jr z,amroot
2282  9212 21 01 00     		ld hl,1
2283  9215 18 03        		jr ammm0
2284  9217              amroot
2285  9217 21 00 00     		ld hl,0
2286  921A              ammm0
2287  921A C9           		ret
2288  921B
2289  921B
2290  921B 43 3A FF     DIRTMP  defb "C:",255
2291  921E
2292  921E              getdir
2293  921E 21 21 80     		ld hl,pathl
2294  9221 CD 45 94     		call ROZHOD2
2295  9224 7E           		ld a,(hl)
2296  9225 23           		inc hl
2297  9226 66           		ld h,(hl)
2298  9227 6F           		ld l,a
2299  9228 EB           		ex de,hl
2300  9229 D5           		push de
2301  922A 21 1B 92     		ld hl,DIRTMP
2302  922D
2303  922D
2304  922D 01 04 00     		ld bc,4
2305  9230 ED B0        		ldir
2306  9232
2307  9232 CD E2 99     		call dospage
2308  9235
2309  9235 E1           		pop hl
2310  9236 3E 01        		ld a,1
2311  9238 CD B1 01     		call $01b1
2312  923B CD F2 99     		call basicpage
2313  923E C9           		ret
2314  923F
2315  923F
2316  923F 01 00        pozicel	defw $01
2317  9241 01 28        pozice2 defw 40* 256 + 1
2318  9243
2319  9243 02 40        adrl	defw $4000+2
2320  9245 52 40        adrr 	defw $4000+2+80
2321  9247
2322  9247              changewin
2323  9247 3E 00        		ld a,0
2324  9249 CD 16 94     		call writecur
2325  924C 3A 12 80     		ld a,(OKNO)
2326  924F EE 10        		xor 16
2327  9251 32 12 80     		ld (OKNO),a
2328  9254 3E 20        		ld a,32
2329  9256 CD 16 94     		call writecur
2330  9259
2331  9259 CD E2 99     		call dospage
2332  925C
2333  925C 21 21 80     		ld hl,pathl
2334  925F CD 45 94     		call ROZHOD2
2335  9262 7E           		ld a,(hl)
2336  9263 23           		inc hl
2337  9264 66           		ld h,(hl)
2338  9265 6F           		ld l,a
2339  9266
2340  9266 AF           		xor a
2341  9267 CD B1 01     		call $01b1
2342  926A
2343  926A CD F2 99     		call basicpage
2344  926D
2345  926D
2346  926D C3 84 83     		jp loop0
2347  9270
2348  9270              bufscr equ $e000
2349  9270              ;Uloží obrazovku do banky 19 ZX Next. Ukládají se spodní dvě třetiny obrazovky,
2350  9270              ;a celé atributy. Banka 19 se stránkuje od adresy $e000
2351  9270              savescr
2352  9270 ED 91 57 13  		nextreg $57,19				;Stránka na uložení VideoRam
2353  9274 21 00 40     		ld hl,16384
2354  9277 11 00 E0     		ld de,bufscr
2355  927A 01 00 14     		ld bc,32*160
2356  927D ED B0        		ldir
2357  927F ED 91 57 01  		nextreg $57,1				;Nastránkuj zpátky
2358  9283 C9           		ret
2359  9284
2360  9284              ;Obnovení spodních dvou třetin obrazovky z 19 stárnky ZX Next.
2361  9284              loadscr
2362  9284 ED 91 57 13  		nextreg $57,19
2363  9288 21 00 E0     		ld hl,bufscr
2364  928B 11 00 40     		ld de,16384
2365  928E 01 00 14     		ld bc,32*160
2366  9291 ED B0        		ldir
2367  9293 ED 91 57 01  		nextreg $57,1
2368  9297 C9           		ret
2369  9298              DDDD
2370  9298              down
2371  9298 21 17 80     		ld hl,POSKURZL
2372  929B CD 3D 94     		call ROZHOD
2373  929E 7E           		ld a,(hl)
2374  929F FE 1A        		cp 26
2375  92A1 28 5B        		jr z,down0
2376  92A3 F5           		push af
2377  92A4
2378  92A4 21 1D 80     		ld hl,STARTWINL
2379  92A7 CD 45 94     		call ROZHOD2
2380  92AA 7E           		ld a,(hl)
2381  92AB 23           		inc hl
2382  92AC 66           		ld h,(hl)
2383  92AD 6F           		ld l,a
2384  92AE F1           		pop af
2385  92AF 5F           		ld e,a
2386  92B0 16 00        		ld d,0
2387  92B2 19           		add hl,de
2388  92B3 E5           		push hl
2389  92B4 21 5B 9B     		ld hl,ALLFILES
2390  92B7
2391  92B7 CD 45 94     		call ROZHOD2
2392  92BA 7E           		ld a,(hl)
2393  92BB 23           		inc hl
2394  92BC 66           		ld h,(hl)
2395  92BD 6F           		ld l,a
2396  92BE 2B           		dec hl
2397  92BF D1           		pop de
2398  92C0 B7           		or a
2399  92C1 ED 52        		sbc hl,de
2400  92C3 CA 84 83     		jp z,loop0
2401  92C6
2402  92C6
2403  92C6
2404  92C6 3E 00        		ld a,0
2405  92C8 CD 16 94     		call writecur
2406  92CB
2407  92CB 21 17 80     		ld hl,POSKURZL
2408  92CE CD 3D 94     		call ROZHOD
2409  92D1
2410  92D1 34           		inc (hl)
2411  92D2 21 19 80     		ld hl,ALLPOSL
2412  92D5 CD 45 94     		call ROZHOD2
2413  92D8 E5           		push hl
2414  92D9 7E           		ld a,(hl)
2415  92DA 23           		inc hl
2416  92DB 66           		ld h,(hl)
2417  92DC 6F           		ld l,a
2418  92DD D1           		pop de
2419  92DE EB           		ex de,hl
2420  92DF 13           		inc de
2421  92E0 73           		ld (hl),e
2422  92E1 23           		inc hl
2423  92E2 72           		ld (hl),d
2424  92E3
2425  92E3
2426  92E3 21 43 92     		ld hl,adrl
2427  92E6 CD 45 94     		call ROZHOD2
2428  92E9 7E           		ld a,(hl)
2429  92EA 23           		inc hl
2430  92EB 66           		ld h,(hl)
2431  92EC 6F           		ld l,a
2432  92ED 22 D0 94     		ld (adrs+1),hl
2433  92F0
2434  92F0 CD 80 91     		call getroot
2435  92F3
2436  92F3 CD 75 94     		call showwin
2437  92F6 3E 20        		ld a,32
2438  92F8 CD 16 94     		call writecur
2439  92FB C3 84 83     		jp loop0
2440  92FE
2441  92FE              down0
2442  92FE F5           		push af
2443  92FF
2444  92FF 21 1D 80     		ld hl,STARTWINL
2445  9302 CD 45 94     		call ROZHOD2
2446  9305 7E           		ld a,(hl)
2447  9306 23           		inc hl
2448  9307 66           		ld h,(hl)
2449  9308 6F           		ld l,a
2450  9309 F1           		pop af
2451  930A 5F           		ld e,a
2452  930B 16 00        		ld d,0
2453  930D 19           		add hl,de
2454  930E E5           		push hl
2455  930F 21 5B 9B     		ld hl,ALLFILES
2456  9312
2457  9312 CD 45 94     		call ROZHOD2
2458  9315 7E           		ld a,(hl)
2459  9316 23           		inc hl
2460  9317 66           		ld h,(hl)
2461  9318 6F           		ld l,a
2462  9319 2B           		dec hl
2463  931A D1           		pop de
2464  931B B7           		or a
2465  931C ED 52        		sbc hl,de
2466  931E CA 84 83     		jp z,loop0
2467  9321
2468  9321
2469  9321
2470  9321
2471  9321
2472  9321 21 19 80     		ld hl,ALLPOSL
2473  9324 CD 45 94     		call ROZHOD2
2474  9327 E5           		push hl
2475  9328 7E           		ld a,(hl)
2476  9329 23           		inc hl
2477  932A 66           		ld h,(hl)
2478  932B 6F           		ld l,a
2479  932C
2480  932C E5           		push hl
2481  932D 21 72 93     		ld hl,downall
2482  9330 CD 45 94     		call ROZHOD2
2483  9333 7E           		ld a,(hl)
2484  9334 23           		inc hl
2485  9335 66           		ld h,(hl)
2486  9336 6F           		ld l,a
2487  9337 D1           		pop de
2488  9338 EB           		ex de,hl
2489  9339
2490  9339 B7           		or a
2491  933A ED 52        		sbc hl,de
2492  933C 19           		add hl,de
2493  933D D1           		pop de
2494  933E CA 84 83     		jp z,loop0
2495  9341
2496  9341 EB           		ex de,hl
2497  9342 13           		inc de
2498  9343 73           		ld (hl),e
2499  9344 23           		inc hl
2500  9345 72           		ld (hl),d
2501  9346
2502  9346 21 1D 80     		ld hl,STARTWINL
2503  9349 CD 45 94     		call ROZHOD2
2504  934C E5           		push hl
2505  934D 7E           		ld a,(hl)
2506  934E 23           		inc hl
2507  934F 66           		ld h,(hl)
2508  9350 6F           		ld l,a
2509  9351 D1           		pop de
2510  9352
2511  9352 EB           		ex de,hl
2512  9353 13           		inc de
2513  9354 73           		ld (hl),e
2514  9355 23           		inc hl
2515  9356 72           		ld (hl),d
2516  9357
2517  9357 21 43 92     		ld hl,adrl
2518  935A CD 45 94     		call ROZHOD2
2519  935D 7E           		ld a,(hl)
2520  935E 23           		inc hl
2521  935F 66           		ld h,(hl)
2522  9360 6F           		ld l,a
2523  9361 22 D0 94     		ld (adrs+1),hl
2524  9364
2525  9364 CD 80 91     		call getroot
2526  9367
2527  9367              DDD
2528  9367 CD 75 94     		call showwin
2529  936A 3E 20        		ld a,32
2530  936C CD 16 94     		call writecur
2531  936F C3 84 83     		jp loop0
2532  9372
2533  9372 00 00 00 00  downall	defw 0, 0
2534  9376
2535  9376              up
2536  9376 21 17 80     		ld hl,POSKURZL
2537  9379 CD 3D 94     		call ROZHOD
2538  937C 7E           		ld a,(hl)
2539  937D B7           		or a
2540  937E 28 38        		jr z,up0
2541  9380
2542  9380 3E 00        		ld a,0
2543  9382 CD 16 94     		call writecur
2544  9385 21 17 80     		ld hl,POSKURZL
2545  9388 CD 3D 94     		call ROZHOD
2546  938B 35           		dec (hl)
2547  938C
2548  938C
2549  938C 21 19 80     		ld hl,ALLPOSL
2550  938F CD 45 94     		call ROZHOD2
2551  9392 E5           		push hl
2552  9393 7E           		ld a,(hl)
2553  9394 23           		inc hl
2554  9395 66           		ld h,(hl)
2555  9396 6F           		ld l,a
2556  9397 D1           		pop de
2557  9398 EB           		ex de,hl
2558  9399 1B           		dec de
2559  939A 73           		ld (hl),e
2560  939B 23           		inc hl
2561  939C 72           		ld (hl),d
2562  939D
2563  939D
2564  939D 21 43 92     		ld hl,adrl
2565  93A0 CD 45 94     		call ROZHOD2
2566  93A3 7E           		ld a,(hl)
2567  93A4 23           		inc hl
2568  93A5 66           		ld h,(hl)
2569  93A6 6F           		ld l,a
2570  93A7 22 D0 94     		ld (adrs+1),hl
2571  93AA
2572  93AA CD 80 91     		call getroot
2573  93AD
2574  93AD
2575  93AD CD 75 94     		call showwin
2576  93B0 3E 20        		ld a,32
2577  93B2 CD 16 94     		call writecur
2578  93B5 C3 84 83     		jp loop0
2579  93B8
2580  93B8              up0
2581  93B8              UP0
2582  93B8
2583  93B8 21 21 80     		ld hl,pathl
2584  93BB CD 45 94     		call ROZHOD2
2585  93BE 7E           		ld a,(hl)
2586  93BF 23           		inc hl
2587  93C0 66           		ld h,(hl)
2588  93C1 6F           		ld l,a
2589  93C2 11 03 00     		ld de,3
2590  93C5 19           		add hl,de
2591  93C6 7E           		ld a,(hl)
2592  93C7 FE FF        		cp 255
2593  93C9 28 07        		jr z,upzero
2594  93CB 3E 01        		ld a,1
2595  93CD 32 E2 93     		ld (kolik+1),a
2596  93D0 18 04        		jr opcont
2597  93D2 AF           upzero	xor a
2598  93D3 32 E2 93     		ld (kolik+1),a
2599  93D6
2600  93D6              opcont
2601  93D6 21 1D 80     		ld hl,STARTWINL
2602  93D9 CD 45 94     		call ROZHOD2
2603  93DC E5           		push hl
2604  93DD 7E           		ld a,(hl)
2605  93DE 23           		inc hl
2606  93DF 66           		ld h,(hl)
2607  93E0 6F           		ld l,a
2608  93E1 11 00 00     kolik	ld de,0
2609  93E4 B7           		or a
2610  93E5 22 F1 93     		ld (usavehl+1),hl
2611  93E8 ED 52        		sbc hl,de
2612  93EA              		;add hl,de
2613  93EA D1           		pop de
2614  93EB 7D           		ld a,l
2615  93EC B4           		or h
2616  93ED CA 84 83     		jp z,loop0
2617  93F0 21 00 00     usavehl	ld hl,0
2618  93F3              		;or a
2619  93F3              		;sbc hl,bc
2620  93F3 EB           		ex de,hl
2621  93F4 1B           		dec de
2622  93F5 73           		ld (hl),e
2623  93F6 23           		inc hl
2624  93F7 72           		ld (hl),d
2625  93F8
2626  93F8
2627  93F8 21 43 92     		ld hl,adrl
2628  93FB CD 45 94     		call ROZHOD2
2629  93FE 7E           		ld a,(hl)
2630  93FF 23           		inc hl
2631  9400 66           		ld h,(hl)
2632  9401 6F           		ld l,a
2633  9402 22 D0 94     		ld (adrs+1),hl
2634  9405
2635  9405 CD 80 91     		call getroot
2636  9408
2637  9408 CD 75 94     		call showwin
2638  940B 3E 20        		ld a,32
2639  940D CD 16 94     		call writecur
2640  9410
2641  9410
2642  9410 C3 84 83     		jp loop0
2643  9413              KL
2644  9413 00           klavesa	defb 0
2645  9414
2646  9414 00 00        leftpos	defw	0
2647  9416
2648  9416              writecur
2649  9416 32 34 94     		ld (curcolor+1),a
2650  9419 21 13 80     		ld hl,KURZL
2651  941C CD 45 94     		call ROZHOD2
2652  941F
2653  941F 7E           		ld a,(hl)
2654  9420 23           		inc hl
2655  9421 66           		ld h,(hl)
2656  9422 6F           		ld l,a
2657  9423 23           		inc hl
2658  9424 E5           		push hl
2659  9425 21 17 80     		ld hl,POSKURZL
2660  9428 CD 3D 94     		call ROZHOD
2661  942B 7E           		ld a,(hl)
2662  942C 5F           		ld e,a
2663  942D 16 A0        		ld d,160
2664  942F ED 30        		mul d,e
2665  9431
2666  9431 E1           		pop hl
2667  9432 19           		add hl,de
2668  9433
2669  9433 3E 20        curcolor ld a,32
2670  9435 06 26        		ld b,38
2671  9437 77           wr0		ld (hl),a
2672  9438 23           		inc hl
2673  9439 23           		inc hl
2674  943A 10 FB        		djnz wr0
2675  943C C9           		ret
2676  943D
2677  943D 3A 12 80     ROZHOD   ld   a,(OKNO)
2678  9440 CB 67                 bit  4,a
2679  9442 C8                    ret  z
2680  9443 23                    inc  hl
2681  9444 C9                    ret
2682  9445
2683  9445 3A 12 80     ROZHOD2  ld   a,(OKNO)
2684  9448 CB 67                 bit  4,a
2685  944A C8                    ret  z
2686  944B 23                    inc  hl
2687  944C 23                    inc  hl
2688  944D C9                    ret
2689  944E
2690  944E
2691  944E              ConvertRomCharTo4bpp:
2692  944E C5                   push    bc
2693  944F 01 FF 08             ld      bc,$08FF
2694  9452              .lineLoop:
2695  9452 7E                   ld      a,(hl)
2696  9453 23                   inc     hl
2697  9454 E5                   push    hl
2698  9455 CD 5D 94             call    .convert8pixels
2699  9458 E1                   pop     hl
2700  9459 10 F7                djnz    .lineLoop
2701  945B C1                   pop     bc
2702  945C C9                   ret
2703  945D              .convert8pixels:
2704  945D CD 60 94             call    .convert4pixels
2705  9460              .convert4pixels:
2706  9460 CD 63 94             call    .convert2pixels
2707  9463              .convert2pixels:
2708  9463 07                   rlca
2709  9464 07                   rlca
2710  9465 F5                   push    af
2711  9466 E6 03                and     3
2712  9468 21 71 94             ld      hl,.pixelTable
2713  946B ED 31                add     hl,a
2714  946D ED A0                ldi
2715  946F F1                   pop     af
2716  9470 C9                   ret
2717  9471              .pixelTable:
2718  9471 00 03 30 33         DB      $00, $03, $30, $33
2719  9475
2720  9475
2721  9475              showwin
2722  9475
2723  9475 21 1D 80     		ld hl,STARTWINL
2724  9478 CD 45 94     		call ROZHOD2
2725  947B 7E           		ld a,(hl)
2726  947C 23           		inc hl
2727  947D 66           		ld h,(hl)
2728  947E 6F           		ld l,a
2729  947F
2730  947F 3E 02        		ld a,2
2731  9481 32 CA 94     		ld (ypos+1),a
2732  9484 E5           		push hl
2733  9485 21 5B 9B     		ld hl,ALLFILES
2734  9488 CD 45 94     		call ROZHOD2
2735  948B 7E           		ld a,(hl)
2736  948C 23           		inc hl
2737  948D 66           		ld h,(hl)
2738  948E 6F           		ld l,a
2739  948F 44           		ld b,h
2740  9490 4D           		ld c,l
2741  9491
2742  9491 0B           		dec bc
2743  9492 60           		ld h,b
2744  9493 69           		ld l,c
2745  9494 11 1C 00     		ld de,28
2746  9497 B7           		or a
2747  9498 ED 52        		sbc hl,de
2748  949A 38 03        		jr c,SSS
2749  949C 01 1B 00     		ld bc,27
2750  949F
2751  949F
2752  949F E1           SSS		pop hl
2753  94A0              showloop
2754  94A0 E5           		push hl
2755  94A1 C5           		push bc
2756  94A2 23           		inc hl
2757  94A3 CD 65 95     		call find83
2758  94A6 CD 36 9B     		call BUFF83
2759  94A9
2760  94A9 2A 80 95     		ld hl,(foundfile)
2761  94AC CB 7E        		bit 7,(hl)		;testuj jestli je soubor označený
2762  94AE 28 07        		jr z,nonselect
2763  94B0 3E 50        		ld a,80
2764  94B2 32 E3 94     		ld (inkcolor+1),a
2765  94B5 18 05        		jr isselect
2766  94B7              nonselect
2767  94B7 3E 00        		ld a,0
2768  94B9 32 E3 94     		ld (inkcolor+1),a
2769  94BC              isselect
2770  94BC
2771  94BC
2772  94BC
2773  94BC 2A 8D 95     		ld hl,(TMP83+11)
2774  94BF 22 09 95     		ld (velikost+1),hl
2775  94C2 C1           		pop bc
2776  94C3 E1           		pop hl
2777  94C4 E5           		push hl
2778  94C5 C5           		push bc
2779  94C6
2780  94C6 CD C1 9A     		call FINDLFN
2781  94C9              SSSS
2782  94C9 1E 02        ypos	ld e,2
2783  94CB 16 A0        		ld d,80 * 2
2784  94CD ED 30        		mul d,e
2785  94CF 21 02 40     adrs	ld hl,$4000 + 2
2786  94D2
2787  94D2 19           		add hl,de
2788  94D3 EB           		ex de,hl
2789  94D4 21 61 9B     		ld hl,LFNNAME
2790  94D7
2791  94D7 01 1F 00     		ld bc,31
2792  94DA 7E           shw0	ld a,(hl)
2793  94DB FE FF        		cp 255
2794  94DD 28 0C        		jr z,shw01
2795  94DF 12           		ld (de),a
2796  94E0 13           		inc de
2797  94E1 23           		inc hl
2798  94E2 3E 00        inkcolor ld a,0
2799  94E4 12           		ld (de),a
2800  94E5 13           		inc de
2801  94E6 0B           		dec bc
2802  94E7 78           		ld a,b
2803  94E8 B1           		or c
2804  94E9 20 EF        		jr nz,shw0
2805  94EB
2806  94EB              shw01
2807  94EB 21 89 95     		ld hl,TMP83 +7
2808  94EE CB 7E        		bit 7,(hl)
2809  94F0 28 16        		jr z,shw20
2810  94F2
2811  94F2 21 51 95     dir		ld hl,dirext
2812  94F5 01 07 00     		ld bc,5+2
2813  94F8 7E           shw1	ld a,(hl)
2814  94F9
2815  94F9 12           		ld (de),a
2816  94FA 13           		inc de
2817  94FB 23           		inc hl
2818  94FC 3A E3 94     		ld a,(inkcolor+1)
2819  94FF 12           		ld (de),a
2820  9500 13           		inc de
2821  9501 0B           		dec bc
2822  9502 78           		ld a,b
2823  9503 B1           		or c
2824  9504 20 F2        		jr nz,shw1
2825  9506 18 38        		jr shw3
2826  9508
2827  9508
2828  9508              shw20
2829  9508 21 00 00     velikost ld hl,0
2830  950B
2831  950B
2832  950B D5           		push de
2833  950C CD B4 91     		call NUM
2834  950F 21 AB 91     		ld hl,NUMBUF
2835  9512
2836  9512 06 05        		ld b,5
2837  9514 7E           vel1	ld a,(hl)
2838  9515 FE 30        		cp "0"
2839  9517 20 05        		jr nz,vel2
2840  9519 36 20        		ld (hl)," "
2841  951B 23           		inc hl
2842  951C 10 F6        		djnz vel1
2843  951E D1           vel2	pop de
2844  951F 21 AB 91     		ld hl,NUMBUF
2845  9522 06 05        shw2	ld b,5
2846  9524 7E           sh		ld a,(hl)
2847  9525 12           		ld (de),a
2848  9526 3A E3 94     		ld a,(inkcolor+1)
2849  9529 13           		inc de
2850  952A 12           		ld (de),a
2851  952B 13           		inc de
2852  952C 23           		inc hl
2853  952D 10 F5        		djnz sh
2854  952F
2855  952F 3E 6B        		ld a,"k"
2856  9531 12           		ld (de),a
2857  9532 13           		inc de
2858  9533 3A E3 94     		ld a,(inkcolor+1)
2859  9536 12           		ld (de),a
2860  9537 13           		inc de
2861  9538 3E 42        		ld a,"B"
2862  953A 12           		ld (de),a
2863  953B 13           		inc de
2864  953C 3A E3 94     		ld a,(inkcolor+1)
2865  953F 12           		ld (de),a
2866  9540 C1           shw3	pop bc
2867  9541 E1           		pop hl
2868  9542 23           		inc hl
2869  9543
2870  9543 3A CA 94     		ld a,(ypos+1)
2871  9546 3C           		inc a
2872  9547 32 CA 94     		ld (ypos+1),a
2873  954A 0B           		dec bc
2874  954B 78           		ld a,b
2875  954C B1           		or c
2876  954D C2 A0 94     		jp nz,showloop
2877  9550
2878  9550
2879  9550 C9           		ret
2880  9551
2881  9551 20 20 3C 44  dirext	defb "  <DIR>",0
2881  9555 49 52 3E 00
2882  9559
2883  9559              ; Násobení HL x B
2884  9559              ; Vysledek HL
2885  9559 55           mull		ld d,l		;vynásob spodní byty
2886  955A 58           			ld e,b		;
2887  955B ED 30        			mul d,e		;vysledek je v de
2888  955D EB           			ex de,hl	;vysledek je v hl
2889  955E 58           			ld e,b		;násobitel do e
2890  955F ED 30        			mul d,e		;vynásob
2891  9561 7B           			ld a,e		;do akumulátoru hoď výsledek (spodní byte)
2892  9562 84           			add a,h
2893  9563 67           			ld h,a		;konečný výsledek je v HL
2894  9564 C9           			ret
2895  9565
2896  9565
2897  9565              ;HL ... pozice
2898  9565              find83
2899  9565 06 0D        		ld b,13
2900  9567 CD 59 95     		call mull
2901  956A 11 00 A0     		ld de,$a000
2902  956D 19           		add hl,de
2903  956E
2904  956E CD 36 9B     		call BUFF83
2905  9571 22 80 95     		ld (foundfile),hl
2906  9574 11 82 95     		ld de,TMP83
2907  9577 01 0D 00     		ld bc,13
2908  957A ED B0        		ldir
2909  957C CD 47 9B     		call NOBUFF83
2910  957F C9           		ret
2911  9580              FFF
2912  9580 00 00        foundfile	defw 0
2913  9582 00 00 00...  TMP83	ds 13
2914  958F              INKEY
2915  958F AF           		xor  a
2916  9590 32 B6 95              ld   (aLAST_KEY+1),a
2917  9593 FB           		ei
2918  9594 76           		 halt
2919  9595
2920  9595              ahl0
2921  9595 CD C8 95     		 call KEYSCAN
2922  9598
2923  9598 7B           		 ld   a,e
2924  9599 3C                    inc  a
2925  959A 28 F3                 jr   z,INKEY
2926  959C 7A                    ld   a,d
2927  959D 21 FA 95              ld   hl,SYMTAB
2928  95A0 FE 18                 cp   $18
2929  95A2 28 0A                 jr   z,aHLSM2
2930  95A4 21 22 96              ld   hl,CAPSTAB
2931  95A7 FE 27                 cp   $27
2932  95A9 28 03                 jr   z,aHLSM2
2933  95AB 21 49 96              ld   hl,NORMTAB
2934  95AE 16 00        aHLSM2    ld   d,0
2935  95B0 19                    add  hl,de
2936  95B1 7E                    ld   a,(hl)
2937  95B2 B7                    or   a
2938  95B3 28 DA                 jr   z,INKEY
2939  95B5
2940  95B5 06 00        aLAST_KEY ld   b,0
2941  95B7 B8                    cp   b
2942  95B8 28 05                 jr   z,aSEDI_KEY
2943  95BA
2944  95BA 06 03                 ld   b,3
2945  95BC 76           aLOOP_LST halt
2946  95BD 10 FD                 djnz aLOOP_LST
2947  95BF              aSEDI_KEY
2948  95BF 32 B6 95              ld   (aLAST_KEY+1),a
2949  95C2 F5           		push af
2950  95C3 CD 71 96     		call beepk
2951  95C6 F1           		pop af
2952  95C7 C9           		ret
2953  95C8
2954  95C8              ;KeyScan od Busyho z MRSu
2955  95C8 2E 2F        KEYSCAN  ld   l,47			;testovani klavesnice
2956  95CA 11 FF FF              ld   de,65535
2957  95CD 01 FE FE              ld   bc,65278
2958  95D0 ED 78        KEYLINE  in   a,(c)
2959  95D2 2F                    cpl
2960  95D3 E6 1F                 and  31
2961  95D5 28 0E                 jr   z,KEYDONE
2962  95D7 67                    ld   h,a
2963  95D8 7D                    ld   a,l
2964  95D9 14           KEY3KEYS inc  d
2965  95DA C0                    ret  nz
2966  95DB D6 08        KEYBITS  sub  8
2967  95DD CB 3C                 srl  h
2968  95DF 30 FA                 jr   nc,KEYBITS
2969  95E1 53                    ld   d,e
2970  95E2 5F                    ld   e,a
2971  95E3 20 F4                 jr   nz,KEY3KEYS
2972  95E5 2D           KEYDONE  dec  l
2973  95E6 CB 00                 rlc  b
2974  95E8 38 E6                 jr   c,KEYLINE
2975  95EA 7A                    ld   a,d
2976  95EB 3C                    inc  a
2977  95EC C8                    ret  z
2978  95ED FE 28                 cp   40
2979  95EF C8                    ret  z
2980  95F0 FE 19                 cp   25
2981  95F2 C8                    ret  z
2982  95F3 7B                    ld   a,e
2983  95F4 5A                    ld   e,d
2984  95F5 57                    ld   d,a
2985  95F6 FE 18                 cp   24
2986  95F8 C9                    ret
2987  95F9 00           keysound db 0				;key sound 0= yes,1= no, klavesnicove echo
2988  95FA 2A 5E 5B 26  SYMTAB   db "*^[&%>}/"
2988  95FE 25 3E 7D 2F
2989  9602 2C 2D 5D 27           db ",-]'$<{?"
2989  9606 24 3C 7B 3F
2990  960A 2E 2B 7F 28           db ".+($"
2990  960E 24
2991  960F C8                    db 200
2992  9610 2F 20                 db '/',' '
2993  9612 00                    db 0
2994  9613 3D 3B 29 40           db "=;)@"
2995  9617 C9                    db 201
2996  9618 7C 3A                 db "|:"
2997  961A 20 0D 22              db 32,13,34
2998  961D 5F 21                 db "_!"
2999  961F C7                    db 199
3000  9620 7E 00                 db "~",0
3001  9622
3002  9622 42 48 59     CAPSTAB  db "BHY"
3003  9625 0A 08                 db 10,8
3004  9627 54 47 56              db "TGV"
3005  962A 4E 4A 55              db "NJU"
3006  962D 0B 05                 db 11,5
3007  962F 52 46 43              db "RFC"
3008  9632 4D 4B 49              db "MKI"
3009  9635 09 04                 db 9,4
3010  9637 45 44 58              db "EDX"
3011  963A 02                    db 2
3012  963B 4C 4F                 db "LO"
3013  963D 0F 06                 db 15,6
3014  963F 57 53 5A              db "WSZ"
3015  9642 01 0D 50              db 1,13,"P"
3016  9645 0C 07                 db 12,7
3017  9647 51 41                 db "QA"
3018  9649
3019  9649 62 68 79 36  NORMTAB  db "bhy65tgv"
3019  964D 35 74 67 76
3020  9651 6E 6A 75 37           db "nju74rfc"
3020  9655 34 72 66 63
3021  9659 6D 6B 69 38           db "mki83edx"
3021  965D 33 65 64 78
3022  9661 00                    db 0
3023  9662 6C 6F 39 32           db "lo92wsz"
3023  9666 77 73 7A
3024  9669 20 0D                 db 32,13
3025  966B 70 30 31 71           db "p01qa"
3025  966F 61
3026  9670 00                    db 0
3027  9671
3028  9671 3A F9 95     beepk		ld a,(keysound)		;Busyho nahradni rutina,kratsi
3029  9674 B7           		or a
3030  9675 C0           		ret nz
3031  9676 3A 89 96     		ld a,(BORDER)
3032  9679 5F           		ld e,a
3033  967A 06 10        		ld b,$10
3034  967C 80           		add a,b
3035  967D              ;		ld a,$10+border
3036  967D D3 FE        		out ($fe),a
3037  967F 06 1C        		ld b,$1c
3038  9681 10 FE        beepk1		djnz beepk1
3039  9683 3E 08        		ld a,$08
3040  9685 83           		add a,e
3041  9686              ;		ld a,$08+border
3042  9686 D3 FE        		out ($fe),a
3043  9688 C9           		ret
3044  9689 01           BORDER   db 1				;okraj
3045  968A              info
3046  968A CD 70 92     		call savescr
3047  968D 21 0A 0A     		ld hl,10 * 256 + 10
3048  9690 01 0A 3C     		ld bc,60 * 256 + 10
3049  9693 3E 10        		ld a,16
3050  9695 CD 41 98     		call window
3051  9698
3052  9698 21 0B 0B     		ld hl,11*256+11
3053  969B 3E 10        		ld a,16
3054  969D 11 D9 96     		ld de,calmcommander
3055  96A0 CD 21 98     		call print
3056  96A3
3057  96A3 21 0D 0B     		ld hl,11*256+13
3058  96A6 3E 10        		ld a,16
3059  96A8 11 05 97     		ld de,info1txt
3060  96AB CD 21 98     		call print
3061  96AE
3062  96AE 21 0F 0B     		ld hl,11*256+15
3063  96B1 3E 10        		ld a,16
3064  96B3 11 29 97     		ld de,info2txt
3065  96B6 CD 21 98     		call print
3066  96B9
3067  96B9 21 10 0B     		ld hl,11*256+16
3068  96BC 3E 10        		ld a,16
3069  96BE 11 47 97     		ld de,info3txt
3070  96C1 CD 21 98     		call print
3071  96C4
3072  96C4
3073  96C4 21 14 2F     		ld hl,47*256+20
3074  96C7 3E 20        		ld a,32
3075  96C9 11 EC 96     		ld de,breaktxt
3076  96CC CD 21 98     		call print
3077  96CF
3078  96CF              info0
3079  96CF CD 8F 95     		call INKEY
3080  96D2 FE 01        		cp 1
3081  96D4 CA 84 92     		jp z,loadscr
3082  96D7 18 F6        		jr info0
3083  96D9
3084  96D9
3085  96D9 43 41 4C 4D  calmcommander	defb "CALM COMMANDER 0.1",0
3085  96DD 20 43 4F 4D
3085  96E1 4D 41 4E 44
3085  96E5 45 52 20 30
3085  96E9 2E 31 00
3086  96EC 42 52 45 41  breaktxt defb "BREAK: close this window",0
3086  96F0 4B 3A 20 63
3086  96F4 6C 6F 73 65
3086  96F8 20 74 68 69
3086  96FC 73 20 77 69
3086  9700 6E 64 6F 77
3086  9704 00
3087  9705 46 69 6C 65  info1txt defb "File manager for ZX Spectrum Next. ",0
3087  9709 20 6D 61 6E
3087  970D 61 67 65 72
3087  9711 20 66 6F 72
3087  9715 20 5A 58 20
3087  9719 53 70 65 63
3087  971D 74 72 75 6D
3087  9721 20 4E 65 78
3087  9725 74 2E 20 00
3088  9729 4D 61 69 6E  info2txt defb "Main program: Shrek/MB Maniax",0
3088  972D 20 70 72 6F
3088  9731 67 72 61 6D
3088  9735 3A 20 53 68
3088  9739 72 65 6B 2F
3088  973D 4D 42 20 4D
3088  9741 61 6E 69 61
3088  9745 78 00
3089  9747 42 69 67 20  info3txt defb "Big help: ped7g",0
3089  974B 68 65 6C 70
3089  974F 3A 20 70 65
3089  9753 64 37 67 00
3090  9757 20 00        info4txt defb " ",0
3091  9759 20 00        info5txt defb " ",0
3092  975B
3093  975B              kresli
3094  975B 21 01 00     		ld hl,0 * 256 + 1
3095  975E              		;	  delka      vyska
3096  975E 01 1B 26     		ld bc,38 * 256 + 27
3097  9761 3E 00        		ld a,0
3098  9763 CD 41 98     		call window
3099  9766
3100  9766
3101  9766
3102  9766 21 01 28     		ld hl,40* 256 + 1
3103  9769              		;	  delka      vyska
3104  9769 01 1B 26     		ld bc,38 * 256 + 27
3105  976C 3E 00        		ld a,0
3106  976E CD 41 98     		call window
3107  9771
3108  9771 21 1E 02     		ld hl,2*256+30
3109  9774 3E 20        		ld a,32
3110  9776 11 D5 97     		ld de,left_txt
3111  9779 CD 21 98     		call print
3112  977C
3113  977C 21 1E 0A     		ld hl,10*256+30
3114  977F 3E 20        		ld a,32
3115  9781 11 DD 97     		ld de,right_txt
3116  9784 CD 21 98     		call print
3117  9787
3118  9787 21 1E 13     		ld hl,19*256+30
3119  978A 3E 20        		ld a,32
3120  978C 11 E6 97     		ld de,view_txt
3121  978F CD 21 98     		call print
3122  9792
3123  9792 21 1E 1B     		ld hl,27*256+30
3124  9795 3E 20        		ld a,32
3125  9797 11 EE 97     		ld de,edit_txt
3126  979A CD 21 98     		call print
3127  979D
3128  979D 21 1E 23     		ld hl,35*256+30
3129  97A0 3E 20        		ld a,32
3130  97A2 11 F6 97     		ld de,copy_txt
3131  97A5 CD 21 98     		call print
3132  97A8
3133  97A8 21 1E 2B     		ld hl,43*256+30
3134  97AB 3E 20        		ld a,32
3135  97AD 11 FE 97     		ld de,move_txt
3136  97B0 CD 21 98     		call print
3137  97B3
3138  97B3 21 1E 33     		ld hl,51*256+30
3139  97B6 3E 20        		ld a,32
3140  97B8 11 06 98     		ld de,mkdir_txt
3141  97BB CD 21 98     		call print
3142  97BE
3143  97BE 21 1E 3C     		ld hl,60*256+30
3144  97C1 3E 20        		ld a,32
3145  97C3 11 0F 98     		ld de,delete_txt
3146  97C6 CD 21 98     		call print
3147  97C9
3148  97C9 21 1E 46     		ld hl,70*256+30
3149  97CC 3E 20        		ld a,32
3150  97CE 11 19 98     		ld de,menu_txt
3151  97D1 CD 21 98     		call print
3152  97D4
3153  97D4
3154  97D4 C9           		ret
3155  97D5              offset	equ 3
3156  97D5
3157  97D5 31 3A 20 4C  left_txt defb "1: LEFT",0
3157  97D9 45 46 54 00
3158  97DD 32 3A 20 52  right_txt defb "2: RIGHT",0
3158  97E1 49 47 48 54
3158  97E5 00
3159  97E6 33 3A 20 56  view_txt defb "3: VIEW",0
3159  97EA 49 45 57 00
3160  97EE 34 3A 20 45  edit_txt defb "4: EDIT",0
3160  97F2 44 49 54 00
3161  97F6 35 3A 20 43  copy_txt defb "5: COPY",0
3161  97FA 4F 50 59 00
3162  97FE 36 3A 20 4D  move_txt defb "6: MOVE",0
3162  9802 4F 56 45 00
3163  9806 37 3A 20 4D  mkdir_txt defb "7: MKDIR",0
3163  980A 4B 44 49 52
3163  980E 00
3164  980F 38 3A 20 44  delete_txt defb "8: DELETE",0
3164  9813 45 4C 45 54
3164  9817 45 00
3165  9819 30 3A 20 4D  menu_txt defb "0: MENU",0
3165  981D 45 4E 55 00
3166  9821
3167  9821
3168  9821
3169  9821
3170  9821              ;vstup:
3171  9821              ; HL .... XY
3172  9821              ; DE .... TEXT zakonceny 0 bytem
3173  9821              ; A ..... atribut palety
3174  9821 32 3A 98     print  ld (paleta + 1),a
3175  9824 D5           		push de
3176  9825 55           		ld d,l
3177  9826 1E A0        		ld e,160
3178  9828 ED 30        		mul d,e
3179  982A 7C           		ld a,h
3180  982B 87           		add a,a
3181  982C 6F           		ld l,a
3182  982D 26 00        		ld h,0
3183  982F 19           		add hl,de
3184  9830 11 00 40     		ld de,$4000
3185  9833 19           		add hl,de
3186  9834 D1           		pop de
3187  9835              print0
3188  9835 1A           		ld a,(de)
3189  9836 B7           		or a
3190  9837 C8           		ret z
3191  9838 77           		ld (hl),a
3192  9839
3193  9839 3E 00        paleta	ld a,0
3194  983B 23           		inc hl
3195  983C 13           		inc de
3196  983D 77           		ld (hl),a
3197  983E 23           		inc hl
3198  983F 18 F4        		jr print0
3199  9841
3200  9841              window
3201  9841 32 71 98     		ld (atr1+1),a
3202  9844 32 7C 98     		ld (atr2+1),a
3203  9847 32 85 98     		ld (atr3+1),a
3204  984A 32 9D 98     		ld (atr4+1),a
3205  984D 32 AD 98     		ld (atr5+1),a
3206  9850 32 B8 98     		ld (atr6+1),a
3207  9853 32 CE 98     		ld (atr7+1),a
3208  9856 32 D7 98     		ld (atr8+1),a
3209  9859 32 E0 98     		ld (atr9+1),a
3210  985C
3211  985C 5D           		ld e,l
3212  985D 16 A0        		ld d,160
3213  985F ED 30        		mul d,e
3214  9861 7C           		ld a,h
3215  9862 87           		add a,a
3216  9863 6F           		ld l,a
3217  9864 26 00        		ld h,0
3218  9866 19           		add hl,de
3219  9867 11 00 40     		ld de,#4000
3220  986A 19           		add hl,de		;adresa v tilemode
3221  986B E5           window0	push hl
3222  986C
3223  986C 3E 12        		ld a,18
3224  986E 77           		ld (hl),a
3225  986F 23           		inc hl
3226  9870 36 00        atr1	ld (hl),0
3227  9872 78           		ld a,b
3228  9873 32 D0 98     		ld (w5+1),a
3229  9876 3E 10        		ld a,16
3230  9878 23           		inc hl
3231  9879
3232  9879
3233  9879 77           w2		ld (hl),a
3234  987A 23           		inc hl
3235  987B 36 00        atr2	ld (hl),0
3236  987D 23           		inc hl
3237  987E 10 F9        		djnz w2
3238  9880 3E 13        		ld a,19
3239  9882 77           		ld (hl),a
3240  9883 23           		inc hl
3241  9884
3242  9884 36 00        atr3	ld (hl),0
3243  9886 11 9F 00     		ld de,160-1
3244  9889 19           		add hl,de
3245  988A
3246  988A 22 96 98     		ld (w3+1),hl	;uloz adresu
3247  988D E1           		pop hl
3248  988E 11 A0 00     		ld de,160
3249  9891 19           		add hl,de
3250  9892 22 A6 98     		ld (w4+1),hl
3251  9895
3252  9895 21 00 00     w3		ld hl,0
3253  9898 3E 17        		ld a,23
3254  989A 77           		ld (hl),a
3255  989B 23           		inc hl
3256  989C 36 00        atr4	ld (hl),0
3257  989E
3258  989E 11 9F 00     		ld de,160-1
3259  98A1 19           		add hl,de
3260  98A2 22 96 98     		ld (w3+1),hl
3261  98A5 21 00 00     w4		ld hl,0					;leva cast
3262  98A8 3E 16        		ld a,22
3263  98AA 77           		ld (hl),a
3264  98AB 23           		inc hl
3265  98AC 36 00        atr5	ld (hl),0
3266  98AE E5           		push hl
3267  98AF 23           		inc hl
3268  98B0 3A D0 98     		ld a,(w5+1)
3269  98B3 47           		ld b,a
3270  98B4 36 00        cisti	ld 	(hl),0
3271  98B6 23           		inc hl
3272  98B7 36 00        atr6	ld (hl),0
3273  98B9 23           		inc hl
3274  98BA 10 F8        		djnz cisti
3275  98BC
3276  98BC E1           		pop hl
3277  98BD 11 9F 00     		ld de,160-1
3278  98C0 19           		add hl,de
3279  98C1 22 A6 98     		ld (w4+1),hl
3280  98C4 0D           		dec c
3281  98C5 79           		ld a,c
3282  98C6 B7           		or a
3283  98C7 20 CC        		jr nz,w3
3284  98C9
3285  98C9 3E 15        		ld a,21
3286  98CB 77           		ld (hl),a
3287  98CC 23           		inc hl
3288  98CD 36 00        atr7	ld (hl),0
3289  98CF 06 00        w5 		ld b,0
3290  98D1 3E 11        		ld a,17
3291  98D3 23           w6		inc hl
3292  98D4 77           		ld (hl),a
3293  98D5 23           		inc hl
3294  98D6 36 00        atr8	ld (hl),0
3295  98D8 10 F9        		djnz w6
3296  98DA 23           		inc hl
3297  98DB 3E 14        		ld a,20
3298  98DD 77           		ld (hl),a
3299  98DE 23           		inc hl
3300  98DF 36 00        atr9	ld (hl),0
3301  98E1 C9           		ret
3302  98E2
3303  98E2
3304  98E2
3305  98E2
3306  98E2
3307  98E2              reload_dir
3308  98E2
3309  98E2 F3           			di
3310  98E3
3311  98E3 21 FF 83     			ld hl,numsel
3312  98E6 CD 45 94     			call ROZHOD2
3313  98E9 AF           			xor a
3314  98EA 77           			ld (hl),a
3315  98EB 23           			inc hl
3316  98EC 77           			ld (hl),a
3317  98ED
3318  98ED
3319  98ED CD 36 9B     			call BUFF83
3320  98F0 21 00 A0     			ld hl,#a000
3321  98F3 11 01 A0     			ld de,#a001
3322  98F6 01 00 04     			ld bc,1024
3323  98F9 AF           			xor a
3324  98FA 77           			ld (hl),a
3325  98FB ED B0        			ldir
3326  98FD
3327  98FD
3328  98FD 01 FD 7F     			ld bc,port1       ;the horizontal ROM switch/RAM
3329  9900                                              ;switch I/O ad dress
3330  9900 3A 7D 9C                 ld a,(bankm)      ;sys tem vari able that holds cur rent
3331  9903                                              ;switch state
3332  9903 CB A7                    res 4,a           ;move right to left in hor i zon tal
3333  9905                                              ;ROM switch (3 to 2)
3334  9905
3335  9905 F6 07                      or 7              ;switch in RAM page 7
3336  9907 32 7D 9C                   ld (bankm),a      ;must keep sys tem vari able up to
3337  990A                                              	                  ;date (very im por tant)
3338  990A ED 79                      out (c),a         ;make the switch
3339  990C
3340  990C                                             ;be low BFE0h
3341  990C                                            ;in ter rupts can now be en abled
3342  990C
3343  990C 21 00 A0                   ld hl,catbuff     ;some where for DOS to put the cata
3344  990F                                              ;log
3345  990F 11 01 A0                   ld de,catbuff+1   ;
3346  9912 01 00 04                   ld bc,1024        ;max i mum (for +3DOS) is ac tu ally
3347  9915                                              ;64x13+13 = 845
3348  9915 36 00                      ld (hl),0
3349  9917 ED B0                      ldir              ;make sure at least first en try is
3350  9919 11 00 A0                   ld de,catbuff     ;the lo ca tion to be filled with the
3351  991C              aNextDirItem
3352  991C 06 C8                      ld b,pocetpolozek ;the num ber of en tries in the
3353  991E                                              ;buffer
3354  991E 0E 05                      ld c,%101            ;include sys tem files in the cata
3355  9920 21 7E 9C                   ld hl,stardstar   ;the file name ("*.*")
3356  9923 CD 1E 01                   call dos_catalog  ;call the DOS en try
3357  9926              NEXT0
3358  9926
3359  9926
3360  9926 22 79 9C     			  ld (savehl),hl
3361  9929 DD 22 7B 9C  			  ld (saveix),ix
3362  992D 78           			  ld a,b
3363  992E FE C8        			  cp pocetpolozek
3364  9930 F5           			  push af
3365  9931
3366  9931
3367  9931
3368  9931
3369  9931 21 5B 9B     			  ld hl,ALLFILES
3370  9934 CD 45 94     			  call ROZHOD2
3371  9937 7E           			  ld a,(hl)
3372  9938 23           			  inc hl
3373  9939 66           			  ld h,(hl)
3374  993A 6F           			  ld l,a
3375  993B
3376  993B 58           			  ld e,b
3377  993C 16 00        			  ld d,0
3378  993E 19           			  add hl,de
3379  993F 2B           			  dec hl
3380  9940 E5           			  push hl
3381  9941 21 57 9B     			  ld hl,ALLFILESL
3382  9944 CD 45 94     			  call ROZHOD2
3383  9947 7E           			  ld a,(hl)
3384  9948 23           			  inc hl
3385  9949 66           			  ld h,(hl)
3386  994A 6F           			  ld l,a
3387  994B 22 50 99     			  ld (N0+1),hl
3388  994E E1           			  pop hl
3389  994F 22 00 00     N0			  ld (0),hl
3390  9952
3391  9952
3392  9952
3393  9952 E5           			push hl
3394  9953 D5           			push de
3395  9954 C5           			push bc
3396  9955
3397  9955
3398  9955 2A 89 9C     			ld hl,(dirNum)
3399  9958 19           			add	hl,de
3400  9959 2B           			dec hl
3401  995A 22 89 9C     			ld 	(dirNum),hl
3402  995D C1           			pop bc
3403  995E D1           			pop de
3404  995F E1           			pop hl
3405  9960
3406  9960
3407  9960 3A 88 9C     			  ld a,(FILES)
3408  9963 80           			  add a,b
3409  9964 3D           			  dec a
3410  9965 32 88 9C     			  ld (FILES),a
3411  9968 F1           			  pop af
3412  9969 38 15        			  jr c,acont
3413  996B
3414  996B 78           			  ld a,b
3415  996C B7           			  or a
3416  996D 28 11        			  jr z,acont
3417  996F
3418  996F 3A 0F 80     			  ld a,(virtmem)
3419  9972 FE 01        			  cp 1
3420  9974 28 0A        			  jr z,acont
3421  9976
3422  9976 CD 4C 9B     			  call CountMemory
3423  9979 EB           			  ex de,hl
3424  997A 21 0F 80     			ld hl,virtmem
3425  997D 34           			inc (hl)
3426  997E 18 9C        			jr aNextDirItem
3427  9980              acont
3428  9980 F5                       push af
3429  9981
3430  9981 2A 89 9C     			ld hl,(dirNum)
3431  9984
3432  9984
3433  9984
3434  9984 E1                         pop hl
3435  9985 22 84 9C                   ld (dosret),hl    ;put it where it can be seen from
3436  9988                                              ; NextBASIC
3437  9988 48                         ld c,b            ;move num ber of files in cat a log to
3438  9989                                              ;low byte of BC
3439  9989 06 00                      ld b,0            ;this will be re turned in NextBASIC
3440  998B
3441  998B F3                         di                ;about to ROM/RAM switch so be
3442  998C                                              ;care ful
3443  998C C5                         push bc           ;save num ber of files
3444  998D 01 FD 7F                   ld bc,port1       ;I/O ad dress of hor i zon tal ROM/RAM
3445  9990                                              ;switch
3446  9990 3A 7D 9C                   ld a,(bankm)      ;get cur rent switch state
3447  9993
3448  9993
3449  9993 CB E7                      set 4,a           ;move left to right (ROM 2 to ROM
3450  9995                                              ;3)
3451  9995 E6 F8                      and #F8           ;also want RAM page 0
3452  9997 32 7D 9C                   ld (bankm),a      ;up date the sys tem vari able (very
3453  999A                                              ;im por tant)
3454  999A ED 79                      out (c),a         ;make the switch
3455  999C C1                         pop bc            ;get back the saved num ber of files
3456  999D 0B                         dec bc
3457  999E
3458  999E
3459  999E
3460  999E CD 36 9B     			 call BUFF83
3461  99A1              JKJK
3462  99A1 21 0D A0     			 ld hl,catbuff+13
3463  99A4              askon
3464  99A4 CD 04 9A     			call getAllLFN
3465  99A7 CD 1E 92     			call getdir
3466  99AA 2A 5B 9B     			ld hl,(ALLFILES)
3467  99AD 2B           			dec hl
3468  99AE
3469  99AE E5           			push hl
3470  99AF 21 72 93     			ld hl,downall
3471  99B2 CD 45 94     			call ROZHOD2
3472  99B5 7E           			ld a,(hl)
3473  99B6 23           			inc hl
3474  99B7 66           			ld h,(hl)
3475  99B8 6F           			ld l,a
3476  99B9 D1           			pop de
3477  99BA EB           			ex de,hl
3478  99BB 73           			ld (hl),e
3479  99BC 23           			inc hl
3480  99BD 72           			ld (hl),d
3481  99BE
3482  99BE 21 21 80     			ld hl,pathl
3483  99C1 CD 45 94     			call ROZHOD2
3484  99C4 7E           			ld a,(hl)
3485  99C5 23           			inc hl
3486  99C6 66           			ld h,(hl)
3487  99C7 6F           			ld l,a
3488  99C8 11 03 00     			ld de,3
3489  99CB 19           			add hl,de
3490  99CC 7E           			ld a,(hl)
3491  99CD FE FF        			cp 255
3492  99CF 28 04        			jr z,jetoroot
3493  99D1 3E 01        			ld a,1
3494  99D3 18 01        			jr nenitoroot
3495  99D5 AF           jetoroot	xor a
3496  99D6              nenitoroot
3497  99D6 32 E0 99     			ld (pocatek+1),a
3498  99D9
3499  99D9 21 1D 80     			ld hl,STARTWINL
3500  99DC CD 45 94     			call ROZHOD2
3501  99DF 36 00        pocatek		ld (hl),0
3502  99E1
3503  99E1 C9           			ret
3504  99E2
3505  99E2              dospage
3506  99E2 01 FD 7F     		ld bc,port1
3507  99E5 3A 7D 9C             ld a,(bankm)
3508  99E8 CB A7                res 4,a
3509  99EA F6 07                or 7
3510  99EC 32 7D 9C             ld (bankm),a
3511  99EF ED 79                out (c),a
3512  99F1 C9           		ret
3513  99F2
3514  99F2              basicpage
3515  99F2 01 FD 7F     		ld bc,port1
3516  99F5 3A 7D 9C             ld a,(bankm)
3517  99F8 CB E7                set 4,a
3518  99FA E6 F8                and #F8
3519  99FC 32 7D 9C             ld (bankm),a
3520  99FF ED 79                out (c),a
3521  9A01 C9           		ret
3522  9A02
3523  9A02
3524  9A02 18 1E        lfnpage	defb 24,30
3525  9A04
3526  9A04              getAllLFN
3527  9A04
3528  9A04 21 00 00     			ld hl,0
3529  9A07 22 86 9C     			ld (numLoop),hl
3530  9A0A 21 00 E0     			ld hl,#e000
3531  9A0D 22 63 9A     			ld (InBuff+1),hl
3532  9A10
3533  9A10 21 02 9A     			ld hl,lfnpage
3534  9A13 CD 3D 94     			call ROZHOD
3535  9A16 7E           			ld a,(hl)
3536  9A17
3537  9A17              ;			ld a,24
3538  9A17 32 5E 9A     			ld (Page+1),a
3539  9A1A
3540  9A1A
3541  9A1A CD 36 9B     			call BUFF83
3542  9A1D 21 0D A0     			ld hl,catbuff+#d
3543  9A20 11 6A 9C     			ld de,bufftmp
3544  9A23 01 0D 00     			ld bc,13
3545  9A26 ED B0        			ldir
3546  9A28 CD 47 9B     			call NOBUFF83
3547  9A2B
3548  9A2B 21 0D A0     			ld hl,catbuff+#d
3549  9A2E 22 68 9C     			ld (tmpname),hl
3550  9A31
3551  9A31 21 5B 9B     			ld hl,ALLFILES
3552  9A34 CD 45 94     			call ROZHOD2
3553  9A37 7E           			ld a,(hl)
3554  9A38 23           			inc hl
3555  9A39 46           			ld b,(hl)
3556  9A3A 4F           			ld c,a
3557  9A3B
3558  9A3B C5           LFN1		push bc
3559  9A3C
3560  9A3C 2A 86 9C     			ld hl,(numLoop)
3561  9A3F 23           			inc hl
3562  9A40 22 86 9C     			ld 	(numLoop),hl
3563  9A43 11 98 48     lfnpos		ld de,18560+24	;pozice ve VideoRam
3564  9A46
3565  9A46 F3           			di				;zakaž přerušení, jinak bude problém, nemáme nastránkovanou ZX Rom
3566  9A47
3567  9A47 CD E2 99     			call dospage
3568  9A4A              BFN
3569  9A4A 11 6A 9C     BufferName	ld de,bufftmp			;jmeno souboru
3570  9A4D 21 7E 9C     			ld hl,stardstar
3571  9A50 DD 2A 79 9C  			ld ix,(savehl)
3572  9A54 01 61 9B     			ld bc,LFNNAME
3573  9A57 CD B7 01     			call $01b7
3574  9A5A
3575  9A5A CD F2 99     			call basicpage
3576  9A5D
3577  9A5D 3E 18        Page		ld a,24
3578  9A5F ED 92 57     			nextreg $57,a	;nastrankuj stranku s volnymi daty
3579  9A62
3580  9A62 11 00 E0     InBuff		ld de,#e000		;ukazatel na pamet v bufferu
3581  9A65 21 61 9B     			ld hl,LFNNAME	;buffer pro LFN
3582  9A68 01 05 01     			ld bc,maxlen		;ulož 64 bytů
3583  9A6B ED B0        			ldir
3584  9A6D
3585  9A6D CD 36 9B     			call BUFF83
3586  9A70 2A 68 9C     			ld hl,(tmpname)	;přesuň se na další položku v adresáři
3587  9A73 11 0D 00     			ld de,13
3588  9A76 19           			add hl,de
3589  9A77 22 68 9C     			ld (tmpname),hl	;a ulož adresu, kde se nachází
3590  9A7A 11 6A 9C     			ld de,bufftmp
3591  9A7D 01 0D 00     			ld bc,13
3592  9A80 ED B0        			ldir
3593  9A82 CD 47 9B     			call NOBUFF83
3594  9A85 3A 5E 9A     			ld a,(Page+1)
3595  9A88 ED 92 57     			nextreg $57,a
3596  9A8B 2A 63 9A     			ld hl,(InBuff+1)		;vypočti další adresu v bance ZX Next, kam budu ukládat
3597  9A8E 11 05 01     			ld de,maxlen
3598  9A91 19           			add hl,de
3599  9A92 22 63 9A     			ld (InBuff+1),hl
3600  9A95 11 7F FF     			ld de,#FFFF-128
3601  9A98 B7           			or a
3602  9A99 ED 52        			sbc hl,de
3603  9A9B 38 0A        			jr c,contin
3604  9A9D 21 5E 9A     			ld hl,Page+1
3605  9AA0 34           			inc (hl)
3606  9AA1 21 00 E0     			ld hl,#e000
3607  9AA4 22 63 9A     			ld (InBuff+1),hl
3608  9AA7 C1           contin		pop bc				;zopakuj to pro všechny soubory, které máme načtené...
3609  9AA8 0B           			dec bc
3610  9AA9 78           			ld a,b
3611  9AAA B1           			or c
3612  9AAB 20 8E        			jr nz,LFN1
3613  9AAD              AAA
3614  9AAD ED 91 57 01  			nextreg $57,1			;vráť zpátky stránku, kde se nachází data pro player
3615  9AB1 C9           			ret
3616  9AB2
3617  9AB2
3618  9AB2
3619  9AB2              ; Input: HL = Dividend, C = Divisor, A = 0
3620  9AB2              ; Output: HL = Quotient, A = Remainder
3621  9AB2 AF           deleno		xor a
3622  9AB3 06 10        			ld b,16
3623  9AB5              de
3624  9AB5 29           			add	hl,hl
3625  9AB6 17           			rla
3626  9AB7 B9           			cp	c
3627  9AB8 38 02        			jr	c,de1
3628  9ABA 91           			sub	c
3629  9ABB 2C           			inc	l
3630  9ABC 10 F7        de1			djnz de
3631  9ABE C9           			ret
3632  9ABF
3633  9ABF 00 00        addrlfn		dw 0
3634  9AC1
3635  9AC1              FINDLFN
3636  9AC1
3637  9AC1 E5           			push hl
3638  9AC2
3639  9AC2 21 02 9A     			ld hl,lfnpage
3640  9AC5 CD 3D 94     			call ROZHOD
3641  9AC8 7E           			ld a,(hl)
3642  9AC9 32 F0 9A     			ld (lfnroot+1),a
3643  9ACC
3644  9ACC 21 61 9B     			ld hl,LFNNAME
3645  9ACF 11 62 9B     			ld de,LFNNAME+1
3646  9AD2 01 05 01     			ld bc,261
3647  9AD5 3E 20        			ld a,32
3648  9AD7 77           			ld (hl),a
3649  9AD8 ED B0        			ldir
3650  9ADA
3651  9ADA E1           			pop hl
3652  9ADB B7           			or a
3653  9ADC 11 1F 00     			ld de,31
3654  9ADF ED 52        			sbc hl,de
3655  9AE1 19           			add hl,de
3656  9AE2 38 07        			jr c,prvni
3657  9AE4 0E 1F        			ld c,31
3658  9AE6 CD B2 9A     			call deleno
3659  9AE9 18 03        		    jr oddeleno
3660  9AEB 7D           prvni		ld a,l
3661  9AEC 2E 00        			ld l,0
3662  9AEE
3663  9AEE F5           oddeleno	push af
3664  9AEF 3E 18        lfnroot		ld a,24
3665  9AF1 85           			add a,l
3666  9AF2 ED 92 57     			nextreg $57,a
3667  9AF5 C1           			pop bc
3668  9AF6 11 05 01     			ld de,maxlen
3669  9AF9 78           			ld a,b
3670  9AFA B7           			or a
3671  9AFB 21 00 E0     			ld hl,$e000
3672  9AFE 28 03        			jr z,prvnizaznam
3673  9B00              lll
3674  9B00 19           			add hl,de
3675  9B01 10 FD        			djnz lll
3676  9B03
3677  9B03              prvnizaznam
3678  9B03 22 BF 9A     			ld (addrlfn),hl
3679  9B06 11 61 9B     			ld de,LFNNAME
3680  9B09 01 05 01     			ld bc,maxlen
3681  9B0C              popop
3682  9B0C 7E           			ld a,(hl)
3683  9B0D FE FF        			cp 255
3684  9B0F 28 08        			jr z,kon
3685  9B11 12           			ld (de),a
3686  9B12 23           			inc hl
3687  9B13 13           			inc de
3688  9B14 0B           			dec bc
3689  9B15 78           			ld a,b
3690  9B16 B1           			or c
3691  9B17 20 F3        			jr nz,popop
3692  9B19              kon
3693  9B19 21 61 9B     			ld hl,LFNNAME
3694  9B1C 06 28        			ld b,40
3695  9B1E              F22222
3696  9B1E 7E           			ld a,(hl)
3697  9B1F FE FF        			cp 255
3698  9B21 CC 31 9B     			call z,setspace
3699  9B24 23           			inc hl
3700  9B25 10 F7        			djnz F22222
3701  9B27 21 61 9B     lfnend		ld hl,LFNNAME
3702  9B2A
3703  9B2A 11 C2 50     lfnat		ld de,20672+2
3704  9B2D 21 61 9B     			ld hl,LFNNAME
3705  9B30 C9           			ret
3706  9B31
3707  9B31              setspace
3708  9B31 36 20        		ld (hl),32
3709  9B33 C9           		ret
3710  9B34
3711  9B34 14           buffl		defb 20
3712  9B35 15           buffr		defb 21
3713  9B36
3714  9B36              BUFF83
3715  9B36 E5           			push hl
3716  9B37 D5           			push de
3717  9B38 F5           			push af
3718  9B39 21 34 9B     			ld hl,buffl
3719  9B3C CD 3D 94     			call ROZHOD
3720  9B3F 7E           			ld a,(hl)
3721  9B40 ED 92 55     			nextreg $55,a	;nastrankuj data pro spravne okno
3722  9B43 F1           			pop af
3723  9B44 D1           			pop de
3724  9B45 E1           			pop hl
3725  9B46 C9           			ret
3726  9B47
3727  9B47              NOBUFF83
3728  9B47 ED 91 55 05  			nextreg $55,5
3729  9B4B C9           			ret
3730  9B4C              CountMemory
3731  9B4C 11 1B 0A     			ld de,13*(pocetpolozek-1)
3732  9B4F 21 00 A0     Count11		ld hl,catbuff
3733  9B52 19           			add hl,de
3734  9B53 22 50 9B     			ld (Count11+1),hl
3735  9B56
3736  9B56 C9           			ret
3737  9B57
3738  9B57 5B 9B 5D 9B  ALLFILESL  defw ALLFILES, ALLFILES2
3739  9B5B
3740  9B5B 00 00        ALLFILES    defw 0
3741  9B5D 00 00        ALLFILES2	defw 0
3742  9B5F 00 00        ALLFILESR	defw 0
3743  9B61 00 00 00...  LFNNAME		defs 263
3744  9C68 00 00        tmpname		ds 2
3745  9C6A              BFT
3746  9C6A 00 00 00...  bufftmp		ds 15
3747  9C79              M_P3DOS	equ $94
3748  9C79 00 00        savehl		defw 0
3749  9C7B 00 00        saveix		defw 0
3750  9C7D 00           bankm       defb 0 ;  equ  #5B5C         ;sys tem vari able that holds the
3751  9C7E
3752  9C7E              stardstar:
3753  9C7E 2A 2E 3F 3F                defb "*.???",#FF
3753  9C82 3F FF
3754  9C84              dosret:
3755  9C84 00 00                      defw 0
3756  9C86 00 00        numLoop		defw 0
3757  9C88 00           FILES    defb 0
3758  9C89 00 00        dirNum	 defw 0
3759  9C8B              tilemapPalette:
3760  9C8B 03 01                        db  %000'000'11,1       ; 0 modra(paper)					0
3761  9C8D 92 01                        db  %100'100'10,1       ; 1 light grey (25% ink)
3762  9C8F 49 01                        db  %010'010'01,1       ; 2 dark grey (75% ink)
3763  9C91 B7 00                        db  %101'101'11,0       ; 0 white-blueish (ink)
3764  9C93 C4 01                        db  %110'001'00,1       ; 4 red
3765  9C95 F8 01                        db  %111'110'00,1       ; 5 yellow
3766  9C97 10 00                        db  %000'100'00,0       ; 6 green
3767  9C99 00 00 00...  				ds 18
3768  9CAB 00 00        				db  %000'000'00,0       ; 0 modra (paper)					16
3769  9CAD 92 01                        db  %100'100'10,1       ; 1 light grey (25% ink)
3770  9CAF 49 01                        db  %010'010'01,1       ; 2 dark grey (75% ink)
3771  9CB1 B7 00        				db  %101'101'11,0       ; 0 white-blueish (ink)
3772  9CB3 C4 01                        db  %110'001'00,1       ; 4 red
3773  9CB5 F8 01                        db  %111'110'00,1       ; 5 yellow
3774  9CB7 10 00                        db  %000'100'00,0       ; 6 green
3775  9CB9 00 00 00...  				ds 18
3776  9CCB 0E 01        				db  %000'011'10,1       ; 0 modra (paper)					32
3777  9CCD 92 01                        db  %100'100'10,1       ; 1 light grey (25% ink)
3778  9CCF 49 01                        db  %010'010'01,1       ; 2 dark grey (75% ink)
3779  9CD1 B7 00        				db  %101'101'11,0       ; 0 white-blueish (ink)
3780  9CD3 C4 01                        db  %110'001'00,1       ; 4 red
3781  9CD5 F8 01                        db  %111'110'00,1       ; 5 yellow
3782  9CD7 10 00                        db  %000'100'00,0       ; 6 green
3783  9CD9 00 00 00...  				ds 18
3784  9CEB FF 01        				db  %111'111'11,1       ; 0 modra (paper)					48
3785  9CED 92 01                        db  %100'100'10,1       ; 1 light grey (25% ink)
3786  9CEF 49 01                        db  %010'010'01,1       ; 2 dark grey (75% ink)
3787  9CF1 00 00        				db  %000'000'000,0       ; 0 white-blueish (ink)
3788  9CF3 C4 01                        db  %110'001'00,1       ; 4 red
3789  9CF5 F8 01                        db  %111'110'00,1       ; 5 yellow
3790  9CF7 10 00                        db  %000'100'00,0       ; 6 green
3791  9CF9 00 00 00...  				ds 18
3792  9D0B BD 01        				db  %101'111'01,1       ; 0 zluta (paper)					64
3793  9D0D 92 01                        db  %100'100'10,1       ; 1 light grey (25% ink)
3794  9D0F 49 01                        db  %010'010'01,1       ; 2 dark grey (75% ink)
3795  9D11 00 00        				db  %000'000'00,0       ; 0 white-blueish (ink)
3796  9D13 C4 01                        db  %110'001'00,1       ; 4 red
3797  9D15 F8 01                        db  %111'110'00,1       ; 5 yellow
3798  9D17 10 00                        db  %000'100'00,0       ; 6 green
3799  9D19 00 00 00...  				ds 18
3800  9D2B 00 00        				db  %000'000'00,0       ; 0 zluta (paper)					80
3801  9D2D 92 01                        db  %100'100'10,1       ; 1 light grey (25% ink)
3802  9D2F 49 01                        db  %010'010'01,1       ; 2 dark grey (75% ink)
3803  9D31 FF 01        				db  %111'111'11,1       ; 0 white-blueish (ink)
3804  9D33 C4 01                        db  %110'001'00,1       ; 4 red
3805  9D35 F8 01                        db  %111'110'00,1       ; 5 yellow
3806  9D37 10 00                        db  %000'100'00,0       ; 6 green
3807  9D39 00 00 00...  				ds 18
3808  9D4B
3809  9D4B
3810  9D4B
3811  9D4B
3812  9D4B              tilemapPalette_SZ:  EQU $ - tilemapPalette
3813  9D4B
3814  9D4B
3815  9D4B 00 00 00...  tilemapFont:    ds   16*32
3816  9F4B                                                                                  ; 24 chars skipped (3*256)
3817  9F4B                                                                                  ; starts at character 32 - 4 dir_arrows - 3 color dots - 1 reserve = 24
3818  9F4B
3819  9F4B              FILEBUFF
3820  9F4B              tilemapFont_char24:
3821  9F4B                          INCLUDE "tilemap_font_8x6.i.asm"
# file opened: tilemap_font_8x6.i.asm
   1+ 9F4B              specialchar
   2+ 9F4B              ;rovna horni cara
   3+ 9F4B 00 00 00 00  	HEX 00000000
   4+ 9F4F 33 33 33 33  	HEX 33333333
   5+ 9F53 00 00 00 00  	HEX 00000000
   6+ 9F57 33 33 33 33  	HEX 33333333
   7+ 9F5B 00 00 00 00  	HEX 00000000
   8+ 9F5F 00 00 00 00  	HEX 00000000
   9+ 9F63 00 00 00 00  	HEX 00000000
  10+ 9F67 00 00 00 00  	HEX 00000000
  11+ 9F6B              ;rovna spodni cara
  12+ 9F6B 00 00 00 00  	HEX 00000000
  13+ 9F6F 00 00 00 00  	HEX 00000000
  14+ 9F73 00 00 00 00  	HEX 00000000
  15+ 9F77 00 00 00 00  	HEX 00000000
  16+ 9F7B 33 33 33 33  	HEX 33333333
  17+ 9F7F 00 00 00 00  	HEX 00000000
  18+ 9F83 33 33 33 33  	HEX 33333333
  19+ 9F87 00 00 00 00  	HEX 00000000
  20+ 9F8B
  21+ 9F8B              ;levy horni roh
  22+ 9F8B 00 00 00 00  	HEX 00000000
  23+ 9F8F 03 33 33 33  	HEX 03333333
  24+ 9F93 03 00 00 00  	HEX 03000000
  25+ 9F97 03 03 33 33  	HEX 03033333
  26+ 9F9B 03 03 00 00  	HEX 03030000
  27+ 9F9F 03 03 00 00  	HEX 03030000
  28+ 9FA3 03 03 00 00  	HEX 03030000
  29+ 9FA7 03 03 00 00  	HEX 03030000
  30+ 9FAB              ;pravy horni roh
  31+ 9FAB 00 00 00 00  	HEX 00000000
  32+ 9FAF 33 33 33 30  	HEX 33333330
  33+ 9FB3 00 00 00 30  	HEX 00000030
  34+ 9FB7 33 33 30 30  	HEX 33333030
  35+ 9FBB 00 00 30 30  	HEX 00003030
  36+ 9FBF 00 00 30 30  	HEX 00003030
  37+ 9FC3 00 00 30 30  	HEX 00003030
  38+ 9FC7 00 00 30 30  	HEX 00003030
  39+ 9FCB
  40+ 9FCB              ;20 - pravy spodni roh
  41+ 9FCB 00 00 30 30  	HEX 00003030
  42+ 9FCF 00 00 30 30  	HEX 00003030
  43+ 9FD3 00 00 30 30  	HEX 00003030
  44+ 9FD7 00 00 30 30  	HEX 00003030
  45+ 9FDB 33 33 30 30  	HEX 33333030
  46+ 9FDF 00 00 00 30  	HEX 00000030
  47+ 9FE3 33 33 33 30  	HEX 33333330
  48+ 9FE7 00 00 00 00  	HEX 00000000
  49+ 9FEB              ;21 - levy spodni roh
  50+ 9FEB 03 03 00 00  	HEX 03030000
  51+ 9FEF 03 03 00 00  	HEX 03030000
  52+ 9FF3 03 03 00 00  	HEX 03030000
  53+ 9FF7 03 03 00 00  	HEX 03030000
  54+ 9FFB 03 03 33 33  	HEX 03033333
  55+ 9FFF 03 00 00 00  	HEX 03000000
  56+ A003 03 33 33 33  	HEX 03333333
  57+ A007 00 00 00 00  	HEX 00000000
  58+ A00B
  59+ A00B              ;22 - rovna leva cara
  60+ A00B 03 03 00 00  	HEX 03030000
  61+ A00F 03 03 00 00  	HEX 03030000
  62+ A013 03 03 00 00  	HEX 03030000
  63+ A017 03 03 00 00  	HEX 03030000
  64+ A01B 03 03 00 00  	HEX 03030000
  65+ A01F 03 03 00 00  	HEX 03030000
  66+ A023 03 03 00 00  	HEX 03030000
  67+ A027 03 03 00 00  	HEX 03030000
  68+ A02B              ;23 - rovna prava cara
  69+ A02B 00 00 30 30  	HEX 00003030
  70+ A02F 00 00 30 30  	HEX 00003030
  71+ A033 00 00 30 30  	HEX 00003030
  72+ A037 00 00 30 30  	HEX 00003030
  73+ A03B 00 00 30 30  	HEX 00003030
  74+ A03F 00 00 30 30  	HEX 00003030
  75+ A043 00 00 30 30  	HEX 00003030
  76+ A047 00 00 30 30  	HEX 00003030
  77+ A04B              specialchar2
  78+ A04B              ;	HEX 00000000
  79+ A04B              ;HEX 00000000
  80+ A04B
  81+ A04B              ; 24 - full invisible (all red/yellow stripes)
  82+ A04B 55 55 44 44  	HEX	55554444
  83+ A04F 55 44 44 55  	HEX	55444455
  84+ A053 44 44 55 55  	HEX	44445555
  85+ A057 44 55 55 44  	HEX	44555544
  86+ A05B 55 55 44 44  	HEX	55554444
  87+ A05F 55 44 44 55  	HEX	55444455
  88+ A063 44 44 55 55  	HEX	44445555
  89+ A067 44 55 55 44  	HEX	44555544
  90+ A06B              ; 25 - red dot
  91+ A06B 00 00 00 00  	HEX	00000000 00444000 04444400
  91+ A06F 00 44 40 00
  91+ A073 04 44 44 00
  92+ A077 04 44 44 00  	HEX	04444400 00444000 00000000
  92+ A07B 00 44 40 00
  92+ A07F 00 00 00 00
  93+ A083 00 00 00 00  	HEX	00000000 00000000
  93+ A087 00 00 00 00
  94+ A08B              ; 26 - yellow dot
  95+ A08B 00 00 00 00  	HEX	00000000 00555000 05555500
  95+ A08F 00 55 50 00
  95+ A093 05 55 55 00
  96+ A097 05 55 55 00  	HEX	05555500 00555000 00000000
  96+ A09B 00 55 50 00
  96+ A09F 00 00 00 00
  97+ A0A3 00 00 00 00  	HEX	00000000 00000000
  97+ A0A7 00 00 00 00
  98+ A0AB              ; 27 - green dot
  99+ A0AB 00 00 00 00  	HEX	00000000 00666000 06666600
  99+ A0AF 00 66 60 00
  99+ A0B3 06 66 66 00
 100+ A0B7 06 66 66 00  	HEX	06666600 00666000 00000000
 100+ A0BB 00 66 60 00
 100+ A0BF 00 00 00 00
 101+ A0C3 00 00 00 00  	HEX	00000000 00000000
 101+ A0C7 00 00 00 00
 102+ A0CB              ; 28 - left arrow
 103+ A0CB 00 00 00 00  	HEX	00000000
 104+ A0CF 00 03 00 00  	HEX	00030000
 105+ A0D3 00 30 00 20  	HEX	00300020
 106+ A0D7 03 00 02 00  	HEX	03000200
 107+ A0DB 00 30 00 20  	HEX	00300020
 108+ A0DF 00 03 00 00  	HEX	00030000
 109+ A0E3 00 00 00 00  	HEX	00000000
 110+ A0E7 00 00 00 00  	HEX	00000000
 111+ A0EB              ; 29 - top arrow
 112+ A0EB 00 00 00 00  	HEX	00000000
 113+ A0EF 00 03 00 00  	HEX	00030000
 114+ A0F3 00 30 30 00  	HEX	00303000
 115+ A0F7 03 00 03 00  	HEX	03000300
 116+ A0FB 30 02 00 30  	HEX	30020030
 117+ A0FF 00 20 20 00  	HEX	00202000
 118+ A103 02 00 02 00  	HEX	02000200
 119+ A107 00 00 00 00  	HEX	00000000
 120+ A10B              ; 30 - right arrow
 121+ A10B 00 00 00 00  	HEX	00000000
 122+ A10F 00 00 30 00  	HEX	00003000
 123+ A113 02 00 03 00  	HEX	02000300
 124+ A117 00 20 00 30  	HEX	00200030
 125+ A11B 02 00 03 00  	HEX	02000300
 126+ A11F 00 00 30 00  	HEX	00003000
 127+ A123 00 00 00 00  	HEX	00000000
 128+ A127 00 00 00 00  	HEX	00000000
 129+ A12B              ; 31 - bottom arrow
 130+ A12B 00 00 00 00  	HEX	00000000
 131+ A12F 02 00 02 00  	HEX	02000200
 132+ A133 00 20 20 00  	HEX	00202000
 133+ A137 30 02 00 30  	HEX	30020030
 134+ A13B 03 00 03 00  	HEX	03000300
 135+ A13F 00 30 30 00  	HEX	00303000
 136+ A143 00 03 00 00  	HEX	00030000
 137+ A147 00 00 00 00  	HEX	00000000
 138+ A14B              ; 32 - space (regular ZX charset onward)
 139+ A14B 00 00 00 00  	HEX	00000000 00000000 00000000
 139+ A14F 00 00 00 00
 139+ A153 00 00 00 00
 140+ A157 00 00 00 00  	HEX	00000000 00000000 00000000
 140+ A15B 00 00 00 00
 140+ A15F 00 00 00 00
 141+ A163 00 00 00 00  	HEX	00000000 00000000
 141+ A167 00 00 00 00
 142+ A16B 00 32 00 00  	HEX	00320000 00320000 00320000
 142+ A16F 00 32 00 00
 142+ A173 00 32 00 00
 143+ A177 00 00 00 00  	HEX	00000000 00320000 00000000
 143+ A17B 00 32 00 00
 143+ A17F 00 00 00 00
 144+ A183 00 00 00 00  	HEX	00000000 00000000
 144+ A187 00 00 00 00
 145+ A18B 02 30 23 00  	HEX	02302300 01301300 03003000
 145+ A18F 01 30 13 00
 145+ A193 03 00 30 00
 146+ A197 00 00 00 00  	HEX	00000000 00000000 00000000
 146+ A19B 00 00 00 00
 146+ A19F 00 00 00 00
 147+ A1A3 00 00 00 00  	HEX	00000000 00000000
 147+ A1A7 00 00 00 00
 148+ A1AB 00 30 30 00  	HEX	00303000 03333300 00303000
 148+ A1AF 03 33 33 00
 148+ A1B3 00 30 30 00
 149+ A1B7 03 33 33 00  	HEX	03333300 00303000 00000000
 149+ A1BB 00 30 30 00
 149+ A1BF 00 00 00 00
 150+ A1C3 00 00 00 00  	HEX	00000000 00000000
 150+ A1C7 00 00 00 00
 151+ A1CB 00 33 33 00  	HEX	00333300 03030000 00333000
 151+ A1CF 03 03 00 00
 151+ A1D3 00 33 30 00
 152+ A1D7 00 03 03 00  	HEX	00030300 03333000 00030000
 152+ A1DB 03 33 30 00
 152+ A1DF 00 03 00 00
 153+ A1E3 00 00 00 00  	HEX	00000000 00000000
 153+ A1E7 00 00 00 00
 154+ A1EB 03 30 03 00  	HEX	03300300 03203000 00030000
 154+ A1EF 03 20 30 00
 154+ A1F3 00 03 00 00
 155+ A1F7 00 30 33 00  	HEX	00303300 03003200 00000000
 155+ A1FB 03 00 32 00
 155+ A1FF 00 00 00 00
 156+ A203 00 00 00 00  	HEX	00000000 00000000
 156+ A207 00 00 00 00
 157+ A20B 00 30 00 00  	HEX	00300000 03020000 00330300
 157+ A20F 03 02 00 00
 157+ A213 00 33 03 00
 158+ A217 03 00 30 00  	HEX	03003000 00330300 00000000
 158+ A21B 00 33 03 00
 158+ A21F 00 00 00 00
 159+ A223 00 00 00 00  	HEX	00000000 00000000
 159+ A227 00 00 00 00
 160+ A22B 00 23 00 00  	HEX	00230000 00130000 00300000
 160+ A22F 00 13 00 00
 160+ A233 00 30 00 00
 161+ A237 00 00 00 00  	HEX	00000000 00000000 00000000
 161+ A23B 00 00 00 00
 161+ A23F 00 00 00 00
 162+ A243 00 00 00 00  	HEX	00000000 00000000
 162+ A247 00 00 00 00
 163+ A24B 00 00 03 00  	HEX	00000300 00003000 00003000
 163+ A24F 00 00 30 00
 163+ A253 00 00 30 00
 164+ A257 00 00 30 00  	HEX	00003000 00000300 00000000
 164+ A25B 00 00 03 00
 164+ A25F 00 00 00 00
 165+ A263 00 00 00 00  	HEX	00000000 00000000
 165+ A267 00 00 00 00
 166+ A26B 03 00 00 00  	HEX	03000000 00300000 00300000
 166+ A26F 00 30 00 00
 166+ A273 00 30 00 00
 167+ A277 00 30 00 00  	HEX	00300000 03000000 00000000
 167+ A27B 03 00 00 00
 167+ A27F 00 00 00 00
 168+ A283 00 00 00 00  	HEX	00000000 00000000
 168+ A287 00 00 00 00
 169+ A28B 01 30 31 00  	HEX	01303100 00232000 03333300
 169+ A28F 00 23 20 00
 169+ A293 03 33 33 00
 170+ A297 00 23 20 00  	HEX	00232000 01303100 00000000
 170+ A29B 01 30 31 00
 170+ A29F 00 00 00 00
 171+ A2A3 00 00 00 00  	HEX	00000000 00000000
 171+ A2A7 00 00 00 00
 172+ A2AB 00 03 00 00  	HEX	00030000 00030000 03333300
 172+ A2AF 00 03 00 00
 172+ A2B3 03 33 33 00
 173+ A2B7 00 03 00 00  	HEX	00030000 00030000 00000000
 173+ A2BB 00 03 00 00
 173+ A2BF 00 00 00 00
 174+ A2C3 00 00 00 00  	HEX	00000000 00000000
 174+ A2C7 00 00 00 00
 175+ A2CB 00 00 00 00  	HEX	00000000 00000000 00000000
 175+ A2CF 00 00 00 00
 175+ A2D3 00 00 00 00
 176+ A2D7 01 30 00 00  	HEX	01300000 03000000 00000000
 176+ A2DB 03 00 00 00
 176+ A2DF 00 00 00 00
 177+ A2E3 00 00 00 00  	HEX	00000000 00000000
 177+ A2E7 00 00 00 00
 178+ A2EB 00 00 00 00  	HEX	00000000 00000000 03333300
 178+ A2EF 00 00 00 00
 178+ A2F3 03 33 33 00
 179+ A2F7 00 00 00 00  	HEX	00000000 00000000 00000000
 179+ A2FB 00 00 00 00
 179+ A2FF 00 00 00 00
 180+ A303 00 00 00 00  	HEX	00000000 00000000
 180+ A307 00 00 00 00
 181+ A30B 00 00 00 00  	HEX	00000000 00000000 00000000
 181+ A30F 00 00 00 00
 181+ A313 00 00 00 00
 182+ A317 00 00 00 00  	HEX	00000000 03200000 00000000
 182+ A31B 03 20 00 00
 182+ A31F 00 00 00 00
 183+ A323 00 00 00 00  	HEX	00000000 00000000
 183+ A327 00 00 00 00
 184+ A32B 00 00 03 00  	HEX	00000300 00003000 00030000
 184+ A32F 00 00 30 00
 184+ A333 00 03 00 00
 185+ A337 00 30 00 00  	HEX	00300000 03000000 00000000
 185+ A33B 03 00 00 00
 185+ A33F 00 00 00 00
 186+ A343 00 00 00 00  	HEX	00000000 00000000
 186+ A347 00 00 00 00
 187+ A34B 00 33 30 00  	HEX	00333000 03102300 03020300
 187+ A34F 03 10 23 00
 187+ A353 03 02 03 00
 188+ A357 03 20 13 00  	HEX	03201300 00333000 00000000
 188+ A35B 00 33 30 00
 188+ A35F 00 00 00 00
 189+ A363 00 00 00 00  	HEX	00000000 00000000
 189+ A367 00 00 00 00
 190+ A36B 00 02 30 00  	HEX	00023000 00233000 00013000
 190+ A36F 00 23 30 00
 190+ A373 00 01 30 00
 191+ A377 00 01 30 00  	HEX	00013000 00133300 00000000
 191+ A37B 00 13 33 00
 191+ A37F 00 00 00 00
 192+ A383 00 00 00 00  	HEX	00000000 00000000
 192+ A387 00 00 00 00
 193+ A38B 02 33 30 00  	HEX	02333000 01001300 00333000
 193+ A38F 01 00 13 00
 193+ A393 00 33 30 00
 194+ A397 03 10 00 00  	HEX	03100000 03333300 00000000
 194+ A39B 03 33 33 00
 194+ A39F 00 00 00 00
 195+ A3A3 00 00 00 00  	HEX	00000000 00000000
 195+ A3A7 00 00 00 00
 196+ A3AB 02 33 30 00  	HEX	02333000 00001300 00333000
 196+ A3AF 00 00 13 00
 196+ A3B3 00 33 30 00
 197+ A3B7 00 00 13 00  	HEX	00001300 02333000 00000000
 197+ A3BB 02 33 30 00
 197+ A3BF 00 00 00 00
 198+ A3C3 00 00 00 00  	HEX	00000000 00000000
 198+ A3C7 00 00 00 00
 199+ A3CB 00 03 30 00  	HEX	00033000 00313000 03013000
 199+ A3CF 00 31 30 00
 199+ A3D3 03 01 30 00
 200+ A3D7 03 33 33 00  	HEX	03333300 00013000 00000000
 200+ A3DB 00 01 30 00
 200+ A3DF 00 00 00 00
 201+ A3E3 00 00 00 00  	HEX	00000000 00000000
 201+ A3E7 00 00 00 00
 202+ A3EB 03 33 33 00  	HEX	03333300 03000000 03333000
 202+ A3EF 03 00 00 00
 202+ A3F3 03 33 30 00
 203+ A3F7 00 00 13 00  	HEX	00001300 02333000 00000000
 203+ A3FB 02 33 30 00
 203+ A3FF 00 00 00 00
 204+ A403 00 00 00 00  	HEX	00000000 00000000
 204+ A407 00 00 00 00
 205+ A40B 00 33 30 00  	HEX	00333000 03100000 03333000
 205+ A40F 03 10 00 00
 205+ A413 03 33 30 00
 206+ A417 03 10 13 00  	HEX	03101300 00333000 00000000
 206+ A41B 00 33 30 00
 206+ A41F 00 00 00 00
 207+ A423 00 00 00 00  	HEX	00000000 00000000
 207+ A427 00 00 00 00
 208+ A42B 03 33 32 00  	HEX	03333200 00003200 00032000
 208+ A42F 00 00 32 00
 208+ A433 00 03 20 00
 209+ A437 00 32 00 00  	HEX	00320000 00320000 00000000
 209+ A43B 00 32 00 00
 209+ A43F 00 00 00 00
 210+ A443 00 00 00 00  	HEX	00000000 00000000
 210+ A447 00 00 00 00
 211+ A44B 00 33 30 00  	HEX	00333000 03101300 00333000
 211+ A44F 03 10 13 00
 211+ A453 00 33 30 00
 212+ A457 03 10 13 00  	HEX	03101300 00333000 00000000
 212+ A45B 00 33 30 00
 212+ A45F 00 00 00 00
 213+ A463 00 00 00 00  	HEX	00000000 00000000
 213+ A467 00 00 00 00
 214+ A46B 00 33 30 00  	HEX	00333000 03101300 00333300
 214+ A46F 03 10 13 00
 214+ A473 00 33 33 00
 215+ A477 00 00 13 00  	HEX	00001300 00333000 00000000
 215+ A47B 00 33 30 00
 215+ A47F 00 00 00 00
 216+ A483 00 00 00 00  	HEX	00000000 00000000
 216+ A487 00 00 00 00
 217+ A48B 00 00 00 00  	HEX	00000000 00320000 00000000
 217+ A48F 00 32 00 00
 217+ A493 00 00 00 00
 218+ A497 00 32 00 00  	HEX	00320000 00000000 00000000
 218+ A49B 00 00 00 00
 218+ A49F 00 00 00 00
 219+ A4A3 00 00 00 00  	HEX	00000000 00000000
 219+ A4A7 00 00 00 00
 220+ A4AB 00 00 00 00  	HEX	00000000 00230000 00000000
 220+ A4AF 00 23 00 00
 220+ A4B3 00 00 00 00
 221+ A4B7 00 13 00 00  	HEX	00130000 00300000 00000000
 221+ A4BB 00 30 00 00
 221+ A4BF 00 00 00 00
 222+ A4C3 00 00 00 00  	HEX	00000000 00000000
 222+ A4C7 00 00 00 00
 223+ A4CB 00 03 10 00  	HEX	00031000 00310000 03100000
 223+ A4CF 00 31 00 00
 223+ A4D3 03 10 00 00
 224+ A4D7 00 31 00 00  	HEX	00310000 00031000 00000000
 224+ A4DB 00 03 10 00
 224+ A4DF 00 00 00 00
 225+ A4E3 00 00 00 00  	HEX	00000000 00000000
 225+ A4E7 00 00 00 00
 226+ A4EB 00 00 00 00  	HEX	00000000 03333300 00000000
 226+ A4EF 03 33 33 00
 226+ A4F3 00 00 00 00
 227+ A4F7 03 33 33 00  	HEX	03333300 00000000 00000000
 227+ A4FB 00 00 00 00
 227+ A4FF 00 00 00 00
 228+ A503 00 00 00 00  	HEX	00000000 00000000
 228+ A507 00 00 00 00
 229+ A50B 01 30 00 00  	HEX	01300000 00130000 00013000
 229+ A50F 00 13 00 00
 229+ A513 00 01 30 00
 230+ A517 00 13 00 00  	HEX	00130000 01300000 00000000
 230+ A51B 01 30 00 00
 230+ A51F 00 00 00 00
 231+ A523 00 00 00 00  	HEX	00000000 00000000
 231+ A527 00 00 00 00
 232+ A52B 02 33 00 00  	HEX	02330000 00013000 00330000
 232+ A52F 00 01 30 00
 232+ A533 00 33 00 00
 233+ A537 00 00 00 00  	HEX	00000000 00310000 00000000
 233+ A53B 00 31 00 00
 233+ A53F 00 00 00 00
 234+ A543 00 00 00 00  	HEX	00000000 00000000
 234+ A547 00 00 00 00
 235+ A54B 00 33 30 00  	HEX	00333000 03130300 03023200
 235+ A54F 03 13 03 00
 235+ A553 03 02 32 00
 236+ A557 03 10 00 00  	HEX	03100000 00333000 00000000
 236+ A55B 00 33 30 00
 236+ A55F 00 00 00 00
 237+ A563 00 00 00 00  	HEX	00000000 00000000
 237+ A567 00 00 00 00
 238+ A56B 00 33 30 00  	HEX	00333000 03101300 03333300
 238+ A56F 03 10 13 00
 238+ A573 03 33 33 00
 239+ A577 03 00 03 00  	HEX	03000300 03000300 00000000
 239+ A57B 03 00 03 00
 239+ A57F 00 00 00 00
 240+ A583 00 00 00 00  	HEX	00000000 00000000
 240+ A587 00 00 00 00
 241+ A58B 03 33 30 00  	HEX	03333000 03001300 03333000
 241+ A58F 03 00 13 00
 241+ A593 03 33 30 00
 242+ A597 03 00 13 00  	HEX	03001300 03333000 00000000
 242+ A59B 03 33 30 00
 242+ A59F 00 00 00 00
 243+ A5A3 00 00 00 00  	HEX	00000000 00000000
 243+ A5A7 00 00 00 00
 244+ A5AB 00 33 32 00  	HEX	00333200 03100100 03000000
 244+ A5AF 03 10 01 00
 244+ A5B3 03 00 00 00
 245+ A5B7 03 10 01 00  	HEX	03100100 00333200 00000000
 245+ A5BB 00 33 32 00
 245+ A5BF 00 00 00 00
 246+ A5C3 00 00 00 00  	HEX	00000000 00000000
 246+ A5C7 00 00 00 00
 247+ A5CB 03 33 30 00  	HEX	03333000 03001300 03000300
 247+ A5CF 03 00 13 00
 247+ A5D3 03 00 03 00
 248+ A5D7 03 00 13 00  	HEX	03001300 03333000 00000000
 248+ A5DB 03 33 30 00
 248+ A5DF 00 00 00 00
 249+ A5E3 00 00 00 00  	HEX	00000000 00000000
 249+ A5E7 00 00 00 00
 250+ A5EB 03 33 33 00  	HEX	03333300 03000000 03330000
 250+ A5EF 03 00 00 00
 250+ A5F3 03 33 00 00
 251+ A5F7 03 00 00 00  	HEX	03000000 03333300 00000000
 251+ A5FB 03 33 33 00
 251+ A5FF 00 00 00 00
 252+ A603 00 00 00 00  	HEX	00000000 00000000
 252+ A607 00 00 00 00
 253+ A60B 03 33 33 00  	HEX	03333300 03000000 03330000
 253+ A60F 03 00 00 00
 253+ A613 03 33 00 00
 254+ A617 03 00 00 00  	HEX	03000000 03000000 00000000
 254+ A61B 03 00 00 00
 254+ A61F 00 00 00 00
 255+ A623 00 00 00 00  	HEX	00000000 00000000
 255+ A627 00 00 00 00
 256+ A62B 00 33 32 00  	HEX	00333200 03100000 03003300
 256+ A62F 03 10 00 00
 256+ A633 03 00 33 00
 257+ A637 03 10 03 00  	HEX	03100300 00333100 00000000
 257+ A63B 00 33 31 00
 257+ A63F 00 00 00 00
 258+ A643 00 00 00 00  	HEX	00000000 00000000
 258+ A647 00 00 00 00
 259+ A64B 03 00 03 00  	HEX	03000300 03000300 03333300
 259+ A64F 03 00 03 00
 259+ A653 03 33 33 00
 260+ A657 03 00 03 00  	HEX	03000300 03000300 00000000
 260+ A65B 03 00 03 00
 260+ A65F 00 00 00 00
 261+ A663 00 00 00 00  	HEX	00000000 00000000
 261+ A667 00 00 00 00
 262+ A66B 00 33 30 00  	HEX	00333000 00030000 00030000
 262+ A66F 00 03 00 00
 262+ A673 00 03 00 00
 263+ A677 00 03 00 00  	HEX	00030000 00333000 00000000
 263+ A67B 00 33 30 00
 263+ A67F 00 00 00 00
 264+ A683 00 00 00 00  	HEX	00000000 00000000
 264+ A687 00 00 00 00
 265+ A68B 00 03 33 00  	HEX	00033300 00003000 00003000
 265+ A68F 00 00 30 00
 265+ A693 00 00 30 00
 266+ A697 03 10 30 00  	HEX	03103000 00331000 00000000
 266+ A69B 00 33 10 00
 266+ A69F 00 00 00 00
 267+ A6A3 00 00 00 00  	HEX	00000000 00000000
 267+ A6A7 00 00 00 00
 268+ A6AB 03 00 03 00  	HEX	03000300 03003000 03330000
 268+ A6AF 03 00 30 00
 268+ A6B3 03 33 00 00
 269+ A6B7 03 00 30 00  	HEX	03003000 03000300 00000000
 269+ A6BB 03 00 03 00
 269+ A6BF 00 00 00 00
 270+ A6C3 00 00 00 00  	HEX	00000000 00000000
 270+ A6C7 00 00 00 00
 271+ A6CB 03 00 00 00  	HEX	03000000 03000000 03000000
 271+ A6CF 03 00 00 00
 271+ A6D3 03 00 00 00
 272+ A6D7 03 00 00 00  	HEX	03000000 03333300 00000000
 272+ A6DB 03 33 33 00
 272+ A6DF 00 00 00 00
 273+ A6E3 00 00 00 00  	HEX	00000000 00000000
 273+ A6E7 00 00 00 00
 274+ A6EB 03 00 03 00  	HEX	03000300 03303300 03030300
 274+ A6EF 03 30 33 00
 274+ A6F3 03 03 03 00
 275+ A6F7 03 00 03 00  	HEX	03000300 03000300 00000000
 275+ A6FB 03 00 03 00
 275+ A6FF 00 00 00 00
 276+ A703 00 00 00 00  	HEX	00000000 00000000
 276+ A707 00 00 00 00
 277+ A70B 03 00 03 00  	HEX	03000300 03300300 03030300
 277+ A70F 03 30 03 00
 277+ A713 03 03 03 00
 278+ A717 03 00 33 00  	HEX	03003300 03000300 00000000
 278+ A71B 03 00 03 00
 278+ A71F 00 00 00 00
 279+ A723 00 00 00 00  	HEX	00000000 00000000
 279+ A727 00 00 00 00
 280+ A72B 00 33 30 00  	HEX	00333000 03101300 03000300
 280+ A72F 03 10 13 00
 280+ A733 03 00 03 00
 281+ A737 03 10 13 00  	HEX	03101300 00333000 00000000
 281+ A73B 00 33 30 00
 281+ A73F 00 00 00 00
 282+ A743 00 00 00 00  	HEX	00000000 00000000
 282+ A747 00 00 00 00
 283+ A74B 03 33 30 00  	HEX	03333000 03001300 03333000
 283+ A74F 03 00 13 00
 283+ A753 03 33 30 00
 284+ A757 03 00 00 00  	HEX	03000000 03000000 00000000
 284+ A75B 03 00 00 00
 284+ A75F 00 00 00 00
 285+ A763 00 00 00 00  	HEX	00000000 00000000
 285+ A767 00 00 00 00
 286+ A76B 00 33 30 00  	HEX	00333000 03101300 03000300
 286+ A76F 03 10 13 00
 286+ A773 03 00 03 00
 287+ A777 03 10 23 00  	HEX	03102300 00333200 00000020
 287+ A77B 00 33 32 00
 287+ A77F 00 00 00 20
 288+ A783 00 00 00 00  	HEX	00000000 00000000
 288+ A787 00 00 00 00
 289+ A78B 03 33 30 00  	HEX	03333000 03001300 03333000
 289+ A78F 03 00 13 00
 289+ A793 03 33 30 00
 290+ A797 03 00 30 00  	HEX	03003000 03000300 00000000
 290+ A79B 03 00 03 00
 290+ A79F 00 00 00 00
 291+ A7A3 00 00 00 00  	HEX	00000000 00000000
 291+ A7A7 00 00 00 00
 292+ A7AB 00 33 32 00  	HEX	00333200 03100100 00333000
 292+ A7AF 03 10 01 00
 292+ A7B3 00 33 30 00
 293+ A7B7 01 00 13 00  	HEX	01001300 02333000 00000000
 293+ A7BB 02 33 30 00
 293+ A7BF 00 00 00 00
 294+ A7C3 00 00 00 00  	HEX	00000000 00000000
 294+ A7C7 00 00 00 00
 295+ A7CB 03 33 33 00  	HEX	03333300 00030000 00030000
 295+ A7CF 00 03 00 00
 295+ A7D3 00 03 00 00
 296+ A7D7 00 03 00 00  	HEX	00030000 00030000 00000000
 296+ A7DB 00 03 00 00
 296+ A7DF 00 00 00 00
 297+ A7E3 00 00 00 00  	HEX	00000000 00000000
 297+ A7E7 00 00 00 00
 298+ A7EB 03 00 03 00  	HEX	03000300 03000300 03000300
 298+ A7EF 03 00 03 00
 298+ A7F3 03 00 03 00
 299+ A7F7 03 10 13 00  	HEX	03101300 00333000 00000000
 299+ A7FB 00 33 30 00
 299+ A7FF 00 00 00 00
 300+ A803 00 00 00 00  	HEX	00000000 00000000
 300+ A807 00 00 00 00
 301+ A80B 03 00 03 00  	HEX	03000300 03000300 03000300
 301+ A80F 03 00 03 00
 301+ A813 03 00 03 00
 302+ A817 00 30 30 00  	HEX	00303000 00030000 00000000
 302+ A81B 00 03 00 00
 302+ A81F 00 00 00 00
 303+ A823 00 00 00 00  	HEX	00000000 00000000
 303+ A827 00 00 00 00
 304+ A82B 03 00 03 00  	HEX	03000300 03000300 03030300
 304+ A82F 03 00 03 00
 304+ A833 03 03 03 00
 305+ A837 03 03 03 00  	HEX	03030300 00303000 00000000
 305+ A83B 00 30 30 00
 305+ A83F 00 00 00 00
 306+ A843 00 00 00 00  	HEX	00000000 00000000
 306+ A847 00 00 00 00
 307+ A84B 03 00 03 00  	HEX	03000300 00303000 00030000
 307+ A84F 00 30 30 00
 307+ A853 00 03 00 00
 308+ A857 00 30 30 00  	HEX	00303000 03000300 00000000
 308+ A85B 03 00 03 00
 308+ A85F 00 00 00 00
 309+ A863 00 00 00 00  	HEX	00000000 00000000
 309+ A867 00 00 00 00
 310+ A86B 03 00 03 00  	HEX	03000300 00303000 00030000
 310+ A86F 00 30 30 00
 310+ A873 00 03 00 00
 311+ A877 00 03 00 00  	HEX	00030000 00030000 00000000
 311+ A87B 00 03 00 00
 311+ A87F 00 00 00 00
 312+ A883 00 00 00 00  	HEX	00000000 00000000
 312+ A887 00 00 00 00
 313+ A88B 03 33 33 00  	HEX	03333300 00003000 00030000
 313+ A88F 00 00 30 00
 313+ A893 00 03 00 00
 314+ A897 00 30 00 00  	HEX	00300000 03333300 00000000
 314+ A89B 03 33 33 00
 314+ A89F 00 00 00 00
 315+ A8A3 00 00 00 00  	HEX	00000000 00000000
 315+ A8A7 00 00 00 00
 316+ A8AB 00 00 33 00  	HEX	00003300 00003000 00003000
 316+ A8AF 00 00 30 00
 316+ A8B3 00 00 30 00
 317+ A8B7 00 00 30 00  	HEX	00003000 00003300 00000000
 317+ A8BB 00 00 33 00
 317+ A8BF 00 00 00 00
 318+ A8C3 00 00 00 00  	HEX	00000000 00000000
 318+ A8C7 00 00 00 00
 319+ A8CB 03 00 00 00  	HEX	03000000 00300000 00030000
 319+ A8CF 00 30 00 00
 319+ A8D3 00 03 00 00
 320+ A8D7 00 00 30 00  	HEX	00003000 00000300 00000000
 320+ A8DB 00 00 03 00
 320+ A8DF 00 00 00 00
 321+ A8E3 00 00 00 00  	HEX	00000000 00000000
 321+ A8E7 00 00 00 00
 322+ A8EB 03 30 00 00  	HEX	03300000 00300000 00300000
 322+ A8EF 00 30 00 00
 322+ A8F3 00 30 00 00
 323+ A8F7 00 30 00 00  	HEX	00300000 03300000 00000000
 323+ A8FB 03 30 00 00
 323+ A8FF 00 00 00 00
 324+ A903 00 00 00 00  	HEX	00000000 00000000
 324+ A907 00 00 00 00
 325+ A90B 00 03 00 00  	HEX	00030000 00333000 02131200
 325+ A90F 00 33 30 00
 325+ A913 02 13 12 00
 326+ A917 00 03 00 00  	HEX	00030000 00030000 00000000
 326+ A91B 00 03 00 00
 326+ A91F 00 00 00 00
 327+ A923 00 00 00 00  	HEX	00000000 00000000
 327+ A927 00 00 00 00
 328+ A92B 00 00 00 00  	HEX	00000000 00000000 00000000
 328+ A92F 00 00 00 00
 328+ A933 00 00 00 00
 329+ A937 00 00 00 00  	HEX	00000000 33333330 00000000
 329+ A93B 33 33 33 30
 329+ A93F 00 00 00 00
 330+ A943 00 00 00 00  	HEX	00000000 00000000
 330+ A947 00 00 00 00
 331+ A94B 00 03 30 00  	HEX	00033000 00300300 03330000
 331+ A94F 00 30 03 00
 331+ A953 03 33 00 00
 332+ A957 00 30 00 00  	HEX	00300000 03333300 00000000
 332+ A95B 03 33 33 00
 332+ A95F 00 00 00 00
 333+ A963 00 00 00 00  	HEX	00000000 00000000
 333+ A967 00 00 00 00
 334+ A96B 00 00 00 00  	HEX	00000000 00330000 00113000
 334+ A96F 00 33 00 00
 334+ A973 00 11 30 00
 335+ A977 03 22 30 00  	HEX	03223000 00333000 00000000
 335+ A97B 00 33 30 00
 335+ A97F 00 00 00 00
 336+ A983 00 00 00 00  	HEX	00000000 00000000
 336+ A987 00 00 00 00
 337+ A98B 03 00 00 00  	HEX	03000000 03000000 03330000
 337+ A98F 03 00 00 00
 337+ A993 03 33 00 00
 338+ A997 03 01 30 00  	HEX	03013000 03330000 00000000
 338+ A99B 03 33 00 00
 338+ A99F 00 00 00 00
 339+ A9A3 00 00 00 00  	HEX	00000000 00000000
 339+ A9A7 00 00 00 00
 340+ A9AB 00 00 00 00  	HEX	00000000 00333000 03100000
 340+ A9AF 00 33 30 00
 340+ A9B3 03 10 00 00
 341+ A9B7 03 10 00 00  	HEX	03100000 00333000 00000000
 341+ A9BB 00 33 30 00
 341+ A9BF 00 00 00 00
 342+ A9C3 00 00 00 00  	HEX	00000000 00000000
 342+ A9C7 00 00 00 00
 343+ A9CB 00 00 30 00  	HEX	00003000 00003000 00333000
 343+ A9CF 00 00 30 00
 343+ A9D3 00 33 30 00
 344+ A9D7 03 10 30 00  	HEX	03103000 00333000 00000000
 344+ A9DB 00 33 30 00
 344+ A9DF 00 00 00 00
 345+ A9E3 00 00 00 00  	HEX	00000000 00000000
 345+ A9E7 00 00 00 00
 346+ A9EB 00 00 00 00  	HEX	00000000 00330000 03223000
 346+ A9EF 00 33 00 00
 346+ A9F3 03 22 30 00
 347+ A9F7 03 11 00 00  	HEX	03110000 00333000 00000000
 347+ A9FB 00 33 30 00
 347+ A9FF 00 00 00 00
 348+ AA03 00 00 00 00  	HEX	00000000 00000000
 348+ AA07 00 00 00 00
 349+ AA0B 00 33 10 00  	HEX	00331000 03100000 03310000
 349+ AA0F 03 10 00 00
 349+ AA13 03 31 00 00
 350+ AA17 03 00 00 00  	HEX	03000000 03000000 00000000
 350+ AA1B 03 00 00 00
 350+ AA1F 00 00 00 00
 351+ AA23 00 00 00 00  	HEX	00000000 00000000
 351+ AA27 00 00 00 00
 352+ AA2B 00 00 00 00  	HEX	00000000 00333000 03103000
 352+ AA2F 00 33 30 00
 352+ AA33 03 10 30 00
 353+ AA37 00 33 30 00  	HEX	00333000 00013000 00330000
 353+ AA3B 00 01 30 00
 353+ AA3F 00 33 00 00
 354+ AA43 00 00 00 00  	HEX	00000000 00000000
 354+ AA47 00 00 00 00
 355+ AA4B 03 00 00 00  	HEX	03000000 03000000 03331000
 355+ AA4F 03 00 00 00
 355+ AA53 03 33 10 00
 356+ AA57 03 00 30 00  	HEX	03003000 03003000 00000000
 356+ AA5B 03 00 30 00
 356+ AA5F 00 00 00 00
 357+ AA63 00 00 00 00  	HEX	00000000 00000000
 357+ AA67 00 00 00 00
 358+ AA6B 00 03 00 00  	HEX	00030000 00000000 00230000
 358+ AA6F 00 00 00 00
 358+ AA73 00 23 00 00
 359+ AA77 00 03 00 00  	HEX	00030000 00232000 00000000
 359+ AA7B 00 23 20 00
 359+ AA7F 00 00 00 00
 360+ AA83 00 00 00 00  	HEX	00000000 00000000
 360+ AA87 00 00 00 00
 361+ AA8B 00 03 00 00  	HEX	00030000 00000000 00030000
 361+ AA8F 00 00 00 00
 361+ AA93 00 03 00 00
 362+ AA97 00 03 00 00  	HEX	00030000 03030000 00300000
 362+ AA9B 03 03 00 00
 362+ AA9F 00 30 00 00
 363+ AAA3 00 00 00 00  	HEX	00000000 00000000
 363+ AAA7 00 00 00 00
 364+ AAAB 03 00 00 00  	HEX	03000000 03003000 03330000
 364+ AAAF 03 00 30 00
 364+ AAB3 03 33 00 00
 365+ AAB7 03 00 30 00  	HEX	03003000 03003000 00000000
 365+ AABB 03 00 30 00
 365+ AABF 00 00 00 00
 366+ AAC3 00 00 00 00  	HEX	00000000 00000000
 366+ AAC7 00 00 00 00
 367+ AACB 00 30 00 00  	HEX	00300000 00300000 00300000
 367+ AACF 00 30 00 00
 367+ AAD3 00 30 00 00
 368+ AAD7 00 30 00 00  	HEX	00300000 00030000 00000000
 368+ AADB 00 03 00 00
 368+ AADF 00 00 00 00
 369+ AAE3 00 00 00 00  	HEX	00000000 00000000
 369+ AAE7 00 00 00 00
 370+ AAEB 00 00 00 00  	HEX	00000000 03303000 03131300
 370+ AAEF 03 30 30 00
 370+ AAF3 03 13 13 00
 371+ AAF7 03 03 03 00  	HEX	03030300 03030300 00000000
 371+ AAFB 03 03 03 00
 371+ AAFF 00 00 00 00
 372+ AB03 00 00 00 00  	HEX	00000000 00000000
 372+ AB07 00 00 00 00
 373+ AB0B 00 00 00 00  	HEX	00000000 03330000 03013000
 373+ AB0F 03 33 00 00
 373+ AB13 03 01 30 00
 374+ AB17 03 00 30 00  	HEX	03003000 03003000 00000000
 374+ AB1B 03 00 30 00
 374+ AB1F 00 00 00 00
 375+ AB23 00 00 00 00  	HEX	00000000 00000000
 375+ AB27 00 00 00 00
 376+ AB2B 00 00 00 00  	HEX	00000000 00330000 03003000
 376+ AB2F 00 33 00 00
 376+ AB33 03 00 30 00
 377+ AB37 03 00 30 00  	HEX	03003000 00330000 00000000
 377+ AB3B 00 33 00 00
 377+ AB3F 00 00 00 00
 378+ AB43 00 00 00 00  	HEX	00000000 00000000
 378+ AB47 00 00 00 00
 379+ AB4B 00 00 00 00  	HEX	00000000 03330000 03013000
 379+ AB4F 03 33 00 00
 379+ AB53 03 01 30 00
 380+ AB57 03 01 30 00  	HEX	03013000 03330000 03000000
 380+ AB5B 03 33 00 00
 380+ AB5F 03 00 00 00
 381+ AB63 00 00 00 00  	HEX	00000000 00000000
 381+ AB67 00 00 00 00
 382+ AB6B 00 00 00 00  	HEX	00000000 00333000 03103000
 382+ AB6F 00 33 30 00
 382+ AB73 03 10 30 00
 383+ AB77 03 10 30 00  	HEX	03103000 00333000 00002300
 383+ AB7B 00 33 30 00
 383+ AB7F 00 00 23 00
 384+ AB83 00 00 00 00  	HEX	00000000 00000000
 384+ AB87 00 00 00 00
 385+ AB8B 00 00 00 00  	HEX	00000000 03033000 03300000
 385+ AB8F 03 03 30 00
 385+ AB93 03 30 00 00
 386+ AB97 03 00 00 00  	HEX	03000000 03000000 00000000
 386+ AB9B 03 00 00 00
 386+ AB9F 00 00 00 00
 387+ ABA3 00 00 00 00  	HEX	00000000 00000000
 387+ ABA7 00 00 00 00
 388+ ABAB 00 00 00 00  	HEX	00000000 00333000 03220000
 388+ ABAF 00 33 30 00
 388+ ABB3 03 22 00 00
 389+ ABB7 00 11 30 00  	HEX	00113000 03330000 00000000
 389+ ABBB 03 33 00 00
 389+ ABBF 00 00 00 00
 390+ ABC3 00 00 00 00  	HEX	00000000 00000000
 390+ ABC7 00 00 00 00
 391+ ABCB 00 30 00 00  	HEX	00300000 01331000 00300000
 391+ ABCF 01 33 10 00
 391+ ABD3 00 30 00 00
 392+ ABD7 00 31 00 00  	HEX	00310000 00031000 00000000
 392+ ABDB 00 03 10 00
 392+ ABDF 00 00 00 00
 393+ ABE3 00 00 00 00  	HEX	00000000 00000000
 393+ ABE7 00 00 00 00
 394+ ABEB 00 00 00 00  	HEX	00000000 03003000 03003000
 394+ ABEF 03 00 30 00
 394+ ABF3 03 00 30 00
 395+ ABF7 03 10 30 00  	HEX	03103000 02333000 00000000
 395+ ABFB 02 33 30 00
 395+ ABFF 00 00 00 00
 396+ AC03 00 00 00 00  	HEX	00000000 00000000
 396+ AC07 00 00 00 00
 397+ AC0B 00 00 00 00  	HEX	00000000 03000300 03000300
 397+ AC0F 03 00 03 00
 397+ AC13 03 00 03 00
 398+ AC17 00 30 30 00  	HEX	00303000 00030000 00000000
 398+ AC1B 00 03 00 00
 398+ AC1F 00 00 00 00
 399+ AC23 00 00 00 00  	HEX	00000000 00000000
 399+ AC27 00 00 00 00
 400+ AC2B 00 00 00 00  	HEX	00000000 03030300 03030300
 400+ AC2F 03 03 03 00
 400+ AC33 03 03 03 00
 401+ AC37 03 13 13 00  	HEX	03131300 03303000 00000000
 401+ AC3B 03 30 30 00
 401+ AC3F 00 00 00 00
 402+ AC43 00 00 00 00  	HEX	00000000 00000000
 402+ AC47 00 00 00 00
 403+ AC4B 00 00 00 00  	HEX	00000000 03003000 03103000
 403+ AC4F 03 00 30 00
 403+ AC53 03 10 30 00
 404+ AC57 00 33 00 00  	HEX	00330000 03013000 00000000
 404+ AC5B 03 01 30 00
 404+ AC5F 00 00 00 00
 405+ AC63 00 00 00 00  	HEX	00000000 00000000
 405+ AC67 00 00 00 00
 406+ AC6B 00 00 00 00  	HEX	00000000 03003000 03103000
 406+ AC6F 03 00 30 00
 406+ AC73 03 10 30 00
 407+ AC77 02 33 30 00  	HEX	02333000 00013000 03330000
 407+ AC7B 00 01 30 00
 407+ AC7F 03 33 00 00
 408+ AC83 00 00 00 00  	HEX	00000000 00000000
 408+ AC87 00 00 00 00
 409+ AC8B 00 00 00 00  	HEX	00000000 03333000 00030000
 409+ AC8F 03 33 30 00
 409+ AC93 00 03 00 00
 410+ AC97 00 30 00 00  	HEX	00300000 03333000 00000000
 410+ AC9B 03 33 30 00
 410+ AC9F 00 00 00 00
 411+ ACA3 00 00 00 00  	HEX	00000000 00000000
 411+ ACA7 00 00 00 00
 412+ ACAB 00 00 23 00  	HEX	00002300 00003000 00032000
 412+ ACAF 00 00 30 00
 412+ ACB3 00 03 20 00
 413+ ACB7 00 00 30 00  	HEX	00003000 00002300 00000000
 413+ ACBB 00 00 23 00
 413+ ACBF 00 00 00 00
 414+ ACC3 00 00 00 00  	HEX	00000000 00000000
 414+ ACC7 00 00 00 00
 415+ ACCB 00 03 20 00  	HEX	00032000 00032000 00000000
 415+ ACCF 00 03 20 00
 415+ ACD3 00 00 00 00
 416+ ACD7 00 03 20 00  	HEX	00032000 00032000 00000000
 416+ ACDB 00 03 20 00
 416+ ACDF 00 00 00 00
 417+ ACE3 00 00 00 00  	HEX	00000000 00000000
 417+ ACE7 00 00 00 00
 418+ ACEB 03 20 00 00  	HEX	03200000 00300000 00230000
 418+ ACEF 00 30 00 00
 418+ ACF3 00 23 00 00
 419+ ACF7 00 30 00 00  	HEX	00300000 03200000 00000000
 419+ ACFB 03 20 00 00
 419+ ACFF 00 00 00 00
 420+ AD03 00 00 00 00  	HEX	00000000 00000000
 420+ AD07 00 00 00 00
 421+ AD0B 01 33 10 30  	HEX	01331030 03013310 00000000
 421+ AD0F 03 01 33 10
 421+ AD13 00 00 00 00
 422+ AD17 00 00 00 00  	HEX	00000000 00000000 00000000
 422+ AD1B 00 00 00 00
 422+ AD1F 00 00 00 00
 423+ AD23 00 00 00 00  	HEX	00000000 00000000
 423+ AD27 00 00 00 00
 424+ AD2B 00 33 33 00  	HEX	00333300 03122130 03210030
 424+ AD2F 03 12 21 30
 424+ AD33 03 21 00 30
 425+ AD37 03 21 00 30  	HEX	03210030 03122130 00333300
 425+ AD3B 03 12 21 30
 425+ AD3F 00 33 33 00
 426+ AD43 00 00 00 00  	HEX	00000000 00000000
 426+ AD47 00 00 00 00
 427+ AD4B
# file closed: tilemap_font_8x6.i.asm
3822  AD4B              last:
3823  AD4B
3824  AD4B                            CSPECTMAP player.map
3825  AD4B                            savenex open "CalmCommander.nex",start,32766
3826  AD4B                            savenex core 2,0,0
3827  AD4B                            savenex auto
3828  AD4B                            savenex close
# file closed: cc.asm
